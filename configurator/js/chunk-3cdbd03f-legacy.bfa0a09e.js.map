{"version":3,"sources":["webpack:///./node_modules/@roomle/web-sdk/lib/material-viewer-22d76d16.js","webpack:///./node_modules/@roomle/web-sdk/lib/configurator-mesh-generator-b9cff6c4.js","webpack:///./node_modules/@roomle/web-sdk/lib/scene-manager-87a03313.js","webpack:///./node_modules/@roomle/web-sdk/lib/ui-callback-908e86fb.js"],"names":["MaterialViewerSceneManager","e","t","super","RMV","this","_sceneParams","type","_materialParams","color","metallic","alpha","alphaCutoff","doubleSided","_renderer","capabilities","maxTextures","loadDynamicLightSetting","createDynamicLightSettingSource","CAMERA","_initScene","THREE","BoxGeometry","MeshPhysicalMaterial","_initData","colors","PRIMARY","_environmentLoader","setEnvMap","_setMaterial","_mesh","Mesh","_material","castShadow","position","setY","_scene","add","initialFloorMaterial","a","changeFloorMaterialById","_environment","Color","_cameraControl","Box3","setFromObject","x","y","_domHelper","getClientDimensions","updateAndReset","getSize","Vector3","getCenter","showGUI","Promise","_configuratorMeshGenerator","loadMaterial","then","material","_updateGUI","_requestRender","__rapi_path__","loadTextures","shading","opacity","alphaTest","getHexString","side","DoubleSide","metalness","reflectivity","_creator_","_getInputManager","_inputManager","saoparams","intensity","occlusionWorldRadius","smoothTransition","samplesPerFrame","bias","numSamples","accumulative","shadowparams","shadowMapResolution","shadowRadius","shadowQuality","enableAccumulation","shadowBiasMultiplier","nearPlane","farPlane","fov","FrontSide","enable","numSamplesPerFrame","_guiGeometryFolder","addFolder","Cube","Sphere","PlaneVertical","PlaneHorizontal","onChange","_setGeometry","_guiMaterialFolder","removeFolder","addColor","_shadingChanged","min","max","step","transmission","depthWrite","transparent","_addGUIListener","_roomleMaterialViewerUiCallback","onMaterialShadingChanged","SphereGeometry","PlaneGeometry","rotateX","Math","PI","geometry","_rapiAccess","getMaterial","_pixotron","setPixotron","getCamera","changeFloorMaterial","_maxAnisotropy","mmWidth","i","mmHeight","r","Image","src","s","Texture","image","onload","needsUpdate","mapping","aoMap","roughnessMap","metalnessMap","map","normalMap","clear","prototype","RoomleMaterialViewer","_sceneManager","setCameraOffset","getCameraOffset","setDomElement","_lifeCycleManager","resume","resolve","_initPromiseCallback","bind","_threeLoader","fetch","_scriptLoader","id","all","left","top","right","bottom","enableHD","loadMaterialShading","flushCache","_clearCaches","loadMaterialId","getMaterialShading","loadSceneSettings","loadQualitySetting","setOverrides","updateCamera","pause","setGeometry","addTexture","removeTexture","cleanUp","clearCache","getScene","updateScene","INJECTABLES","MaterialViewer","setup","lookup","_context","Error","_viewer","window","ConfiguratorMeshGenerator","_geometryComponentMaterialCache","Map","_configuratorPreviewMaterial","MeshStandardMaterial","roughness","envMap","o","n","h","_generateGeometry","clone","l","_createMesh","layers","set","materialQueue","push","_assignMaterial","_getComponentMeshId","_materialLoaded","has","get","_cacheHolder","materialCache","_loadMaterial","_loadTextures","CameraControl2D","_scale","_state","_size","_center","_raycaster","Raycaster","_lastPosition","Vector2","_zoomPosition","_lastZoom","_zoomSpeed","pow","_cameraZoom","_initCamera","_plane","_camera","OrthographicCamera","copy","_cameraPosition","lookAt","updateProjectionMatrix","_inputListeners","key","fun","_locked","dispatchEvent","_move","event","stopPropagation","preventDefault","_zoomTo","_update","Date","now","getInputPosition","setFromCamera","intersectObject","length","pop","point","z","subVectors","divideScalar","zoom","animateCamera","abs","MathUtils","lerp","KEYBOARD_ROTATION_ANGLE","CameraControlFirstPerson","_rotationSpeed","_keyMap","minPolarAngle","maxPolarAngle","PerspectiveCamera","aspect","_width","_height","near","far","_cameraRotation","Quaternion","_pitch","_yaw","Euler","setFromEuler","addEventListener","_gamepadConnected","_gamepadDisconnected","startButtonPressListener","cancelAnimationFrame","_listenerLoopAnimationFrame","requestAnimationFrame","buttonPressListener","navigator","getGamepads","_checkRightStick","_checkLeftStick","_checkButtons","_processKeyMap","axes","_rotateHorizontal","_rotateVertical","buttons","pressed","quaternion","_","slerp","setRotationFromQuaternion","d","forEach","_onKeyChanged","_down","_up","_downPosition","_position","setTimeout","_onLongDown","_orbit","_moveForward","_orbitPosition","keyCode","_processUpDown","applyQuaternion","sub","element","Document","body","multiplyScalar","clientWidth","clientHeight","_saveYawAndPitch","SceneManager","_clock","Clock","_delta","_renderListener","_stopRendering","_forceRender","_lastChange","_running","_onAfterRender","_canvasID","createCameraControl","_addCameraControlListener","_setupScene","document","_tabVisible","removeEventListener","cameraControlChanged","getDelta","_animateCamera","mask","_renderLoopFunction","onBeforeRender","_statsHelper","updateRenderInfo","info","autoShadowsClear","autoSAOClear","render","_renderTarget","blit","clearDepth","TWEEN","update","_lightSetting","getTargetPosition","needsCamera","Scene","background","DEFAULT_BACKGROUND","DEG2RAD","format","RGBAFormat","minFilter","NearestFilter","magFilter","sRGBEncoding","floor","devicePixelRatio","WebGLRenderTarget","texture","encoding","WebGLRenderer","antialias","setPixelRatio","setSize","outputEncoding","gammaFactor","autoClear","shadowMap","enabled","PCFSoftShadowMap","getMaxAnisotropy","domElement","classList","appendChild","addEvents","setRendererAndScene","registerEnvironmentChangedCallback","sceneChanged","getPixelRatio","console","warn","children","_isPartOfScene","remove","renderLists","dispose","PIXOTRON","Pixotron","getPixotronParams","_pixotronUtil","getBakedShadowParams","setLoadedCallback","_staticItemLoader","loadGLTF","_setCamera","loadGLB","updateToBounds","innerWidth","innerHeight","disableDebugGUI","createElement","innerText","head","_guiLoaded","error","__folders","Object","keys","__controllers","onFinishChange","_guiParamChanged","default","removeEvents","_onWindowResize","_onKeyDown","_onKeyUp","environment","load","_setEnvironment","lights","loadFromObject","url","loadFromURL","json","loadFromJSON","object","ls","_updateBounds","getBounds","updateEnvironment","needsBounds","updateBounds","getBoundingSphere","offset","JSON","parse","stringify","createCamera","PromiseQueue","_waitingPromises","_errorCallback","allSettled","status","value","catch","reason","registerCallback","_callback","MeshGenerator","_maxTextures","_textureLoader","TextureLoader","_previewMaterial","geometryCache","Geometry","faceVertexUvs","vertices","c","m","u","p","g","faces","Face3","receiveShadow","mesh","startsWith","_loadBenchmarkTextures","_dataSyncer","requestAsset","textures","getTexturesOf","_singlePromiseFactory","create","_createMaterial","changeMaterialOfMesh","getItem","topImage","anisotropy","wrapS","RepeatWrapping","wrapT","width","depth","repeat","_plannerMeshGenerator","generateMesh","UiCallback","_isMute","enumerable","writable","Proxy","_setMute","substr"],"mappings":"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","file":"js/chunk-3cdbd03f-legacy.bfa0a09e.js","sourcesContent":["import\"./query-params-helper-a271f9dc.js\";import{_ as __decorate,i as inject,e as DynamicLightSettingLoader,P as PREDEFINED_LIGHTSETTING,H as createMaterial,a8 as setMaterial,a9 as getMaterialShading,f as getGUI,aa as addExistingTexture,J as addTexture,G as GLTF_LOADER_FILE_NAME,l as DependencyInjectionAssignment,L as Logger,ab as EnvironmentLoader,m as RapiAccess,q as RoomleDependencyInjection}from\"./rapi-access-413632b4.js\";import\"./main-thread-to-worker-8efc9a92.js\";import{a as CANVAS_ID,b as BackgroundEnvironment,C as CameraControl3D,F as FloorEnvironment,T as TWEEN_FILE_NAME,g as PIXOTRON_EFFETCS,i as PIXOTRON_FILE_NAME,S as ScriptLoader,f as DomHelper,I as InputManager,M as Main}from\"./pixotron-2f79bd46.js\";import{U as UiCallback}from\"./ui-callback-908e86fb.js\";import{C as ConfiguratorMeshGenerator}from\"./configurator-mesh-generator-b9cff6c4.js\";import{S as SceneManager}from\"./scene-manager-87a03313.js\";let MaterialViewerSceneManager=(()=>{class e extends SceneManager{constructor(e,t){super(e,t,CANVAS_ID.RMV,\"3D\",!1),this._sceneParams={type:\"cube\"},this._materialParams={color:\"#ffffff\",metallic:.5,alpha:0,alphaCutoff:0,doubleSided:!1},this._renderer.capabilities.maxTextures>8&&this.loadDynamicLightSetting(DynamicLightSettingLoader.createDynamicLightSettingSource(null,PREDEFINED_LIGHTSETTING.CAMERA)),this._initScene()}_initScene(){const e=new THREE.BoxGeometry(1,1,1,100,100,100),t=new THREE.MeshPhysicalMaterial({color:this._initData.colors.PRIMARY});this._environmentLoader.setEnvMap(t),this._setMaterial(t),this._mesh=new THREE.Mesh(e,this._material),this._mesh.castShadow=!0,this._mesh.position.setY(.5),this._scene.add(this._mesh);const{initialFloorMaterial:a}=this._initData;if(a?this.changeFloorMaterialById(a):this._environment=new BackgroundEnvironment(this._scene,null,new THREE.Color(16777215)),this._cameraControl instanceof CameraControl3D){const e=new THREE.Box3;e.setFromObject(this._mesh);let{x:t,y:a}=this._domHelper.getClientDimensions();this._cameraControl.updateAndReset(e.getSize(new THREE.Vector3),t,a,e.getCenter(new THREE.Vector3))}this.showGUI()}loadMaterialId(e){return new Promise(t=>{this._configuratorMeshGenerator.loadMaterial(e,1e3,1e3).then(e=>{this._setMaterial(e),this._mesh.material=this._material,this._updateGUI(),this._requestRender(!0),t()})})}loadMaterial(e){return new Promise(t=>{e.__rapi_path__||(e.__rapi_path__=\"materials\"),this._setMaterial(createMaterial(e,this._environmentLoader)),this._mesh.material=this._material,this._configuratorMeshGenerator.loadTextures(e,this._material,100,100).then(()=>{this._updateGUI(),this._requestRender(!0)}),t()})}loadMaterialShading(e){return new Promise(t=>{let a={shading:e};this._setMaterial(setMaterial(this._material,a,this._environmentLoader)),this._mesh.material=this._material,this._updateGUI(),this._requestRender(!0),t()})}_setMaterial(e){this._material=e,this._materialParams.alpha=e.opacity,this._materialParams.alphaCutoff=e.alphaTest,this._materialParams.color=\"#\"+e.color.getHexString(),this._materialParams.doubleSided=e.side===THREE.DoubleSide,this._materialParams.metallic=1===e.metalness?1:e.reflectivity}getMaterialShading(){return getMaterialShading(this._material)}createCameraControl(e){this._cameraControl=new CameraControl3D(this._creator_,this._getInputManager(),new THREE.Vector3(-1,1,1))}_getInputManager(){return this._inputManager}sceneChanged(){}getPixotronParams(){return{saoparams:{intensity:.25,occlusionWorldRadius:.6,smoothTransition:!0,samplesPerFrame:4,bias:.02,numSamples:200,accumulative:!0},shadowparams:{shadowMapResolution:1024,shadowRadius:1,shadowQuality:1,smoothTransition:!0,enableAccumulation:!0,shadowBiasMultiplier:.05,nearPlane:.01,farPlane:50,fov:40,numSamples:50,side:THREE.FrontSide}}}getBakedShadowParams(){return{enable:!1,smoothTransition:!0,numSamples:500,numSamplesPerFrame:4}}getBounds(){return this._mesh?(new THREE.Box3).setFromObject(this._mesh):null}_guiLoaded(){this._updateGUI()}_updateGUI(){let e=getGUI();e&&(this._guiGeometryFolder||(this._guiGeometryFolder=e.addFolder(\"Geometry\"),this._guiGeometryFolder.add(this._sceneParams,\"type\",{Cube:\"cube\",Sphere:\"sphere\",PlaneVertical:\"plane_vertical\",PlaneHorizontal:\"plane_horizontal\"}).onChange(e=>{this._setGeometry()})),this._material&&(this._guiMaterialFolder&&e.removeFolder(this._guiMaterialFolder),this._guiMaterialFolder=e.addFolder(\"Material\"),this._guiMaterialFolder.addColor(this._materialParams,\"color\").onChange(e=>{this._material.color=new THREE.Color(e),this._shadingChanged()}),this._guiMaterialFolder.add(this._materialParams,\"metallic\").min(0).max(1).step(.01).onChange(e=>{this._material.metalness=1===e?1:.5,this._material.reflectivity=e||.5,this._shadingChanged()}),this._guiMaterialFolder.add(this._material,\"roughness\").min(0).max(1).step(.01).onChange(e=>{this._shadingChanged()}),this._guiMaterialFolder.add(this._material,\"transmission\").min(0).max(1).step(.01).onChange(e=>{this._material.transmission=e,e>0&&(this._material.opacity=1,this._material.alphaTest=.5,this._material.depthWrite=!1,this._material.transparent=!0,this._material.metalness=0),this._mesh.castShadow=!this._material.transparent,this._shadingChanged()}),this._guiMaterialFolder.add(this._materialParams,\"alpha\").min(0).max(1).step(.01).onChange(e=>{this._material.transparent=e<1,this._material.opacity=e,this._material.depthWrite=e>=1,this._mesh.castShadow=!this._material.transparent,this._shadingChanged()}),this._guiMaterialFolder.add(this._materialParams,\"alphaCutoff\").min(0).max(1).step(.01).onChange(e=>{this._material.alphaTest=e||0,this._shadingChanged()}),this._guiMaterialFolder.add(this._materialParams,\"doubleSided\").onChange(e=>{this._material.side=e?THREE.DoubleSide:THREE.FrontSide,this._shadingChanged()})),this._addGUIListener(e))}_shadingChanged(){this._roomleMaterialViewerUiCallback.onMaterialShadingChanged(getMaterialShading(this._material))}setGeometry(e){this._sceneParams.type=e,this._setGeometry()}_setGeometry(){let e;\"cube\"===this._sceneParams.type&&(e=new THREE.BoxGeometry(1,1,1,100,100,100)),\"sphere\"===this._sceneParams.type&&(e=new THREE.SphereGeometry(.5,100,100)),\"plane_horizontal\"===this._sceneParams.type&&(e=new THREE.PlaneGeometry(1,1),e.rotateX(-Math.PI/2)),\"plane_vertical\"===this._sceneParams.type&&(e=new THREE.PlaneGeometry(1,1)),this._mesh.geometry=e,this._requestRender(!0)}async changeFloorMaterialById(e){const t=await this._rapiAccess.getMaterial(e);return this._environment&&this._environment instanceof FloorEnvironment||(this._environment=new FloorEnvironment(this._scene,this._environment,!0)),this._pixotron&&this._environment.setPixotron(this._pixotron,this._renderer,this._cameraControl.getCamera()),new Promise((e,a)=>{this._environment.changeFloorMaterial(t,this._maxAnisotropy).then(()=>{this._requestRender(),e()},a)})}async addTexture(e,t){const a=100/(0===e.mmWidth?1:e.mmWidth),i=100/(0===e.mmHeight?1:e.mmHeight);if(t){const r=new Image;r.src=t;const s=new THREE.Texture;s.image=r,r.onload=function(){s.needsUpdate=!0},addExistingTexture(s,e,this._material,this._maxAnisotropy,a,i,this._renderer.capabilities.maxTextures)}else await addTexture(e.image,e,this._material,this._maxAnisotropy,a,i,this._renderer.capabilities.maxTextures);this._requestRender()}removeTexture(e){\"ORM\"===e.mapping&&(this._material.aoMap=null,this._material.roughnessMap=null,this._material.metalnessMap=null),\"RGB\"!==e.mapping&&\"RGBA\"!==e.mapping||(this._material.map=null),\"XYZ\"===e.mapping&&(this._material.normalMap=null),this._material.needsUpdate=!0,this._requestRender()}clearCache(){this._configuratorMeshGenerator.clear()}}return __decorate([inject],e.prototype,\"_inputManager\",void 0),__decorate([inject],e.prototype,\"_configuratorMeshGenerator\",void 0),__decorate([inject],e.prototype,\"_roomleMaterialViewerUiCallback\",void 0),__decorate([inject],e.prototype,\"_rapiAccess\",void 0),e})(),RoomleMaterialViewer=(()=>{class e{constructor(e){this._creator_=e}setCameraOffset(e){this._sceneManager.setCameraOffset(e)}getCameraOffset(){return this._sceneManager.getCameraOffset()}init(e){return this._domHelper.setDomElement(e),this._sceneManager?(this._lifeCycleManager.resume(),Promise.resolve()):new Promise(this._initPromiseCallback.bind(this))}_initPromiseCallback(e,t){this._threeLoader.fetch().then(()=>{let t=this._scriptLoader.fetch(GLTF_LOADER_FILE_NAME,{id:\"gltf-loader\"}),a=this._scriptLoader.fetch(TWEEN_FILE_NAME,{id:\"tween-js\"});Promise.all([t,a]).then(()=>{this._sceneManager=new MaterialViewerSceneManager(this._creator_,{left:0,top:1,right:1,bottom:0}),this.enableHD(),e()})})}enableHD(){return new Promise((e,t)=>{const a=()=>{this._sceneManager.enableHD(),e()};Promise.all(PIXOTRON_EFFETCS.map(e=>this._scriptLoader.fetch(e,{id:e}))).then(()=>{this._scriptLoader.fetch(PIXOTRON_FILE_NAME,{id:\"pi-js\"}).then(a,t)},t)})}get callbacks(){return this._roomleMaterialViewerUiCallback}set callbacks(e){this._roomleMaterialViewerUiCallback=e}loadMaterialShading(e){return this._sceneManager.loadMaterialShading(e)}loadMaterial(e,t={}){return t.flushCache&&this._clearCaches(),this._sceneManager.loadMaterial(e)}loadMaterialId(e,t={}){return t.flushCache&&this._clearCaches(),this._sceneManager.loadMaterialId(e)}getMaterialShading(){return this._sceneManager.getMaterialShading()}loadSceneSetting(e){return this._sceneManager.loadSceneSettings(e)}loadQualitySetting(e){this._sceneManager.loadQualitySetting(e)}setOverrides(e){e&&this._initData.setOverrides(e)}updateSize(){this._sceneManager.updateCamera()}getMain(){}resumeTest(e){this._domHelper.setDomElement(e),this._lifeCycleManager.resume()}pauseTest(){this._lifeCycleManager.pause()}showGUI(){this._sceneManager.showGUI()}async changeFloorMaterialById(e){return this._sceneManager.changeFloorMaterialById(e)}setGeometry(e){this._sceneManager.setGeometry(e)}async addTexture(e,t){return this._sceneManager.addTexture(e,t)}removeTexture(e){return this._sceneManager.removeTexture(e)}_clearCaches(){this._rapiAccess.cleanUp(),this._sceneManager.clearCache()}getScene(){return this._sceneManager.getScene()}updateScene(){this._sceneManager.updateScene()}}return __decorate([inject],e.prototype,\"_domHelper\",void 0),__decorate([inject],e.prototype,\"_scriptLoader\",void 0),__decorate([inject],e.prototype,\"_lifeCycleManager\",void 0),__decorate([inject],e.prototype,\"_threeLoader\",void 0),__decorate([inject],e.prototype,\"_roomleMaterialViewerUiCallback\",void 0),__decorate([inject],e.prototype,\"_initData\",void 0),__decorate([inject],e.prototype,\"_rapiAccess\",void 0),e})();const INJECTABLES=[new DependencyInjectionAssignment(\"script-loader\",ScriptLoader),new DependencyInjectionAssignment(\"dom-helper\",DomHelper,1),new DependencyInjectionAssignment(\"logger\",Logger),new DependencyInjectionAssignment(\"input-manager\",InputManager,1),new DependencyInjectionAssignment(\"environment-loader\",EnvironmentLoader),new DependencyInjectionAssignment(\"configurator-mesh-generator\",ConfiguratorMeshGenerator),new DependencyInjectionAssignment(\"rapi-access\",RapiAccess),new DependencyInjectionAssignment(\"roomle-material-viewer-ui-callback\",class extends UiCallback{constructor(e){super(e),this.onMaterialShadingChanged=e=>{}}},1)];class MaterialViewer extends Main{setupGlobals(){}setupDependencies(){RoomleDependencyInjection.setup(INJECTABLES),this.lookup(\"logger\",this._context)}cleanUpGlobals(){throw new Error(\"Method not implemented.\")}cleanUpDependencies(){throw new Error(\"Method not implemented.\")}bootFinished(){this._viewer=new RoomleMaterialViewer(this._context),window.RoomleMaterialViewer||(window.RoomleMaterialViewer=this._viewer)}getApi(){return this._viewer}getContextName(){return\"material-viewer\"}}export{MaterialViewer};\n//# sourceMappingURL=material-viewer-22d76d16.js.map\n","import{K as PREVIEW_MATERIAL_COLOR,N as PREVIEW_MATERIAL_OPACITY,O as PREVIEW_MATERIAL_ROUGHNESS}from\"./rapi-access-413632b4.js\";import{M as MeshGenerator}from\"./ui-callback-908e86fb.js\";class ConfiguratorMeshGenerator extends MeshGenerator{constructor(e){super(e),this._geometryComponentMaterialCache=new Map,this._configuratorPreviewMaterial=new THREE.MeshStandardMaterial({color:PREVIEW_MATERIAL_COLOR,transparent:!0,opacity:PREVIEW_MATERIAL_OPACITY,roughness:PREVIEW_MATERIAL_ROUGHNESS,envMap:null}),this._environmentLoader.setEnvMap(this._configuratorPreviewMaterial)}generateMesh(e=0,t=null,a,r,s,o,i,n=!1){let h;h=n?this._generateGeometry(t,r,s,o,i).clone():this._generateGeometry(t,r,s,o,i);const l=this._createMesh(e,t,h);return l.layers.set(3),a&&this.materialQueue.push(this._assignMaterial(l,a).then(()=>{e&&t&&this._geometryComponentMaterialCache.set(this._getComponentMeshId(e,t),a),this._materialLoaded&&this._materialLoaded()})),l}_createMesh(e,t,a){if(e&&t){const r=this._getComponentMeshId(e,t);if(this._geometryComponentMaterialCache.has(r)){const e=this._geometryComponentMaterialCache.get(r);if(this._cacheHolder.materialCache.has(e)){const t=this._cacheHolder.materialCache.get(e);return new THREE.Mesh(a,t)}}}return new THREE.Mesh(a,this._configuratorPreviewMaterial.clone())}_getComponentMeshId(e,t){return e+\"_\"+t}setMaterial(e,t,a){this._assignMaterial(e,t).then(()=>{this._materialLoaded&&this._materialLoaded()})}loadMaterial(e,t,a){return super._loadMaterial(e,t,a)}loadTextures(e,t,a,r){return super._loadTextures(e,t,a,r)}}export{ConfiguratorMeshGenerator as C};\n//# sourceMappingURL=configurator-mesh-generator-b9cff6c4.js.map\n","import{t as toRadiant,r as position3VectorsAreEqual,a5 as rotationQuaternionsAreEqual,a6 as getDelta,s as position2VectorsAreEqual,_ as __decorate,i as inject,d as dispose,f as getGUI,e as DynamicLightSettingLoader,R as RoomleComponentFactoryInitializer,a7 as DynamicQualitySettingLoader}from\"./rapi-access-413632b4.js\";import{e as CameraControl,k as MIN_MOVE_DISTANCE,D as DynamicLightSetting,C as CameraControl3D,c as PixotronUtil,B as BakedShadowEnvironment,h as DAT_GUI_FILE_NAME,d as DynamicEnvironmentSettingLoader}from\"./pixotron-2f79bd46.js\";class CameraControl2D extends CameraControl{constructor(t,e,i){super(t,e,i),this._scale=1,this._state=0,this._size=20,this._center=new THREE.Vector3,this._raycaster=new THREE.Raycaster,this._lastPosition=new THREE.Vector2,this._zoomPosition=new THREE.Vector3,this._lastZoom=0,this._zoomSpeed=Math.pow(.95,2),this._cameraZoom=1,this._initCamera(i||new THREE.Vector3(0,10,0));let s=new THREE.PlaneGeometry(1e3,1e3);s.rotateX(-Math.PI/2),this._plane=new THREE.Mesh(s,new THREE.MeshStandardMaterial)}_getCamera(){return this._camera||this._initCamera(new THREE.Vector3(0,10,0)),this._camera}_initCamera(t){let{x:e,y:i}=this._domHelper.getClientDimensions(),s=e/i*this._size,n=this._size;this._camera=new THREE.OrthographicCamera(s/-2,s/2,n/2,n/-2,1,1e3),this._camera.position.copy(t),this._cameraPosition=t,this._camera.lookAt(new THREE.Vector3(0,0,0))}updateCamera(){let{x:t,y:e}=this._domHelper.getClientDimensions(),i=t/e*this._size,s=this._size;this._camera.left=i/-2,this._camera.right=i/2,this._camera.top=s/2,this._camera.bottom=s/-2,this._camera.updateProjectionMatrix()}_initInputListener(){this._inputListeners.push({key:3,fun:t=>{this._locked||(this._state=1,this._lastPosition.set(t.position.x,t.position.y),this.dispatchEvent(0))}}),this._inputListeners.push({key:6,fun:t=>{1!==this._state||this._locked||(this._move(new THREE.Vector2(t.position.x,t.position.y),t.type),this.dispatchEvent(1))}}),this._inputListeners.push({key:4,fun:t=>{1===this._state&&this.dispatchEvent(2),this._state=0}}),this._inputListeners.push({key:7,fun:t=>{t.event&&(t.event.stopPropagation(),t.event.preventDefault()),this._scale/=this._zoomSpeed,this._zoomTo(t.position,1),this._update()}}),this._inputListeners.push({key:8,fun:t=>{t.event&&(t.event.stopPropagation(),t.event.preventDefault()),this._scale*=this._zoomSpeed,this._zoomTo(t.position,-1),this._update()}})}_zoomTo(t,e){if(Date.now()-this._lastZoom>200){if(e>0||this._cameraZoom>=1){const e=this.getInputPosition(t);this._raycaster.setFromCamera(e,this._camera);const i=this._raycaster.intersectObject(this._plane);if(i.length<=0)return;const s=i.pop().point;this._zoomPosition.copy(s)}else this._zoomPosition.copy(this._center);this._cameraPosition.x=this._zoomPosition.x,this._cameraPosition.z=this._zoomPosition.z}this._lastZoom=Date.now()}_move(t,e){let i=new THREE.Vector2;i.subVectors(this._lastPosition,t),i.divideScalar(100),this._cameraPosition.x+=i.x*(2===e?1.1:1),this._cameraPosition.z+=i.y*(2===e?1.1:1),this._lastPosition.copy(t)}updateToBounds(t,e){let{x:i,y:s}=this._domHelper.getClientDimensions(),n=i/s;this._size=Math.max(t.x,t.z);let a=this._size,r=this._size;n>1?a=this._size*n:r=this._size*(s/i),this._center.copy(e),this._camera.left=a/-2,this._camera.right=a/2,this._camera.top=r/2,this._camera.bottom=r/-2,this._camera.zoom=1,this._camera.position.set(this._center.x,10,this._center.z),this._cameraPosition.copy(this._camera.position)}_update(t){this._scale=Math.min(this._scale,5),this._scale=Math.max(this._scale,.8),this._cameraZoom=this._scale,this._camera.updateProjectionMatrix()}animateCamera(t){return!(!super.animateCamera(t)&&Math.abs(this._cameraZoom-this._camera.zoom)<=.01||(this._camera.zoom=THREE.MathUtils.lerp(this._camera.zoom,this._cameraZoom,10*t),0))}}const KEYBOARD_ROTATION_ANGLE=Math.PI/4;class CameraControlFirstPerson extends CameraControl{constructor(t,e,i,s){super(t,e,i),this._state=0,this._rotationSpeed=1,this._keyMap=new Map,this.minPolarAngle=toRadiant(-60),this.maxPolarAngle=toRadiant(60),this._camera=s||new THREE.PerspectiveCamera,this._camera.fov=70,this._camera.aspect=this._width/this._height,this._camera.near=.1,this._camera.far=100,this._camera.updateProjectionMatrix(),this._camera.layers.set(3),this._camera.layers.enable(1),this._camera.layers.enable(2),this._camera.layers.enable(5),this._camera.layers.enable(4),i?this._camera.position.set(i.x,1.5,i.z):this._camera.position.set(0,1.5,0),this._cameraPosition=new THREE.Vector3,this._cameraPosition.copy(this._camera.position),this._cameraRotation=new THREE.Quaternion,this._pitch=0,this._yaw=0;let n=new THREE.Euler(-this._pitch,this._yaw,0,\"ZYX\");this._cameraRotation.setFromEuler(n),window.addEventListener(\"gamepadconnected\",this._gamepadConnected.bind(this)),window.addEventListener(\"gamepaddisconnected\",this._gamepadDisconnected.bind(this))}_gamepadConnected(t){this.startButtonPressListener()}_gamepadDisconnected(t){window.cancelAnimationFrame(this._listenerLoopAnimationFrame)}startButtonPressListener(){this._listenerLoopAnimationFrame=window.requestAnimationFrame(()=>{this.buttonPressListener()})}buttonPressListener(){let t=navigator.getGamepads()[0];this._checkRightStick(t),this._checkLeftStick(t),this._checkButtons(t),this._processKeyMap(this._keyMap,.001),this.startButtonPressListener()}_checkRightStick(t){let e=t.axes[2],i=t.axes[3];Math.abs(e)>.2&&(this._rotateHorizontal(.01*KEYBOARD_ROTATION_ANGLE*e),this._update(),this.dispatchEvent(1)),Math.abs(i)>.2&&(this._rotateVertical(.01*KEYBOARD_ROTATION_ANGLE*i),this._update(),this.dispatchEvent(1))}_checkLeftStick(t){let e=t.axes[0],i=t.axes[1];Math.abs(i)>.2?i<0?this._keyMap.set(87,!0):this._keyMap.set(83,!0):t.buttons&&t.buttons[12]&&t.buttons[12].pressed?this._keyMap.set(87,!0):t.buttons&&t.buttons[13]&&t.buttons[13].pressed?this._keyMap.set(83,!0):(this._keyMap.set(87,!1),this._keyMap.set(83,!1)),Math.abs(e)>.2?e<0?this._keyMap.set(65,!0):this._keyMap.set(68,!0):(this._keyMap.set(65,!1),this._keyMap.set(68,!1))}_checkButtons(t){t.buttons&&t.buttons[6]&&t.buttons[6].pressed?this._keyMap.set(16,!0):this._keyMap.set(16,!1),t.buttons&&t.buttons[14]&&t.buttons[14].pressed?(this._keyMap.set(37,!0),this.dispatchEvent(1)):this._keyMap.set(37,!1),t.buttons&&t.buttons[15]&&t.buttons[15].pressed?(this._keyMap.set(39,!0),this.dispatchEvent(1)):this._keyMap.set(39,!1)}animateCamera(t){let e=this._cameraPosition,i=this._cameraRotation,s=this.getCamera(),n=position3VectorsAreEqual(e,s.position),a=rotationQuaternionsAreEqual(i,s.quaternion);if(!e||n&&a)return!1;let r=this.getCamera().position.clone(),o=Math.min(10*t,1);r.lerp(e,o),this.getCamera().position.copy(r);let h=this.getCamera().quaternion.clone(),_=Math.min(5*t,1);h.slerp(i,_),this.getCamera().setRotationFromQuaternion(h);let d=!1;return this._keyMap.forEach(t=>{t&&(d=!0)}),d&&this._processKeyMap(this._keyMap,t),!0}_getCamera(){return this._camera}_initInputListener(){window.addEventListener(\"keyup\",this._onKeyChanged.bind(this),!1),window.addEventListener(\"keydown\",this._onKeyChanged.bind(this),!1),this._inputListeners.push({key:3,fun:t=>{this._down(t)}}),this._inputListeners.push({key:6,fun:t=>{this._move(t)}}),this._inputListeners.push({key:4,fun:t=>{this._up(t)}})}_down(t){this._downPosition=t.position,this._position=t.position,this._state=1,2===t.type&&window.setTimeout(this._onLongDown.bind(this),350),2===t.type?this._rotationSpeed=.6:this._rotationSpeed=1}_move(t){this._position=t.position,1!==this._state||this._locked||this._orbit(new THREE.Vector2(t.position.x,t.position.y)),2!==this._state||this._locked||(this._orbit(new THREE.Vector2(t.position.x,t.position.y)),this._moveForward())}_up(t){1===this._state&&this.dispatchEvent(2),2===this._state&&this._keyMap.set(87,!1),this._state=0,this._orbitPosition=null}_onLongDown(){getDelta(this._downPosition,this._position)<MIN_MOVE_DISTANCE&&1===this._state&&(this._state=2,this._orbit(new THREE.Vector2(this._position.x,this._position.y)),this._moveForward())}_update(t){let e=new THREE.Euler(-this._pitch,this._yaw,0,\"ZYX\");this._cameraRotation.setFromEuler(e)}updateCamera(){let{x:t,y:e}=this._domHelper.getClientDimensions();this._camera.aspect=t/e,this._camera.updateProjectionMatrix()}_onKeyChanged(t){this._keyMap.set(t.keyCode,\"keydown\"===t.type),this.dispatchEvent(6),this._processKeyMap(this._keyMap,.001)&&t.preventDefault()}_processKeyMap(t,e){e=Math.min(e,.1);let i=new THREE.Vector3(0,0,0),s=!1;return this._processUpDown(t,i,e),t.get(65)&&(i.x=-1*e),t.get(68)&&(i.x=1*e),t.get(37)&&(this._rotateHorizontal(-KEYBOARD_ROTATION_ANGLE*this._rotationSpeed*e),s=!0),t.get(39)&&(this._rotateHorizontal(KEYBOARD_ROTATION_ANGLE*this._rotationSpeed*e),s=!0),t.get(16)&&(i.x*=3,i.z*=3),!(0===i.x&&0===i.y&&0===i.z&&!s||(i.applyQuaternion(this.getCamera().quaternion),this._cameraPosition.add(new THREE.Vector3(i.x,0,i.z)),this._update(),0))}_processUpDown(t,e,i){(t.get(87)||t.get(38))&&(e.z=-1*i),(t.get(83)||t.get(40))&&(e.z=1*i)}_orbit(t){this._orbitPosition||(this._orbitPosition=new THREE.Vector2(t.x,t.y),this.dispatchEvent(0));let e=t.clone().sub(this._orbitPosition),i=this._domHelper.element instanceof Document?this._domHelper.element.body:this._domHelper.element;e.multiplyScalar(-1),this._rotateHorizontal(2*Math.PI*e.x/i.clientWidth*1),this._rotateVertical(2*Math.PI*e.y/i.clientHeight*1),position2VectorsAreEqual(this._orbitPosition,t)||this.dispatchEvent(1),this._orbitPosition.copy(t),this._update()}_moveForward(){this._keyMap.set(87,!0),this._processKeyMap(this._keyMap,.001)}_rotateVertical(t){let e=this._pitch+t;e>this.maxPolarAngle||e<this.minPolarAngle||(this._pitch=e,this._pitch<-Math.PI?this._pitch+=2*Math.PI:this._pitch>Math.PI&&(this._pitch-=2*Math.PI),this._saveYawAndPitch())}}let SceneManager=(()=>{class t{constructor(t,e,i,s,n){this._maxAnisotropy=1,this._clock=new THREE.Clock,this._delta=0,this._renderListener=null,this._stopRendering=!1,this._forceRender=!1,this._lastChange=Date.now(),this._running=!1,this._onAfterRender=()=>{},this._creator_=t,this._canvasID=i,this.createCameraControl(s),this._addCameraControlListener(),this._setupScene(e,n),document.addEventListener(\"visibilitychange\",this._tabVisible.bind(this)),this._renderListener=()=>{this._requestRender(!0)},this._getInputManager().addEventListener(7,this._renderListener,this),this._getInputManager().addEventListener(8,this._renderListener,this),this._lifeCycleManager.addEventListener(this)}onBeforeRender(){}_changeCameraControl(t){this._cameraControl&&this._cameraControl.cleanUp(),t instanceof CameraControlFirstPerson&&(this._getInputManager().removeEventListener(7,this._renderListener),this._getInputManager().removeEventListener(8,this._renderListener)),this._cameraControl instanceof CameraControlFirstPerson&&(this._getInputManager().addEventListener(7,this._renderListener,this),this._getInputManager().addEventListener(8,this._renderListener,this)),this._cameraControl=t,this.cameraControlChanged()}cameraControlChanged(){}_addCameraControlListener(){this._cameraControl.addEventListener(0,this._requestRender,this),this._cameraControl.addEventListener(1,this._requestRender,this),this._cameraControl.addEventListener(2,this._requestRender,this),this._cameraControl.addEventListener(6,this._requestRender,this)}_requestRender(t){if(!this._renderer)return;this._pixotron&&(this._pixotron.needsUpdate=!0,t&&(this._forceRender=!0));const e=()=>{this._delta=this._clock.getDelta(),this._animateCamera(),this._cameraControl.getCamera().layers.mask=65535,this._renderLoopFunction&&(this._renderLoopFunction(),this._renderLoopFunction=null),this.onBeforeRender(),this._statsHelper&&this._statsHelper.updateRenderInfo(this._renderer.info),this._pixotron?(this._forceRender&&(this._pixotron.autoShadowsClear=!0,this._pixotron.autoSAOClear=!0),this._pixotron.render(this._renderer,this._scene,this._cameraControl.getCamera(),this._renderTarget),this._forceRender=!1,this._pixotron.blit()):(this._renderer.clear(),this._renderer.render(this._scene,this._cameraControl.getCamera()),this._renderer.clearDepth()),this._onAfterRender(),window.TWEEN&&TWEEN.update(),this._lastChange+3e3<Date.now()||this._stopRendering?this._running=!1:(this._running=!0,requestAnimationFrame(e))};this._lastChange=Date.now(),this._running||this._stopRendering||(this._running=!0,requestAnimationFrame(e))}_animateCamera(){this._cameraControl&&(this._cameraControl.animateCamera(this._delta)||!this._pixotron||this._forceRender?(this._lightSetting instanceof DynamicLightSetting&&this._cameraControl.getCamera()instanceof THREE.PerspectiveCamera&&this._lightSetting.update(this._cameraControl.getCamera(),this._cameraControl.getTargetPosition()),this._pixotron&&(this._pixotron.needsUpdate=!0)):(this._pixotron.autoShadowsClear=!1,this._pixotron.autoSAOClear=!1)),this._environment&&this._environment.needsCamera()&&this._cameraControl instanceof CameraControl3D&&this._environment.updateCamera(this._cameraControl.getCamera())}_setupScene(t,e){const{x:i,y:s}=this._domHelper.getClientDimensions();this._scene=new THREE.Scene,(e=e||!1)||(this._scene.background=new THREE.Color(this._initData.colors.DEFAULT_BACKGROUND)),THREE.Math={DEG2RAD:THREE.MathUtils.DEG2RAD};const n={format:THREE.RGBAFormat,minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter},a=THREE.sRGBEncoding,r=Math.floor(i*window.devicePixelRatio),o=Math.floor(s*window.devicePixelRatio);this._renderTarget=new THREE.WebGLRenderTarget(r,o,n),this._renderTarget.texture.encoding=a,this._renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(i,s),this._renderer.outputEncoding=THREE.sRGBEncoding,this._renderer.gammaFactor=2.2,this._renderer.autoClear=!1,this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=THREE.PCFSoftShadowMap,this._maxAnisotropy=this._renderer.capabilities.getMaxAnisotropy(),this._renderer.domElement.classList.add(this._canvasID),this._domHelper.element.appendChild(this._renderer.domElement),this._getInputManager().addEvents(this._renderer.domElement),this._environmentLoader.setRendererAndScene(this._renderer,this._scene),this._environmentLoader.registerEnvironmentChangedCallback(()=>this._requestRender(!0)),this._requestRender(),window.addEventListener(\"resize\",this,!1),window.addEventListener(\"keydown\",this,!1),window.addEventListener(\"keyup\",this,!1),this.sceneChanged()}_tabVisible(t){this.updateCamera(),this._requestRender(!0)}setupScene(t,e){this._setupScene(t,e)}updateCamera(){const{x:t,y:e}=this._domHelper.getClientDimensions();this._renderer.setSize(t,e);const i=this._renderer.getPixelRatio();if(this._renderTarget){const s=Math.floor(t*i),n=Math.floor(e*i);this._renderTarget.setSize(s,n)}if(this._pixotron){this._pixotron.autoShadowsClear=!0,this._pixotron.autoSAOClear=!0,this._forceRender=!0;try{this._pixotron.setSize(t,e)}catch(t){console.warn(t)}}this._cameraControl.updateCamera(),this._requestRender(!0)}_onWindowResize(){this.updateCamera(),this._requestRender(!0)}_isPartOfScene(t){return\"Object3D\"===t.type||\"Mesh\"===t.type||\"GLB\"===t.type||\"GLTF\"===t.type||\"Group\"===t.type}cleanUp(){this._getInputManager().removeEventListener(7,this._renderListener),this._getInputManager().removeEventListener(8,this._renderListener),this._cameraControl&&this._cameraControl.cleanUp()}clearScene(){let t=[];this._scene.children.forEach(e=>{this._isPartOfScene(e)&&t.push(e)}),t.forEach(t=>{dispose(t),this._scene.remove(t)}),this._renderer.renderLists.dispose()}enableHD(){this._pixotron=new window.PIXOTRON.Pixotron(this.getPixotronParams()),this._pixotronUtil=new PixotronUtil(this._pixotron),this._environment instanceof BakedShadowEnvironment&&(this._environment.setPixotron(this._pixotron,this._renderer,this._cameraControl.getCamera(),this.getBakedShadowParams()),this._environment.setLoadedCallback(()=>setTimeout(()=>this._requestRender(!0),500))),this._requestRender()}_loadGLTF(t,e,i,s,n,a,r){return new Promise((o,h)=>{this._staticItemLoader.loadGLTF(t,e,i,s,n,a,null,r).then(t=>{this._setCamera(\"GLTF\",t),o(t)},h)})}_loadGLB(t,e,i,s,n,a,r,o){return new Promise((h,_)=>{this._staticItemLoader.loadGLB(t,e,i,s,n,a,r,o).then(t=>{this._setCamera(\"GLB\",t),h(t)},_)})}_setCamera(t,e){if(!e)return void console.warn(\"could not set camera for gltf\",e);const i=new THREE.Box3;if(i.setFromObject(e),\"GLB\"===t)this._cameraControl instanceof CameraControl3D&&this._cameraControl.updateToBounds(i,window.innerWidth,window.innerHeight,!1);else if(\"GLTF\"===t){if(this._cameraControl instanceof CameraControl3D){let{x:t,y:e}=this._domHelper.getClientDimensions();this._cameraControl.updateAndReset(i.getSize(new THREE.Vector3),t,e,i.getCenter(new THREE.Vector3),-15,70,5,!1)}this._cameraControl instanceof CameraControl2D&&this._cameraControl.updateToBounds(i.getSize(new THREE.Vector3),i.getCenter(new THREE.Vector3))}this.updateCamera()}showGUI(){if(this._initData.disableDebugGUI)return;const t=document.createElement(\"style\");t.innerText=\".dg.main{position:absolute;z-index:100;top:0;left:0;}\",document.head.appendChild(t),this._scriptLoader.fetch(DAT_GUI_FILE_NAME,{id:\"dat-gui-js\"}).then(()=>{let t=getGUI(!1);t&&(this._domHelper.element.appendChild(t.domElement),this._guiLoaded())},t=>console.error(t))}_guiLoaded(){let t=getGUI();t&&(this._lightSetting&&this._lightSetting.showGUI(),this._pixotron&&this._pixotronUtil.showGUI(),this._environment&&this._environment.showGUI(),this._addGUIListener(t))}_addGUIListener(t){let e=t.__folders;Object.keys(e).forEach(t=>{let i=e[t];i.__folders&&Object.keys(i.__folders).forEach(t=>{let i=e[t];this._addGUIListener(i)}),i.__controllers&&i.__controllers.forEach(t=>{t.onFinishChange(()=>{this._guiParamChanged()})})})}_guiParamChanged(){this._requestRender()}showStats(){import(\"./stats-helper-57e0340c.js\").then(t=>this._statsHelper=new t.default)}_onKeyDown(t){}_onKeyUp(t){}pause(){this._getInputManager().removeEvents(this._renderer.domElement),window.removeEventListener(\"resize\",this,!1),window.removeEventListener(\"keydown\",this,!1),window.removeEventListener(\"keyup\",this,!1)}resume(){this.updateCamera(),this._renderer.domElement.classList.add(this._canvasID),this._domHelper.element.appendChild(this._renderer.domElement),this._getInputManager().addEvents(this._renderer.domElement),window.addEventListener(\"resize\",this,!1),window.addEventListener(\"keydown\",this,!1),window.addEventListener(\"keyup\",this,!1),this._requestRender(!0)}destroy(){this.pause(),this.cleanUp()}handleEvent(t){switch(t.type){case\"resize\":this._onWindowResize();break;case\"keydown\":this._onKeyDown(t);break;case\"keyup\":this._onKeyUp(t)}}loadSceneSettings(t){let e,i;return e=t.environment?new Promise(e=>{(new DynamicEnvironmentSettingLoader).load(this._scene,this._renderer.domElement,this._environment,t).then(t=>{this._setEnvironment(t),e()})}):Promise.resolve(),t.lights?(this._lightSetting=new DynamicLightSetting(this._scene,this._lightSetting),i=this._lightSetting.loadFromObject(t)):i=Promise.resolve(),new Promise((t,s)=>{Promise.all([e,i]).then(()=>{this._requestRender(!0),t()},s)})}_setEnvironment(t){this._environment=t,this._pixotron&&this._environment instanceof BakedShadowEnvironment&&(this._environment.setPixotron(this._pixotron,this._renderer,this._cameraControl.getCamera(),this.getBakedShadowParams()),this._environment.setLoadedCallback(()=>setTimeout(()=>this._requestRender(!0),500)))}loadQualitySetting(t){this._pixotron&&(new DynamicQualitySettingLoader).set(this._pixotron,t)}async loadDynamicLightSetting(t){this._lightSetting=new DynamicLightSetting(this._scene,this._lightSetting);let e=!1;if(t.url)await this._lightSetting.loadFromURL(t.url),e=!0;else if(t.json)await this._lightSetting.loadFromJSON(t.json),e=!0;else if(t.object)await this._lightSetting.loadFromObject(t.object),e=!0;else if(t.ls){const i=DynamicLightSettingLoader.createDynamicLightSettingSource(null,t.ls);await this._lightSetting.loadFromURL(i.url),e=!0}if(!e)throw new Error(\"No dynamic light setting source set\");this._requestRender(!0)}getScene(){return this._scene}updateScene(){this._updateBounds(this.getBounds()),this._requestRender(!0)}_updateBounds(t){if(t){if(this.updateEnvironment(t),this._lightSetting&&this._lightSetting.needsBounds()&&this._lightSetting.updateBounds(t),this._pixotronUtil){const e=new THREE.Sphere;t.getBoundingSphere(e),this._pixotronUtil.updateBounds(e)}this._requestRender(!0)}}setCameraOffset(t){const e=this._cameraControl.getCamera();e.offset?(e.offset=t,this._requestRender(!0)):console.warn(\"Cannot set offset, current camera does not support it\")}getCameraOffset(){const t=this._cameraControl.getCamera();return t.offset?JSON.parse(JSON.stringify(t.offset)):{left:0,top:0,right:1,bottom:1}}getPerspectiveOffsetCamera(){const t=this._domHelper.getClientDimensions(),e=t.x,i=t.y;return RoomleComponentFactoryInitializer().createCamera(30,e/i,.1,20)}updateEnvironment(t,e=!1){t&&this._environment&&this._environment.needsBounds()&&this._environment.updateBounds(t.getSize(new THREE.Vector3),e)}}return __decorate([inject],t.prototype,\"_domHelper\",void 0),__decorate([inject],t.prototype,\"_scriptLoader\",void 0),__decorate([inject],t.prototype,\"_lifeCycleManager\",void 0),__decorate([inject],t.prototype,\"_staticItemLoader\",void 0),__decorate([inject],t.prototype,\"_environmentLoader\",void 0),__decorate([inject],t.prototype,\"_initData\",void 0),t})();export{CameraControl2D as C,SceneManager as S,CameraControlFirstPerson as a};\n//# sourceMappingURL=scene-manager-87a03313.js.map\n","import{_ as __decorate,i as inject,K as PREVIEW_MATERIAL_COLOR,O as PREVIEW_MATERIAL_ROUGHNESS,Q as PREVIEW_MATERIAL_METALNESS,H as createMaterial,J as addTexture}from\"./rapi-access-413632b4.js\";import{c as createBenchmarkMaterial,e as createBenchmarkTexture,f as setDescriptor,i as setWriteable}from\"./main-thread-to-worker-8efc9a92.js\";class PromiseQueue{constructor(e,t){this._waitingPromises=[],this._errorCallback=()=>{},Promise.allSettled=Promise.allSettled||(e=>Promise.all(e.map(e=>e.then(e=>({status:\"fulfilled\",value:e})).catch(e=>({status:\"rejected\",reason:e}))))),e&&this.registerCallback(e),t&&(this._errorCallback=t)}push(e){this._waitingPromises.push(e),Promise.all(this._waitingPromises).then(e=>{e.length===this._waitingPromises.length&&this._callback&&(this._callback(e),this._waitingPromises=[])},this._errorCallback)}finished(e=!1){return new Promise((t,a)=>{const r=e?\"allSettled\":\"all\";Promise[r](this._waitingPromises).then(e=>{if(\"allSettled\"===r){const a=[];e.forEach(({value:e,status:t})=>{\"fulfilled\"===t&&a.push(e)}),t(a)}else t(e)},e=>{a(e)})})}registerCallback(e){this._callback=e}unregisterCallback(){this._callback=null}get length(){return this._waitingPromises.length}}let MeshGenerator=(()=>{class e{constructor(e){this.materialQueue=new PromiseQueue,this._maxAnisotropy=1,this._maxTextures=16,this._textureLoader=new THREE.TextureLoader,this._creator_=e,this._previewMaterial=new THREE.MeshStandardMaterial({color:PREVIEW_MATERIAL_COLOR,roughness:PREVIEW_MATERIAL_ROUGHNESS,metalness:PREVIEW_MATERIAL_METALNESS}),this._environmentLoader.setEnvMap(this._previewMaterial)}_generateGeometry(e,t,a,r,s){let i;if(e&&this._cacheHolder.geometryCache.has(e))i=this._cacheHolder.geometryCache.get(e);else{i=new THREE.Geometry,i.faceVertexUvs=[],i.faceVertexUvs[0]=[];for(let e=0,a=t.length;e<a;e+=3)i.vertices.push(new THREE.Vector3(t[e]/1e3,t[e+2]/1e3,t[e+1]/-1e3));let o=0,h=0,l=0,c=0,n=0,m=0,_=0,d=0,u=0,p=0,g=[];for(let e=0,t=a.length;e<t;e+=3)h=e,l=e+1,c=e+2,n=3*a[h],m=3*a[l],_=3*a[c],g=[new THREE.Vector3(s[n],s[n+2],-1*s[n+1]),new THREE.Vector3(s[m],s[m+2],-1*s[m+1]),new THREE.Vector3(s[_],s[_+2],-1*s[_+1])],i.faces.push(new THREE.Face3(a[h],a[l],a[c],g)),d=2*a[h],u=2*a[l],p=2*a[c],i.faceVertexUvs[0][o]=[],i.faceVertexUvs[0][o][0]=new THREE.Vector2(r[d],r[d+1]),i.faceVertexUvs[0][o][1]=new THREE.Vector2(r[u],r[u+1]),i.faceVertexUvs[0][o][2]=new THREE.Vector2(r[p],r[p+1]),o++;e&&this._cacheHolder.geometryCache.set(e,i)}return i}changeMaterialOfMesh(e,t){e&&t?(e.material=t,e.material.transparent||0===e.material.opacity||e.material.transmission>0?(e.castShadow=!1,e.receiveShadow=!1):(e.castShadow=!0,e.receiveShadow=!0),e.material.needsUpdate=!0):console.warn(\"could not assign material to mesh\",{mesh:e},{material:t})}_createMaterial(e,t,a,r,s){if(this._cacheHolder.materialCache.has(e))t();else if(e.startsWith(\"benchmarkMaterial\")){let i=createBenchmarkMaterial(e),o=createMaterial(i,this._environmentLoader);this._loadBenchmarkTextures(i,o,r,s).then(t,a)}else this._rapiAccess.getMaterial(e).then(e=>{let i=createMaterial(e,this._environmentLoader);this._loadTextures(e,i,r,s).then(t,a)},a)}_loadBenchmarkTextures(e,t,a=1,r=1){return new Promise((s,i)=>{const o=createBenchmarkTexture(e.id);addTexture(this._dataSyncer.requestAsset(o.image,!0),o,t,this._maxAnisotropy,a/(0===o.mmWidth?1:o.mmWidth),r/(0===o.mmHeight?1:o.mmHeight),this._maxTextures).then(()=>{this._cacheHolder.materialCache.set(e.id,t),s()},i)})}_loadTextures(e,t,a=1,r=1){return new Promise((s,i)=>{if(!e.textures||e.textures&&0===e.textures.length)return this._cacheHolder.materialCache.set(e.id,t),s();this._rapiAccess.getTexturesOf(e).then(o=>{let h=[];o.forEach(e=>{h.push(addTexture(this._dataSyncer.requestAsset(e.image,!0),e,t,this._maxAnisotropy,a/(0===e.mmWidth?1:e.mmWidth),r/(0===e.mmHeight?1:e.mmHeight),this._maxTextures))}),Promise.all(h).then(()=>{this._cacheHolder.materialCache.set(e.id,t),s()},i)})})}_loadMaterial(e,t,a){return new Promise((r,s)=>{this._singlePromiseFactory.create(6,e,(r,s)=>this._createMaterial(e,r,s,t,a)).then(()=>{setTimeout(()=>r(this._cacheHolder.materialCache.get(e)),0)},s)})}_assignMaterial(e,t){return this._cacheHolder.materialCache.has(t)?(this.changeMaterialOfMesh(e,this._cacheHolder.materialCache.get(t)),Promise.resolve()):new Promise((a,r)=>{this._loadMaterial(t).then(t=>{this.changeMaterialOfMesh(e,t),a()},r)})}get maxAnisotropy(){return this._maxAnisotropy}set maxAnisotropy(e){this._maxAnisotropy=e}get maxTextures(){return this._maxTextures}set maxTextures(e){this._maxTextures=e}clear(){this._cacheHolder.clear()}_assignRGB(e,t){return new Promise(a=>{let r,s=\"rbg\"+JSON.stringify(t);this._cacheHolder.materialCache.has(s)?r=this._cacheHolder.materialCache.get(s):(r=new THREE.MeshStandardMaterial({color:t}),this._environmentLoader.setEnvMap(r),this._cacheHolder.materialCache.set(s,r)),this.changeMaterialOfMesh(e,r),setTimeout(()=>a(),0)})}_assignItem(e,t){return new Promise((a,r)=>{if(this._cacheHolder.materialCache.has(t))return this.changeMaterialOfMesh(e,this._cacheHolder.materialCache.get(t)),void a();this._rapiAccess.getItem(t).then(s=>{if(s.topImage)this._textureLoader.load(s.topImage,r=>{r.anisotropy=this._maxAnisotropy,r.wrapS=THREE.RepeatWrapping,r.wrapT=THREE.RepeatWrapping;let i=new THREE.Vector2(1,1);s.width>0&&(i.x=1/s.width),s.depth>0&&(i.y=1/s.depth),r.repeat.set(i.x,i.y);const o=new THREE.MeshPhysicalMaterial({map:r,roughness:.5,metalness:.1});this._environmentLoader.setEnvMap(o),this._cacheHolder.materialCache.set(t,o),this.changeMaterialOfMesh(e,o),setTimeout(()=>a(),0)});else{const e=\"can not set material, catalog item top image is not set\";console.warn(e),r(e)}},r)})}_generateMesh(e=0,t=null,a,r,s,i,o,h=!1){return this._plannerMeshGenerator.generateMesh(t,a,r,s,i,o)}setMaterialLoadedListener(e){this._materialLoaded=e}removeMaterialLoadedListener(){this._materialLoaded=void 0}}return __decorate([inject],e.prototype,\"_rapiAccess\",void 0),__decorate([inject],e.prototype,\"_environmentLoader\",void 0),__decorate([inject],e.prototype,\"_dataSyncer\",void 0),__decorate([inject],e.prototype,\"_singlePromiseFactory\",void 0),__decorate([inject],e.prototype,\"_cacheHolder\",void 0),__decorate([inject],e.prototype,\"_plannerMeshGenerator\",void 0),e})();class UiCallback{constructor(e){return this._isMute=!1,this._creator_=e,setDescriptor(this,\"_isMute\",{enumerable:!1,writable:!1}),setDescriptor(UiCallback.prototype,\"_setMute\",{enumerable:!1,writable:!1}),setDescriptor(UiCallback.prototype,\"mute\",{enumerable:!1,writable:!1}),setDescriptor(UiCallback.prototype,\"unmute\",{enumerable:!1,writable:!1}),new Proxy(this,this)}_setMute(e){setWriteable(this,\"_isMute\",!0),this._isMute=e,setWriteable(this,\"_isMute\",!1)}mute(){this._setMute(!0)}unmute(){this._setMute(!1)}get(e,t){return this._isMute&&\"function\"==typeof this[t]&&\"on\"===t.substr(0,2)?()=>{}:this[t]}}export{MeshGenerator as M,UiCallback as U};\n//# sourceMappingURL=ui-callback-908e86fb.js.map\n"],"sourceRoot":""}