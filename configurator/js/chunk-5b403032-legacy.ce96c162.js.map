{"version":3,"sources":["webpack:///./node_modules/@roomle/web-sdk/lib/glb-viewer-7900c0c4.js","webpack:///./node_modules/@roomle/web-sdk/lib/default-light-setting-3329a5c3.js","webpack:///./node_modules/@roomle/web-sdk/lib/scene-manager-87a03313.js"],"names":["INJECTABLES","AdjustableCameraControl3D","super","arguments","this","shouldIgnoreStandardBehavior","e","t","n","i","r","s","THREE","Vector3","x","z","a","y","_boundingBox","Box3","o","Euler","Math","PI","c","Quaternion","setFromEuler","_camera","updateProjectionMatrix","quaternion","copy","position","_saveYawAndPitch","_update","animateCamera","GLBViewerLightSetting","_params","ambientLight","color","_ambientLight","AmbientLight","Color","addToScene","_scene","add","remove","removeFromScene","addFolder","min","max","step","addColor","onChange","GLBViewerSceneManager","GLB","_itemsCount","_standardSceneBackgroundColor","background","_renderer","capabilities","maxTextures","loadDynamicLightSetting","createDynamicLightSettingSource","CAMERA","console","warn","_lightSetting","_setEnvironment","_environment","_cameraControl","_creator_","_getInputManager","_glbInputManager","_rapiAccess","getItem","configuration","Promise","reject","loadGLB","clearScene","_loadGLB","then","_currentGLB","_domHelper","getClientDimensions","setFromObject","getSize","getCenter","updateToBounds","reset","_updateBounds","WebGLRenderer","antialias","setSize","outputEncoding","sRGBEncoding","autoClear","shadowMap","enabled","type","BasicShadowMap","getCamera","clone","PerspectiveCamera","aspect","render","domElement","toDataURL","toBlob","image","width","height","blob","adjust","_requestRender","round","enableHD","_pixotron","enableAA","getSAOPass","saoparams","intensity","occlusionWorldRadius","smoothTransition","samplesPerFrame","bias","numSamples","accumulative","falloff","shadowparams","shadowMapResolution","shadowRadius","shadowQuality","enableAccumulation","shadowBiasMultiplier","nearPlane","farPlane","fov","side","FrontSide","enable","numSamplesPerFrame","bShadowMaterial","darkness","size","lightDirection","lightSolidAngle","prototype","GLBRenderWorker","_prefix","_listeners","Set","_finishedItems","_sceneManager","alpha","_width","_height","setClearColor","delete","_entries","forEach","push","_transform","onStart","length","_zip","window","JSZip","_doNextEntry","_resolve","name","path","replace","url","camera","fieldOfView","yaw","rotation","pitch","onFinished","_processEntry","adjustCamera","preparePerspectiveImage","_entryFinished","indexOf","splice","onElementFinished","file","RoomleGLBViewer","_currentIdOrUrl","setCameraOffset","getCameraOffset","setOverrides","setDomElement","_lifeCycleManager","resume","resolve","_initPromiseCallback","bind","_threeLoader","fetch","_scriptLoader","id","all","left","top","right","bottom","map","trackView","loadStaticItem","loadSceneSettings","loadQualitySetting","JSON","parse","addListener","start","items","generateAsync","document","createElement","href","URL","createObjectURL","download","style","display","body","appendChild","click","removeChild","removeListener","_initData","_globalInitData","updateCamera","pause","showGUI","getScene","updateScene","GlbViewer","setup","lookup","_context","Error","_viewer","DefaultLightSetting","mainDirLight","secondDirLight","_mainDirectionalLight","DirectionalLight","set","layers","castShadow","shadow","near","far","mapSize","Vector2","visible","lookAt","_secondDirectionalLight","CameraControl2D","_scale","_state","_size","_center","_raycaster","Raycaster","_lastPosition","_zoomPosition","_lastZoom","_zoomSpeed","pow","_cameraZoom","_initCamera","PlaneGeometry","rotateX","_plane","Mesh","MeshStandardMaterial","OrthographicCamera","_cameraPosition","_inputListeners","key","fun","_locked","dispatchEvent","_move","event","stopPropagation","preventDefault","_zoomTo","Date","now","getInputPosition","setFromCamera","intersectObject","pop","point","subVectors","divideScalar","zoom","abs","MathUtils","lerp","KEYBOARD_ROTATION_ANGLE","CameraControlFirstPerson","_rotationSpeed","_keyMap","Map","minPolarAngle","maxPolarAngle","_cameraRotation","_pitch","_yaw","addEventListener","_gamepadConnected","_gamepadDisconnected","startButtonPressListener","cancelAnimationFrame","_listenerLoopAnimationFrame","requestAnimationFrame","buttonPressListener","navigator","getGamepads","_checkRightStick","_checkLeftStick","_checkButtons","_processKeyMap","axes","_rotateHorizontal","_rotateVertical","buttons","pressed","h","_","slerp","setRotationFromQuaternion","d","_onKeyChanged","_down","_up","_downPosition","_position","setTimeout","_onLongDown","_orbit","_moveForward","_orbitPosition","keyCode","_processUpDown","get","applyQuaternion","sub","element","Document","multiplyScalar","clientWidth","clientHeight","SceneManager","_maxAnisotropy","_clock","Clock","_delta","_renderListener","_stopRendering","_forceRender","_lastChange","_running","_onAfterRender","_canvasID","createCameraControl","_addCameraControlListener","_setupScene","_tabVisible","cleanUp","removeEventListener","cameraControlChanged","needsUpdate","getDelta","_animateCamera","mask","_renderLoopFunction","onBeforeRender","_statsHelper","updateRenderInfo","info","autoShadowsClear","autoSAOClear","_renderTarget","blit","clear","clearDepth","TWEEN","update","getTargetPosition","needsCamera","Scene","colors","DEFAULT_BACKGROUND","DEG2RAD","format","RGBAFormat","minFilter","NearestFilter","magFilter","floor","devicePixelRatio","WebGLRenderTarget","texture","encoding","setPixelRatio","gammaFactor","PCFSoftShadowMap","getMaxAnisotropy","classList","addEvents","_environmentLoader","setRendererAndScene","registerEnvironmentChangedCallback","sceneChanged","getPixelRatio","children","_isPartOfScene","renderLists","dispose","PIXOTRON","Pixotron","getPixotronParams","_pixotronUtil","setPixotron","getBakedShadowParams","setLoadedCallback","_staticItemLoader","loadGLTF","_setCamera","innerWidth","innerHeight","updateAndReset","disableDebugGUI","innerText","head","_guiLoaded","error","_addGUIListener","__folders","Object","keys","__controllers","onFinishChange","_guiParamChanged","default","removeEvents","_onWindowResize","_onKeyDown","_onKeyUp","environment","load","lights","loadFromObject","loadFromURL","json","loadFromJSON","object","ls","getBounds","updateEnvironment","needsBounds","updateBounds","Sphere","getBoundingSphere","offset","stringify","createCamera"],"mappings":"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","file":"js/chunk-5b403032-legacy.ce96c162.js","sourcesContent":["import\"./query-params-helper-a271f9dc.js\";import{l as DependencyInjectionAssignment,L as Logger,m as RapiAccess,f as getGUI,_ as __decorate,i as inject,e as DynamicLightSettingLoader,P as PREDEFINED_LIGHTSETTING,d as dispose,G as GLTF_LOADER_FILE_NAME,a3 as DRACO_LOADER_FILE_NAME,q as RoomleDependencyInjection}from\"./rapi-access-413632b4.js\";import{j as getGlbUrl}from\"./main-thread-to-worker-8efc9a92.js\";import{I as InputManager,S as ScriptLoader,f as DomHelper,C as CameraControl3D,L as LightSetting,a as CANVAS_ID,B as BakedShadowEnvironment,T as TWEEN_FILE_NAME,g as PIXOTRON_EFFETCS,i as PIXOTRON_FILE_NAME,M as Main}from\"./pixotron-2f79bd46.js\";import{D as DefaultLightSetting}from\"./default-light-setting-3329a5c3.js\";import{S as SceneManager}from\"./scene-manager-87a03313.js\";const INJECTABLES=[new DependencyInjectionAssignment(\"script-loader\",ScriptLoader),new DependencyInjectionAssignment(\"dom-helper\",DomHelper,1),new DependencyInjectionAssignment(\"glb-input-manager\",class extends InputManager{},1),new DependencyInjectionAssignment(\"logger\",Logger),new DependencyInjectionAssignment(\"rapi-access\",RapiAccess)];class AdjustableCameraControl3D extends CameraControl3D{constructor(){super(...arguments),this.shouldIgnoreStandardBehavior=!1}adjust(e,t,n,i,r){let s=new THREE.Vector3(-e.x/2,0,-e.z/2),a=new THREE.Vector3(e.x/2,e.y,e.z/2);this._boundingBox=new THREE.Box3(s,a);let o=new THREE.Euler(-Math.PI/2+i,n,0,\"ZYX\"),c=(new THREE.Quaternion).setFromEuler(o);this._camera.updateProjectionMatrix(),this._camera.quaternion.copy(c),this._camera.position.copy(t)}_update(e){this.shouldIgnoreStandardBehavior?this._saveYawAndPitch():super._update(e)}animateCamera(e){return!!this.shouldIgnoreStandardBehavior||super.animateCamera(e)}}class GLBViewerLightSetting extends LightSetting{constructor(e,t){super(e,t),this._params={ambientLight:{color:\"#ffffff\"}},this._ambientLight=new THREE.AmbientLight(new THREE.Color(this._params.ambientLight.color),.5),this.addToScene()}addToScene(){this._scene.add(this._ambientLight)}removeFromScene(){this._scene.remove(this._ambientLight)}reload(){this.removeFromScene(),this.addToScene()}showGUI(){let e=getGUI();if(e&&this._ambientLight){let t=e.addFolder(\"Ambient Light\");t.add(this._ambientLight,\"visible\"),t.add(this._ambientLight,\"intensity\").min(0).max(5).step(.1),t.addColor(this._params.ambientLight,\"color\").onChange(e=>{this._ambientLight.color=new THREE.Color(e)})}}}let GLBViewerSceneManager=(()=>{class e extends SceneManager{constructor(e,t){super(e,t,CANVAS_ID.GLB,\"3D\"),this._itemsCount=0,this._standardSceneBackgroundColor=this._scene.background,this._renderer.capabilities.maxTextures>8?this.loadDynamicLightSetting(DynamicLightSettingLoader.createDynamicLightSettingSource(null,PREDEFINED_LIGHTSETTING.CAMERA)):(console.warn(\"this device has a maximum of 8 texture units thus we are using a simpler light setting\"),this._lightSetting=new GLBViewerLightSetting(this._scene)),this._setEnvironment(new BakedShadowEnvironment(this._scene,this._environment))}createCameraControl(e){this._cameraControl=new AdjustableCameraControl3D(this._creator_,this._getInputManager(),new THREE.Vector3(-1,1,1))}_getInputManager(){return this._glbInputManager}async loadStaticItem(e,t){const n=await this._rapiAccess.getItem(e);return n.configuration?Promise.reject():this.loadGLB(getGlbUrl(n),!0,void 0,t)}loadGLB(e,t=!0,n=new THREE.Vector3(1,1,1),i){return this.clearScene(),new Promise((r,s)=>{this._loadGLB(e,new THREE.Vector3(0,0,0),0,void 0,n,void 0,void 0,i).then(e=>{this._currentGLB=e,this._scene.add(this._currentGLB);let{x:n,y:i}=this._domHelper.getClientDimensions(),s=(new THREE.Box3).setFromObject(this._currentGLB),a=s.getSize(new THREE.Vector3);if(t){let e=s.getCenter(new THREE.Vector3);this._cameraControl instanceof AdjustableCameraControl3D&&(this._cameraControl.updateToBounds(s,n,i,!1,!0,e),this._cameraControl.reset(a,n,i,e,-15,0))}this._updateBounds(s),r()},s)})}preparePerspectiveImage(e,t,n){return new Promise(i=>{t||(t=1e3),n||(n=1e3),e||((e=new THREE.WebGLRenderer({antialias:!0})).setSize(t,n),e.outputEncoding=THREE.sRGBEncoding,e.autoClear=!1,e.shadowMap.enabled=!0,e.shadowMap.type=THREE.BasicShadowMap);let r=this._cameraControl.getCamera().clone();r instanceof THREE.PerspectiveCamera&&(r.aspect=t/n,r.updateProjectionMatrix()),this._lightSetting.removeFromScene();let s=new DefaultLightSetting(this._scene);e.render(this._scene,r);let a=e.domElement.toDataURL();e.domElement.toBlob(e=>{i({image:a,width:t,height:n,blob:e})},\"image/png\"),s.removeFromScene(),this._lightSetting.addToScene()})}adjustCamera(e,t,n,i){if(this._cameraControl instanceof AdjustableCameraControl3D){let r=(new THREE.Box3).setFromObject(this._scene).getSize(new THREE.Vector3);this._cameraControl.adjust(r,e,t,n,i),this._requestRender()}}onStart(e){this._itemsCount=e,this._scene.background=null,this._cameraControl instanceof AdjustableCameraControl3D&&(this._cameraControl.shouldIgnoreStandardBehavior=!0)}onElementFinished(e){this._itemsCount,Math.round(100/this._itemsCount*e)}onFinished(e){this._scene.background=this._standardSceneBackgroundColor,this._cameraControl instanceof AdjustableCameraControl3D&&(this._cameraControl.shouldIgnoreStandardBehavior=!1)}clearScene(){this._currentGLB&&(this._scene.remove(this._currentGLB),dispose(this._currentGLB),this._currentGLB=null),super.clearScene()}enableHD(){super.enableHD(),this._pixotron.enableAA=!1,this._pixotron.getSAOPass().enabled=!0}sceneChanged(){}getPixotronParams(){return{saoparams:{intensity:.25,occlusionWorldRadius:.4,smoothTransition:!0,samplesPerFrame:4,bias:.016,numSamples:200,accumulative:!1,falloff:1.5},shadowparams:{shadowMapResolution:1024,shadowRadius:3,shadowQuality:1,smoothTransition:!0,enableAccumulation:!0,shadowBiasMultiplier:.6,nearPlane:.01,farPlane:50,fov:110,side:THREE.FrontSide,numSamples:100}}}getBakedShadowParams(){return{enable:!0,shadowMapResolution:512,smoothTransition:!0,numSamples:500,numSamplesPerFrame:4,bShadowMaterial:!0,falloff:1.5,darkness:.2,size:1.6,lightDirection:new THREE.Vector3(0,1,.5),lightSolidAngle:40}}getBounds(){return this._currentGLB?(new THREE.Box3).setFromObject(this._currentGLB):null}}return __decorate([inject],e.prototype,\"_glbInputManager\",void 0),__decorate([inject],e.prototype,\"_rapiAccess\",void 0),e})();class GLBRenderWorker{constructor(e,t,n){this._prefix=\"https://furniture.roomle.com/3d/glb/\",this._listeners=new Set,this._finishedItems=0,this._sceneManager=e,this._renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this._width=t,this._height=n,this._renderer.setSize(t,n),this._renderer.setClearColor(16777215,0),this._renderer.outputEncoding=THREE.sRGBEncoding}addListener(e){this._listeners.add(e)}removeListener(e){this._listeners.delete(e)}start(e){return this._entries=[],e.forEach(e=>{this._entries.push(this._transform(e))}),this._finishedItems=0,this._listeners.forEach(e=>e.onStart(this._entries.length)),this._zip=new window.JSZip,this._doNextEntry(),new Promise(e=>{this._resolve=e})}_transform(e){return{name:e.path.replace(\".glb\",\".png\"),url:this._prefix+e.path,position:new THREE.Vector3(e.camera.position.x,e.camera.position.z,-e.camera.position.y),fov:2*e.camera.fieldOfView,yaw:e.camera.rotation.z,pitch:e.camera.rotation.x}}_doNextEntry(){0===this._entries.length?(this._listeners.forEach(e=>e.onFinished(this._zip)),this._resolve(this._zip)):this._processEntry(this._entries[0])}_processEntry(e){this._sceneManager.loadGLB(e.url,!1,void 0).then(()=>{this._sceneManager.adjustCamera(e.position,e.yaw,e.pitch,e.fov),this._sceneManager.preparePerspectiveImage(this._renderer,this._width,this._height).then(t=>{this._entryFinished(e,t)})})}_entryFinished(e,t){let n=this._entries.indexOf(e);n>-1&&this._entries.splice(n,1),this._finishedItems++,this._listeners.forEach(e=>e.onElementFinished(this._finishedItems)),this._zip.file(e.name,t.blob),this._doNextEntry()}}let RoomleGLBViewer=(()=>{class e{constructor(e){this._currentIdOrUrl=null,this._creator_=e}setCameraOffset(e){this._sceneManager.setCameraOffset(e)}getCameraOffset(){return this._sceneManager.getCameraOffset()}init(e,t){return this.setOverrides(t),this._domHelper.setDomElement(e),this._sceneManager?(this._lifeCycleManager.resume(),Promise.resolve()):new Promise(this._initPromiseCallback.bind(this))}_initPromiseCallback(e,t){this._threeLoader.fetch().then(()=>{let t=this._scriptLoader.fetch(GLTF_LOADER_FILE_NAME,{id:\"gltf-loader\"}),n=this._scriptLoader.fetch(DRACO_LOADER_FILE_NAME,{id:\"draco-loader\"}),i=this._scriptLoader.fetch(TWEEN_FILE_NAME,{id:\"tween-js\"});Promise.all([t,n,i]).then(()=>{this._sceneManager=new GLBViewerSceneManager(this._creator_,{left:0,top:1,right:1,bottom:0}),this.enableHD(),e()})})}enableHD(){return new Promise((e,t)=>{const n=()=>{this._sceneManager.enableHD(),e()};Promise.all(PIXOTRON_EFFETCS.map(e=>this._scriptLoader.fetch(e,{id:e}))).then(()=>{this._scriptLoader.fetch(PIXOTRON_FILE_NAME,{id:\"pi-js\"}).then(n,t)},t)})}clearScene(){this._sceneManager.clearScene()}loadGLB(e,t=1,n){return this._currentIdOrUrl=e,this._rapiAccess.trackView(e),this._sceneManager.loadGLB(e,!0,new THREE.Vector3(t,t,t),n)}loadStaticItem(e,t){return this._currentIdOrUrl=e,this._rapiAccess.trackView(e),this._sceneManager.loadStaticItem(e,t)}getCurrentId(){return this._currentIdOrUrl}loadSceneSetting(e){return this._sceneManager.loadSceneSettings(e)}loadQualitySetting(e){this._sceneManager.loadQualitySetting(e)}preparePerspectiveImage(){return this._sceneManager.preparePerspectiveImage()}processRenderList(e,t=320,n=320){let i=JSON.parse(e);this._scriptLoader.fetch(\"static/jszip.min-dd6c9829408677a1.js\",{id:\"jszip-js\"}).then(()=>{let e=new GLBRenderWorker(this._sceneManager,t,n);e.addListener(this._sceneManager),e.start(i.items).then(t=>{t.generateAsync({type:\"blob\"}).then(t=>{let n=document.createElement(\"a\");n.href=URL.createObjectURL(t),n.download=\"content.zip\",n.style.display=\"none\",document.body.appendChild(n),n.click(),document.body.removeChild(n),e.removeListener(this._sceneManager)})})})}setOverrides(e){e&&(this._initData.setOverrides(e),this._globalInitData.setOverrides(e))}updateSize(){this._sceneManager.updateCamera()}getMain(){}resumeTest(e){this._domHelper.setDomElement(e),this._lifeCycleManager.resume()}pauseTest(){this._lifeCycleManager.pause()}showGUI(){this._sceneManager.showGUI()}get callbacks(){return{}}getScene(){return this._sceneManager.getScene()}updateScene(){this._sceneManager.updateScene()}}return __decorate([inject],e.prototype,\"_rapiAccess\",void 0),__decorate([inject],e.prototype,\"_domHelper\",void 0),__decorate([inject],e.prototype,\"_scriptLoader\",void 0),__decorate([inject],e.prototype,\"_lifeCycleManager\",void 0),__decorate([inject],e.prototype,\"_threeLoader\",void 0),__decorate([inject],e.prototype,\"_initData\",void 0),__decorate([inject],e.prototype,\"_globalInitData\",void 0),e})();class GlbViewer extends Main{setupGlobals(){}setupDependencies(){RoomleDependencyInjection.setup(INJECTABLES),this.lookup(\"logger\",this._context)}cleanUpGlobals(){throw new Error(\"Method not implemented.\")}cleanUpDependencies(){throw new Error(\"Method not implemented.\")}bootFinished(){this._viewer=new RoomleGLBViewer(this._context),window.RoomleGLBViewer||(window.RoomleGLBViewer=this._viewer)}getApi(){return this._viewer}getContextName(){return\"glb-viewer\"}}export{GlbViewer};\n//# sourceMappingURL=glb-viewer-7900c0c4.js.map\n","import{f as getGUI}from\"./rapi-access-413632b4.js\";import{L as LightSetting}from\"./pixotron-2f79bd46.js\";class DefaultLightSetting extends LightSetting{constructor(i,t){super(i,t),this._params={ambientLight:{color:\"#ffffff\"},mainDirLight:{position:{x:-3,y:4,z:4},color:\"#ffffff\"},secondDirLight:{position:{x:3,y:4,z:3},color:\"#ffffff\"}},this._mainDirectionalLight=new THREE.DirectionalLight(new THREE.Color(this._params.mainDirLight.color),.8),this._mainDirectionalLight.position.set(this._params.mainDirLight.position.x,this._params.mainDirLight.position.y,this._params.mainDirLight.position.z),this._mainDirectionalLight.layers.set(1),this._mainDirectionalLight.castShadow=!0,this._mainDirectionalLight.shadow.camera.near=.1,this._mainDirectionalLight.shadow.camera.far=100,this._mainDirectionalLight.shadow.mapSize=new THREE.Vector2(1024,1024),this._mainDirectionalLight.visible=!0,this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0)),this._secondDirectionalLight=new THREE.DirectionalLight(new THREE.Color(this._params.secondDirLight.color),.2),this._secondDirectionalLight.position.set(this._params.secondDirLight.position.x,this._params.secondDirLight.position.y,this._params.secondDirLight.position.z),this._secondDirectionalLight.layers.set(1),this._secondDirectionalLight.castShadow=!1,this._secondDirectionalLight.shadow.camera.near=.1,this._secondDirectionalLight.shadow.camera.far=100,this._secondDirectionalLight.shadow.mapSize=new THREE.Vector2(1024,1024),this._secondDirectionalLight.visible=!0,this._secondDirectionalLight.lookAt(new THREE.Vector3(0,0,0)),this._ambientLight=new THREE.AmbientLight(new THREE.Color(this._params.ambientLight.color),.5),this._ambientLight.layers.set(1),this.addToScene()}needsBounds(){return!0}updateBounds(i){const t=i.getSize(new THREE.Vector3),a=Math.max(Math.max(t.x,t.y),t.z)+1,o=a/2;this._mainDirectionalLight.shadow.camera.top=o,this._mainDirectionalLight.shadow.camera.bottom=-o,this._mainDirectionalLight.shadow.camera.left=-o,this._mainDirectionalLight.shadow.camera.right=o,this._mainDirectionalLight.shadow.camera.near=.01,this._mainDirectionalLight.shadow.camera.far=4*a,this._mainDirectionalLight.shadow.camera.updateProjectionMatrix(),this._secondDirectionalLight.shadow.camera.top=o,this._secondDirectionalLight.shadow.camera.bottom=-o,this._secondDirectionalLight.shadow.camera.left=-o,this._secondDirectionalLight.shadow.camera.right=o,this._secondDirectionalLight.shadow.camera.near=.01,this._secondDirectionalLight.shadow.camera.far=4*a,this._secondDirectionalLight.shadow.camera.updateProjectionMatrix()}addToScene(){this._scene.add(this._mainDirectionalLight),this._scene.add(this._secondDirectionalLight),this._scene.add(this._ambientLight)}removeFromScene(){this._scene.remove(this._mainDirectionalLight),this._scene.remove(this._secondDirectionalLight),this._scene.remove(this._ambientLight)}reload(){this.removeFromScene(),this.addToScene()}showGUI(){let i=getGUI();if(i){if(this._ambientLight){let t=i.addFolder(\"Ambient Light\");t.add(this._ambientLight,\"visible\"),t.add(this._ambientLight,\"intensity\").min(0).max(5).step(.1),t.addColor(this._params.ambientLight,\"color\").onChange(i=>this._ambientLight.color=new THREE.Color(i))}if(this._mainDirectionalLight){let t=i.addFolder(\"Main Directional Light\");t.add(this._mainDirectionalLight,\"visible\"),t.add(this._mainDirectionalLight,\"intensity\").min(0).max(10).step(.1),t.add(this._mainDirectionalLight,\"castShadow\"),t.addColor(this._params.mainDirLight,\"color\").onChange(i=>this._mainDirectionalLight.color=new THREE.Color(i)),t.add(this._mainDirectionalLight.position,\"x\").min(-10).max(10).step(.1).onChange(()=>this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0))),t.add(this._mainDirectionalLight.position,\"y\").min(-10).max(50).step(.1).onChange(()=>this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0))),t.add(this._mainDirectionalLight.position,\"z\").min(-10).max(10).step(.1).onChange(()=>this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0)))}if(this._secondDirectionalLight){let t=i.addFolder(\"Second Directional Light\");t.add(this._secondDirectionalLight,\"visible\"),t.add(this._secondDirectionalLight,\"intensity\").min(0).max(10).step(.1),t.add(this._secondDirectionalLight,\"castShadow\"),t.addColor(this._params.mainDirLight,\"color\").onChange(i=>this._mainDirectionalLight.color=new THREE.Color(i)),t.add(this._secondDirectionalLight.position,\"x\").min(-10).max(10).step(.1).onChange(()=>this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0))),t.add(this._secondDirectionalLight.position,\"y\").min(-10).max(50).step(.1).onChange(()=>this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0))),t.add(this._secondDirectionalLight.position,\"z\").min(-10).max(10).step(.1).onChange(()=>this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0)))}}}}export{DefaultLightSetting as D};\n//# sourceMappingURL=default-light-setting-3329a5c3.js.map\n","import{t as toRadiant,r as position3VectorsAreEqual,a5 as rotationQuaternionsAreEqual,a6 as getDelta,s as position2VectorsAreEqual,_ as __decorate,i as inject,d as dispose,f as getGUI,e as DynamicLightSettingLoader,R as RoomleComponentFactoryInitializer,a7 as DynamicQualitySettingLoader}from\"./rapi-access-413632b4.js\";import{e as CameraControl,k as MIN_MOVE_DISTANCE,D as DynamicLightSetting,C as CameraControl3D,c as PixotronUtil,B as BakedShadowEnvironment,h as DAT_GUI_FILE_NAME,d as DynamicEnvironmentSettingLoader}from\"./pixotron-2f79bd46.js\";class CameraControl2D extends CameraControl{constructor(t,e,i){super(t,e,i),this._scale=1,this._state=0,this._size=20,this._center=new THREE.Vector3,this._raycaster=new THREE.Raycaster,this._lastPosition=new THREE.Vector2,this._zoomPosition=new THREE.Vector3,this._lastZoom=0,this._zoomSpeed=Math.pow(.95,2),this._cameraZoom=1,this._initCamera(i||new THREE.Vector3(0,10,0));let s=new THREE.PlaneGeometry(1e3,1e3);s.rotateX(-Math.PI/2),this._plane=new THREE.Mesh(s,new THREE.MeshStandardMaterial)}_getCamera(){return this._camera||this._initCamera(new THREE.Vector3(0,10,0)),this._camera}_initCamera(t){let{x:e,y:i}=this._domHelper.getClientDimensions(),s=e/i*this._size,n=this._size;this._camera=new THREE.OrthographicCamera(s/-2,s/2,n/2,n/-2,1,1e3),this._camera.position.copy(t),this._cameraPosition=t,this._camera.lookAt(new THREE.Vector3(0,0,0))}updateCamera(){let{x:t,y:e}=this._domHelper.getClientDimensions(),i=t/e*this._size,s=this._size;this._camera.left=i/-2,this._camera.right=i/2,this._camera.top=s/2,this._camera.bottom=s/-2,this._camera.updateProjectionMatrix()}_initInputListener(){this._inputListeners.push({key:3,fun:t=>{this._locked||(this._state=1,this._lastPosition.set(t.position.x,t.position.y),this.dispatchEvent(0))}}),this._inputListeners.push({key:6,fun:t=>{1!==this._state||this._locked||(this._move(new THREE.Vector2(t.position.x,t.position.y),t.type),this.dispatchEvent(1))}}),this._inputListeners.push({key:4,fun:t=>{1===this._state&&this.dispatchEvent(2),this._state=0}}),this._inputListeners.push({key:7,fun:t=>{t.event&&(t.event.stopPropagation(),t.event.preventDefault()),this._scale/=this._zoomSpeed,this._zoomTo(t.position,1),this._update()}}),this._inputListeners.push({key:8,fun:t=>{t.event&&(t.event.stopPropagation(),t.event.preventDefault()),this._scale*=this._zoomSpeed,this._zoomTo(t.position,-1),this._update()}})}_zoomTo(t,e){if(Date.now()-this._lastZoom>200){if(e>0||this._cameraZoom>=1){const e=this.getInputPosition(t);this._raycaster.setFromCamera(e,this._camera);const i=this._raycaster.intersectObject(this._plane);if(i.length<=0)return;const s=i.pop().point;this._zoomPosition.copy(s)}else this._zoomPosition.copy(this._center);this._cameraPosition.x=this._zoomPosition.x,this._cameraPosition.z=this._zoomPosition.z}this._lastZoom=Date.now()}_move(t,e){let i=new THREE.Vector2;i.subVectors(this._lastPosition,t),i.divideScalar(100),this._cameraPosition.x+=i.x*(2===e?1.1:1),this._cameraPosition.z+=i.y*(2===e?1.1:1),this._lastPosition.copy(t)}updateToBounds(t,e){let{x:i,y:s}=this._domHelper.getClientDimensions(),n=i/s;this._size=Math.max(t.x,t.z);let a=this._size,r=this._size;n>1?a=this._size*n:r=this._size*(s/i),this._center.copy(e),this._camera.left=a/-2,this._camera.right=a/2,this._camera.top=r/2,this._camera.bottom=r/-2,this._camera.zoom=1,this._camera.position.set(this._center.x,10,this._center.z),this._cameraPosition.copy(this._camera.position)}_update(t){this._scale=Math.min(this._scale,5),this._scale=Math.max(this._scale,.8),this._cameraZoom=this._scale,this._camera.updateProjectionMatrix()}animateCamera(t){return!(!super.animateCamera(t)&&Math.abs(this._cameraZoom-this._camera.zoom)<=.01||(this._camera.zoom=THREE.MathUtils.lerp(this._camera.zoom,this._cameraZoom,10*t),0))}}const KEYBOARD_ROTATION_ANGLE=Math.PI/4;class CameraControlFirstPerson extends CameraControl{constructor(t,e,i,s){super(t,e,i),this._state=0,this._rotationSpeed=1,this._keyMap=new Map,this.minPolarAngle=toRadiant(-60),this.maxPolarAngle=toRadiant(60),this._camera=s||new THREE.PerspectiveCamera,this._camera.fov=70,this._camera.aspect=this._width/this._height,this._camera.near=.1,this._camera.far=100,this._camera.updateProjectionMatrix(),this._camera.layers.set(3),this._camera.layers.enable(1),this._camera.layers.enable(2),this._camera.layers.enable(5),this._camera.layers.enable(4),i?this._camera.position.set(i.x,1.5,i.z):this._camera.position.set(0,1.5,0),this._cameraPosition=new THREE.Vector3,this._cameraPosition.copy(this._camera.position),this._cameraRotation=new THREE.Quaternion,this._pitch=0,this._yaw=0;let n=new THREE.Euler(-this._pitch,this._yaw,0,\"ZYX\");this._cameraRotation.setFromEuler(n),window.addEventListener(\"gamepadconnected\",this._gamepadConnected.bind(this)),window.addEventListener(\"gamepaddisconnected\",this._gamepadDisconnected.bind(this))}_gamepadConnected(t){this.startButtonPressListener()}_gamepadDisconnected(t){window.cancelAnimationFrame(this._listenerLoopAnimationFrame)}startButtonPressListener(){this._listenerLoopAnimationFrame=window.requestAnimationFrame(()=>{this.buttonPressListener()})}buttonPressListener(){let t=navigator.getGamepads()[0];this._checkRightStick(t),this._checkLeftStick(t),this._checkButtons(t),this._processKeyMap(this._keyMap,.001),this.startButtonPressListener()}_checkRightStick(t){let e=t.axes[2],i=t.axes[3];Math.abs(e)>.2&&(this._rotateHorizontal(.01*KEYBOARD_ROTATION_ANGLE*e),this._update(),this.dispatchEvent(1)),Math.abs(i)>.2&&(this._rotateVertical(.01*KEYBOARD_ROTATION_ANGLE*i),this._update(),this.dispatchEvent(1))}_checkLeftStick(t){let e=t.axes[0],i=t.axes[1];Math.abs(i)>.2?i<0?this._keyMap.set(87,!0):this._keyMap.set(83,!0):t.buttons&&t.buttons[12]&&t.buttons[12].pressed?this._keyMap.set(87,!0):t.buttons&&t.buttons[13]&&t.buttons[13].pressed?this._keyMap.set(83,!0):(this._keyMap.set(87,!1),this._keyMap.set(83,!1)),Math.abs(e)>.2?e<0?this._keyMap.set(65,!0):this._keyMap.set(68,!0):(this._keyMap.set(65,!1),this._keyMap.set(68,!1))}_checkButtons(t){t.buttons&&t.buttons[6]&&t.buttons[6].pressed?this._keyMap.set(16,!0):this._keyMap.set(16,!1),t.buttons&&t.buttons[14]&&t.buttons[14].pressed?(this._keyMap.set(37,!0),this.dispatchEvent(1)):this._keyMap.set(37,!1),t.buttons&&t.buttons[15]&&t.buttons[15].pressed?(this._keyMap.set(39,!0),this.dispatchEvent(1)):this._keyMap.set(39,!1)}animateCamera(t){let e=this._cameraPosition,i=this._cameraRotation,s=this.getCamera(),n=position3VectorsAreEqual(e,s.position),a=rotationQuaternionsAreEqual(i,s.quaternion);if(!e||n&&a)return!1;let r=this.getCamera().position.clone(),o=Math.min(10*t,1);r.lerp(e,o),this.getCamera().position.copy(r);let h=this.getCamera().quaternion.clone(),_=Math.min(5*t,1);h.slerp(i,_),this.getCamera().setRotationFromQuaternion(h);let d=!1;return this._keyMap.forEach(t=>{t&&(d=!0)}),d&&this._processKeyMap(this._keyMap,t),!0}_getCamera(){return this._camera}_initInputListener(){window.addEventListener(\"keyup\",this._onKeyChanged.bind(this),!1),window.addEventListener(\"keydown\",this._onKeyChanged.bind(this),!1),this._inputListeners.push({key:3,fun:t=>{this._down(t)}}),this._inputListeners.push({key:6,fun:t=>{this._move(t)}}),this._inputListeners.push({key:4,fun:t=>{this._up(t)}})}_down(t){this._downPosition=t.position,this._position=t.position,this._state=1,2===t.type&&window.setTimeout(this._onLongDown.bind(this),350),2===t.type?this._rotationSpeed=.6:this._rotationSpeed=1}_move(t){this._position=t.position,1!==this._state||this._locked||this._orbit(new THREE.Vector2(t.position.x,t.position.y)),2!==this._state||this._locked||(this._orbit(new THREE.Vector2(t.position.x,t.position.y)),this._moveForward())}_up(t){1===this._state&&this.dispatchEvent(2),2===this._state&&this._keyMap.set(87,!1),this._state=0,this._orbitPosition=null}_onLongDown(){getDelta(this._downPosition,this._position)<MIN_MOVE_DISTANCE&&1===this._state&&(this._state=2,this._orbit(new THREE.Vector2(this._position.x,this._position.y)),this._moveForward())}_update(t){let e=new THREE.Euler(-this._pitch,this._yaw,0,\"ZYX\");this._cameraRotation.setFromEuler(e)}updateCamera(){let{x:t,y:e}=this._domHelper.getClientDimensions();this._camera.aspect=t/e,this._camera.updateProjectionMatrix()}_onKeyChanged(t){this._keyMap.set(t.keyCode,\"keydown\"===t.type),this.dispatchEvent(6),this._processKeyMap(this._keyMap,.001)&&t.preventDefault()}_processKeyMap(t,e){e=Math.min(e,.1);let i=new THREE.Vector3(0,0,0),s=!1;return this._processUpDown(t,i,e),t.get(65)&&(i.x=-1*e),t.get(68)&&(i.x=1*e),t.get(37)&&(this._rotateHorizontal(-KEYBOARD_ROTATION_ANGLE*this._rotationSpeed*e),s=!0),t.get(39)&&(this._rotateHorizontal(KEYBOARD_ROTATION_ANGLE*this._rotationSpeed*e),s=!0),t.get(16)&&(i.x*=3,i.z*=3),!(0===i.x&&0===i.y&&0===i.z&&!s||(i.applyQuaternion(this.getCamera().quaternion),this._cameraPosition.add(new THREE.Vector3(i.x,0,i.z)),this._update(),0))}_processUpDown(t,e,i){(t.get(87)||t.get(38))&&(e.z=-1*i),(t.get(83)||t.get(40))&&(e.z=1*i)}_orbit(t){this._orbitPosition||(this._orbitPosition=new THREE.Vector2(t.x,t.y),this.dispatchEvent(0));let e=t.clone().sub(this._orbitPosition),i=this._domHelper.element instanceof Document?this._domHelper.element.body:this._domHelper.element;e.multiplyScalar(-1),this._rotateHorizontal(2*Math.PI*e.x/i.clientWidth*1),this._rotateVertical(2*Math.PI*e.y/i.clientHeight*1),position2VectorsAreEqual(this._orbitPosition,t)||this.dispatchEvent(1),this._orbitPosition.copy(t),this._update()}_moveForward(){this._keyMap.set(87,!0),this._processKeyMap(this._keyMap,.001)}_rotateVertical(t){let e=this._pitch+t;e>this.maxPolarAngle||e<this.minPolarAngle||(this._pitch=e,this._pitch<-Math.PI?this._pitch+=2*Math.PI:this._pitch>Math.PI&&(this._pitch-=2*Math.PI),this._saveYawAndPitch())}}let SceneManager=(()=>{class t{constructor(t,e,i,s,n){this._maxAnisotropy=1,this._clock=new THREE.Clock,this._delta=0,this._renderListener=null,this._stopRendering=!1,this._forceRender=!1,this._lastChange=Date.now(),this._running=!1,this._onAfterRender=()=>{},this._creator_=t,this._canvasID=i,this.createCameraControl(s),this._addCameraControlListener(),this._setupScene(e,n),document.addEventListener(\"visibilitychange\",this._tabVisible.bind(this)),this._renderListener=()=>{this._requestRender(!0)},this._getInputManager().addEventListener(7,this._renderListener,this),this._getInputManager().addEventListener(8,this._renderListener,this),this._lifeCycleManager.addEventListener(this)}onBeforeRender(){}_changeCameraControl(t){this._cameraControl&&this._cameraControl.cleanUp(),t instanceof CameraControlFirstPerson&&(this._getInputManager().removeEventListener(7,this._renderListener),this._getInputManager().removeEventListener(8,this._renderListener)),this._cameraControl instanceof CameraControlFirstPerson&&(this._getInputManager().addEventListener(7,this._renderListener,this),this._getInputManager().addEventListener(8,this._renderListener,this)),this._cameraControl=t,this.cameraControlChanged()}cameraControlChanged(){}_addCameraControlListener(){this._cameraControl.addEventListener(0,this._requestRender,this),this._cameraControl.addEventListener(1,this._requestRender,this),this._cameraControl.addEventListener(2,this._requestRender,this),this._cameraControl.addEventListener(6,this._requestRender,this)}_requestRender(t){if(!this._renderer)return;this._pixotron&&(this._pixotron.needsUpdate=!0,t&&(this._forceRender=!0));const e=()=>{this._delta=this._clock.getDelta(),this._animateCamera(),this._cameraControl.getCamera().layers.mask=65535,this._renderLoopFunction&&(this._renderLoopFunction(),this._renderLoopFunction=null),this.onBeforeRender(),this._statsHelper&&this._statsHelper.updateRenderInfo(this._renderer.info),this._pixotron?(this._forceRender&&(this._pixotron.autoShadowsClear=!0,this._pixotron.autoSAOClear=!0),this._pixotron.render(this._renderer,this._scene,this._cameraControl.getCamera(),this._renderTarget),this._forceRender=!1,this._pixotron.blit()):(this._renderer.clear(),this._renderer.render(this._scene,this._cameraControl.getCamera()),this._renderer.clearDepth()),this._onAfterRender(),window.TWEEN&&TWEEN.update(),this._lastChange+3e3<Date.now()||this._stopRendering?this._running=!1:(this._running=!0,requestAnimationFrame(e))};this._lastChange=Date.now(),this._running||this._stopRendering||(this._running=!0,requestAnimationFrame(e))}_animateCamera(){this._cameraControl&&(this._cameraControl.animateCamera(this._delta)||!this._pixotron||this._forceRender?(this._lightSetting instanceof DynamicLightSetting&&this._cameraControl.getCamera()instanceof THREE.PerspectiveCamera&&this._lightSetting.update(this._cameraControl.getCamera(),this._cameraControl.getTargetPosition()),this._pixotron&&(this._pixotron.needsUpdate=!0)):(this._pixotron.autoShadowsClear=!1,this._pixotron.autoSAOClear=!1)),this._environment&&this._environment.needsCamera()&&this._cameraControl instanceof CameraControl3D&&this._environment.updateCamera(this._cameraControl.getCamera())}_setupScene(t,e){const{x:i,y:s}=this._domHelper.getClientDimensions();this._scene=new THREE.Scene,(e=e||!1)||(this._scene.background=new THREE.Color(this._initData.colors.DEFAULT_BACKGROUND)),THREE.Math={DEG2RAD:THREE.MathUtils.DEG2RAD};const n={format:THREE.RGBAFormat,minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter},a=THREE.sRGBEncoding,r=Math.floor(i*window.devicePixelRatio),o=Math.floor(s*window.devicePixelRatio);this._renderTarget=new THREE.WebGLRenderTarget(r,o,n),this._renderTarget.texture.encoding=a,this._renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(i,s),this._renderer.outputEncoding=THREE.sRGBEncoding,this._renderer.gammaFactor=2.2,this._renderer.autoClear=!1,this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=THREE.PCFSoftShadowMap,this._maxAnisotropy=this._renderer.capabilities.getMaxAnisotropy(),this._renderer.domElement.classList.add(this._canvasID),this._domHelper.element.appendChild(this._renderer.domElement),this._getInputManager().addEvents(this._renderer.domElement),this._environmentLoader.setRendererAndScene(this._renderer,this._scene),this._environmentLoader.registerEnvironmentChangedCallback(()=>this._requestRender(!0)),this._requestRender(),window.addEventListener(\"resize\",this,!1),window.addEventListener(\"keydown\",this,!1),window.addEventListener(\"keyup\",this,!1),this.sceneChanged()}_tabVisible(t){this.updateCamera(),this._requestRender(!0)}setupScene(t,e){this._setupScene(t,e)}updateCamera(){const{x:t,y:e}=this._domHelper.getClientDimensions();this._renderer.setSize(t,e);const i=this._renderer.getPixelRatio();if(this._renderTarget){const s=Math.floor(t*i),n=Math.floor(e*i);this._renderTarget.setSize(s,n)}if(this._pixotron){this._pixotron.autoShadowsClear=!0,this._pixotron.autoSAOClear=!0,this._forceRender=!0;try{this._pixotron.setSize(t,e)}catch(t){console.warn(t)}}this._cameraControl.updateCamera(),this._requestRender(!0)}_onWindowResize(){this.updateCamera(),this._requestRender(!0)}_isPartOfScene(t){return\"Object3D\"===t.type||\"Mesh\"===t.type||\"GLB\"===t.type||\"GLTF\"===t.type||\"Group\"===t.type}cleanUp(){this._getInputManager().removeEventListener(7,this._renderListener),this._getInputManager().removeEventListener(8,this._renderListener),this._cameraControl&&this._cameraControl.cleanUp()}clearScene(){let t=[];this._scene.children.forEach(e=>{this._isPartOfScene(e)&&t.push(e)}),t.forEach(t=>{dispose(t),this._scene.remove(t)}),this._renderer.renderLists.dispose()}enableHD(){this._pixotron=new window.PIXOTRON.Pixotron(this.getPixotronParams()),this._pixotronUtil=new PixotronUtil(this._pixotron),this._environment instanceof BakedShadowEnvironment&&(this._environment.setPixotron(this._pixotron,this._renderer,this._cameraControl.getCamera(),this.getBakedShadowParams()),this._environment.setLoadedCallback(()=>setTimeout(()=>this._requestRender(!0),500))),this._requestRender()}_loadGLTF(t,e,i,s,n,a,r){return new Promise((o,h)=>{this._staticItemLoader.loadGLTF(t,e,i,s,n,a,null,r).then(t=>{this._setCamera(\"GLTF\",t),o(t)},h)})}_loadGLB(t,e,i,s,n,a,r,o){return new Promise((h,_)=>{this._staticItemLoader.loadGLB(t,e,i,s,n,a,r,o).then(t=>{this._setCamera(\"GLB\",t),h(t)},_)})}_setCamera(t,e){if(!e)return void console.warn(\"could not set camera for gltf\",e);const i=new THREE.Box3;if(i.setFromObject(e),\"GLB\"===t)this._cameraControl instanceof CameraControl3D&&this._cameraControl.updateToBounds(i,window.innerWidth,window.innerHeight,!1);else if(\"GLTF\"===t){if(this._cameraControl instanceof CameraControl3D){let{x:t,y:e}=this._domHelper.getClientDimensions();this._cameraControl.updateAndReset(i.getSize(new THREE.Vector3),t,e,i.getCenter(new THREE.Vector3),-15,70,5,!1)}this._cameraControl instanceof CameraControl2D&&this._cameraControl.updateToBounds(i.getSize(new THREE.Vector3),i.getCenter(new THREE.Vector3))}this.updateCamera()}showGUI(){if(this._initData.disableDebugGUI)return;const t=document.createElement(\"style\");t.innerText=\".dg.main{position:absolute;z-index:100;top:0;left:0;}\",document.head.appendChild(t),this._scriptLoader.fetch(DAT_GUI_FILE_NAME,{id:\"dat-gui-js\"}).then(()=>{let t=getGUI(!1);t&&(this._domHelper.element.appendChild(t.domElement),this._guiLoaded())},t=>console.error(t))}_guiLoaded(){let t=getGUI();t&&(this._lightSetting&&this._lightSetting.showGUI(),this._pixotron&&this._pixotronUtil.showGUI(),this._environment&&this._environment.showGUI(),this._addGUIListener(t))}_addGUIListener(t){let e=t.__folders;Object.keys(e).forEach(t=>{let i=e[t];i.__folders&&Object.keys(i.__folders).forEach(t=>{let i=e[t];this._addGUIListener(i)}),i.__controllers&&i.__controllers.forEach(t=>{t.onFinishChange(()=>{this._guiParamChanged()})})})}_guiParamChanged(){this._requestRender()}showStats(){import(\"./stats-helper-57e0340c.js\").then(t=>this._statsHelper=new t.default)}_onKeyDown(t){}_onKeyUp(t){}pause(){this._getInputManager().removeEvents(this._renderer.domElement),window.removeEventListener(\"resize\",this,!1),window.removeEventListener(\"keydown\",this,!1),window.removeEventListener(\"keyup\",this,!1)}resume(){this.updateCamera(),this._renderer.domElement.classList.add(this._canvasID),this._domHelper.element.appendChild(this._renderer.domElement),this._getInputManager().addEvents(this._renderer.domElement),window.addEventListener(\"resize\",this,!1),window.addEventListener(\"keydown\",this,!1),window.addEventListener(\"keyup\",this,!1),this._requestRender(!0)}destroy(){this.pause(),this.cleanUp()}handleEvent(t){switch(t.type){case\"resize\":this._onWindowResize();break;case\"keydown\":this._onKeyDown(t);break;case\"keyup\":this._onKeyUp(t)}}loadSceneSettings(t){let e,i;return e=t.environment?new Promise(e=>{(new DynamicEnvironmentSettingLoader).load(this._scene,this._renderer.domElement,this._environment,t).then(t=>{this._setEnvironment(t),e()})}):Promise.resolve(),t.lights?(this._lightSetting=new DynamicLightSetting(this._scene,this._lightSetting),i=this._lightSetting.loadFromObject(t)):i=Promise.resolve(),new Promise((t,s)=>{Promise.all([e,i]).then(()=>{this._requestRender(!0),t()},s)})}_setEnvironment(t){this._environment=t,this._pixotron&&this._environment instanceof BakedShadowEnvironment&&(this._environment.setPixotron(this._pixotron,this._renderer,this._cameraControl.getCamera(),this.getBakedShadowParams()),this._environment.setLoadedCallback(()=>setTimeout(()=>this._requestRender(!0),500)))}loadQualitySetting(t){this._pixotron&&(new DynamicQualitySettingLoader).set(this._pixotron,t)}async loadDynamicLightSetting(t){this._lightSetting=new DynamicLightSetting(this._scene,this._lightSetting);let e=!1;if(t.url)await this._lightSetting.loadFromURL(t.url),e=!0;else if(t.json)await this._lightSetting.loadFromJSON(t.json),e=!0;else if(t.object)await this._lightSetting.loadFromObject(t.object),e=!0;else if(t.ls){const i=DynamicLightSettingLoader.createDynamicLightSettingSource(null,t.ls);await this._lightSetting.loadFromURL(i.url),e=!0}if(!e)throw new Error(\"No dynamic light setting source set\");this._requestRender(!0)}getScene(){return this._scene}updateScene(){this._updateBounds(this.getBounds()),this._requestRender(!0)}_updateBounds(t){if(t){if(this.updateEnvironment(t),this._lightSetting&&this._lightSetting.needsBounds()&&this._lightSetting.updateBounds(t),this._pixotronUtil){const e=new THREE.Sphere;t.getBoundingSphere(e),this._pixotronUtil.updateBounds(e)}this._requestRender(!0)}}setCameraOffset(t){const e=this._cameraControl.getCamera();e.offset?(e.offset=t,this._requestRender(!0)):console.warn(\"Cannot set offset, current camera does not support it\")}getCameraOffset(){const t=this._cameraControl.getCamera();return t.offset?JSON.parse(JSON.stringify(t.offset)):{left:0,top:0,right:1,bottom:1}}getPerspectiveOffsetCamera(){const t=this._domHelper.getClientDimensions(),e=t.x,i=t.y;return RoomleComponentFactoryInitializer().createCamera(30,e/i,.1,20)}updateEnvironment(t,e=!1){t&&this._environment&&this._environment.needsBounds()&&this._environment.updateBounds(t.getSize(new THREE.Vector3),e)}}return __decorate([inject],t.prototype,\"_domHelper\",void 0),__decorate([inject],t.prototype,\"_scriptLoader\",void 0),__decorate([inject],t.prototype,\"_lifeCycleManager\",void 0),__decorate([inject],t.prototype,\"_staticItemLoader\",void 0),__decorate([inject],t.prototype,\"_environmentLoader\",void 0),__decorate([inject],t.prototype,\"_initData\",void 0),t})();export{CameraControl2D as C,SceneManager as S,CameraControlFirstPerson as a};\n//# sourceMappingURL=scene-manager-87a03313.js.map\n"],"sourceRoot":""}