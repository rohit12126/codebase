{"version":3,"sources":["webpack:///./node_modules/@roomle/web-sdk/lib/default-light-setting-3329a5c3.js","webpack:///./node_modules/@roomle/web-sdk/lib/image-renderer-d4f0305a.js","webpack:///./node_modules/@roomle/web-sdk/lib/ui-callback-908e86fb.js"],"names":["DefaultLightSetting","i","t","super","this","_params","ambientLight","color","mainDirLight","position","x","y","z","secondDirLight","_mainDirectionalLight","THREE","DirectionalLight","Color","set","layers","castShadow","shadow","camera","near","far","mapSize","Vector2","visible","lookAt","Vector3","_secondDirectionalLight","_ambientLight","AmbientLight","addToScene","getSize","a","Math","max","o","top","bottom","left","right","updateProjectionMatrix","_scene","add","remove","removeFromScene","addFolder","min","step","addColor","onChange","GLTF_EXPORTER_FILE_NAME","ROTATION_TO_DETECT_SIDE","RaycastHelper","e","r","n","_offset","_mode","_camera","_raycaster","Raycaster","enableAll","_inputManager","_addInputListeners","_planeBottom","Plane","_planeFront","_planeSide","addEventListener","_findCandidate","positionRelative","_findSelection","_findHover","type","_onDragStart","_onDrag","_onDragEnd","_onRotate","rotation","_currentRotate","_intersection","onElementHit","object","dispatchEvent","_currentHover","attachment","id","intersection","_intersect","length","_currentDrag","forEach","userData","priority","setFromCamera","intersectObjects","children","hasListener","push","sort","distance","roomleId","_rootComponentId","parent","computeBoundingBox","_calculateOffset","_positionPlanes","ray","intersectPlane","_getDistanceToCamera","yaw","_currentDragOffset","clone","sub","s","Number","POSITIVE_INFINITY","constant","pitch","boundingBox","_rootComponentPosition","getCenter","_bounds","copy","applyQuaternion","getWorldQuaternion","Quaternion","_backgroundScene","Mesh","geometry","TopImageLightSetting","imageRenderer","getImageRenderer","WebGLRenderer","antialias","alpha","outputEncoding","sRGBEncoding","gammaFactor","getCameraTargetForBBox","addScalar","center","bounds","diagonal","sqrt","pow","preparePerspectiveImage","Promise","size","setSize","fog","c","background","h","disable","_placeCameraForPerspectiveImage","render","l","domElement","toDataURL","enable","image","width","height","blob","renderPerspectiveImage","aspect","fov","rotateY","rotateX","translateZ","prepareTopImage","showDimensions","autoClear","OrthographicCamera","mask","d","clearDepth","_","PromiseQueue","_waitingPromises","_errorCallback","allSettled","all","map","then","status","value","catch","reason","registerCallback","_callback","MeshGenerator","materialQueue","_maxAnisotropy","_maxTextures","_textureLoader","TextureLoader","_creator_","_previewMaterial","MeshStandardMaterial","roughness","metalness","_environmentLoader","setEnvMap","_cacheHolder","geometryCache","has","get","Geometry","faceVertexUvs","vertices","m","u","p","g","faces","Face3","material","transparent","opacity","transmission","receiveShadow","needsUpdate","console","warn","mesh","materialCache","startsWith","_loadBenchmarkTextures","_rapiAccess","getMaterial","_loadTextures","_dataSyncer","requestAsset","mmWidth","mmHeight","textures","getTexturesOf","_singlePromiseFactory","create","_createMaterial","setTimeout","changeMaterialOfMesh","resolve","_loadMaterial","clear","JSON","stringify","getItem","topImage","load","anisotropy","wrapS","RepeatWrapping","wrapT","depth","repeat","MeshPhysicalMaterial","_plannerMeshGenerator","generateMesh","_materialLoaded","prototype","UiCallback","_isMute","enumerable","writable","Proxy","_setMute","substr"],"mappings":"gHAAA,8DAAyG,MAAMA,UAA4B,OAAa,YAAYC,EAAEC,GAAGC,MAAMF,EAAEC,GAAGE,KAAKC,QAAQ,CAACC,aAAa,CAACC,MAAM,WAAWC,aAAa,CAACC,SAAS,CAACC,GAAG,EAAEC,EAAE,EAAEC,EAAE,GAAGL,MAAM,WAAWM,eAAe,CAACJ,SAAS,CAACC,EAAE,EAAEC,EAAE,EAAEC,EAAE,GAAGL,MAAM,YAAYH,KAAKU,sBAAsB,IAAIC,MAAMC,iBAAiB,IAAID,MAAME,MAAMb,KAAKC,QAAQG,aAAaD,OAAO,IAAIH,KAAKU,sBAAsBL,SAASS,IAAId,KAAKC,QAAQG,aAAaC,SAASC,EAAEN,KAAKC,QAAQG,aAAaC,SAASE,EAAEP,KAAKC,QAAQG,aAAaC,SAASG,GAAGR,KAAKU,sBAAsBK,OAAOD,IAAI,GAAGd,KAAKU,sBAAsBM,YAAW,EAAGhB,KAAKU,sBAAsBO,OAAOC,OAAOC,KAAK,GAAGnB,KAAKU,sBAAsBO,OAAOC,OAAOE,IAAI,IAAIpB,KAAKU,sBAAsBO,OAAOI,QAAQ,IAAIV,MAAMW,QAAQ,KAAK,MAAMtB,KAAKU,sBAAsBa,SAAQ,EAAGvB,KAAKU,sBAAsBc,OAAO,IAAIb,MAAMc,QAAQ,EAAE,EAAE,IAAIzB,KAAK0B,wBAAwB,IAAIf,MAAMC,iBAAiB,IAAID,MAAME,MAAMb,KAAKC,QAAQQ,eAAeN,OAAO,IAAIH,KAAK0B,wBAAwBrB,SAASS,IAAId,KAAKC,QAAQQ,eAAeJ,SAASC,EAAEN,KAAKC,QAAQQ,eAAeJ,SAASE,EAAEP,KAAKC,QAAQQ,eAAeJ,SAASG,GAAGR,KAAK0B,wBAAwBX,OAAOD,IAAI,GAAGd,KAAK0B,wBAAwBV,YAAW,EAAGhB,KAAK0B,wBAAwBT,OAAOC,OAAOC,KAAK,GAAGnB,KAAK0B,wBAAwBT,OAAOC,OAAOE,IAAI,IAAIpB,KAAK0B,wBAAwBT,OAAOI,QAAQ,IAAIV,MAAMW,QAAQ,KAAK,MAAMtB,KAAK0B,wBAAwBH,SAAQ,EAAGvB,KAAK0B,wBAAwBF,OAAO,IAAIb,MAAMc,QAAQ,EAAE,EAAE,IAAIzB,KAAK2B,cAAc,IAAIhB,MAAMiB,aAAa,IAAIjB,MAAME,MAAMb,KAAKC,QAAQC,aAAaC,OAAO,IAAIH,KAAK2B,cAAcZ,OAAOD,IAAI,GAAGd,KAAK6B,aAAa,cAAc,OAAM,EAAG,aAAahC,GAAG,MAAMC,EAAED,EAAEiC,QAAQ,IAAInB,MAAMc,SAASM,EAAEC,KAAKC,IAAID,KAAKC,IAAInC,EAAEQ,EAAER,EAAES,GAAGT,EAAEU,GAAG,EAAE0B,EAAEH,EAAE,EAAE/B,KAAKU,sBAAsBO,OAAOC,OAAOiB,IAAID,EAAElC,KAAKU,sBAAsBO,OAAOC,OAAOkB,QAAQF,EAAElC,KAAKU,sBAAsBO,OAAOC,OAAOmB,MAAMH,EAAElC,KAAKU,sBAAsBO,OAAOC,OAAOoB,MAAMJ,EAAElC,KAAKU,sBAAsBO,OAAOC,OAAOC,KAAK,IAAInB,KAAKU,sBAAsBO,OAAOC,OAAOE,IAAI,EAAEW,EAAE/B,KAAKU,sBAAsBO,OAAOC,OAAOqB,yBAAyBvC,KAAK0B,wBAAwBT,OAAOC,OAAOiB,IAAID,EAAElC,KAAK0B,wBAAwBT,OAAOC,OAAOkB,QAAQF,EAAElC,KAAK0B,wBAAwBT,OAAOC,OAAOmB,MAAMH,EAAElC,KAAK0B,wBAAwBT,OAAOC,OAAOoB,MAAMJ,EAAElC,KAAK0B,wBAAwBT,OAAOC,OAAOC,KAAK,IAAInB,KAAK0B,wBAAwBT,OAAOC,OAAOE,IAAI,EAAEW,EAAE/B,KAAK0B,wBAAwBT,OAAOC,OAAOqB,yBAAyB,aAAavC,KAAKwC,OAAOC,IAAIzC,KAAKU,uBAAuBV,KAAKwC,OAAOC,IAAIzC,KAAK0B,yBAAyB1B,KAAKwC,OAAOC,IAAIzC,KAAK2B,eAAe,kBAAkB3B,KAAKwC,OAAOE,OAAO1C,KAAKU,uBAAuBV,KAAKwC,OAAOE,OAAO1C,KAAK0B,yBAAyB1B,KAAKwC,OAAOE,OAAO1C,KAAK2B,eAAe,SAAS3B,KAAK2C,kBAAkB3C,KAAK6B,aAAa,UAAU,IAAIhC,EAAE,iBAAS,GAAGA,EAAE,CAAC,GAAGG,KAAK2B,cAAc,CAAC,IAAI7B,EAAED,EAAE+C,UAAU,iBAAiB9C,EAAE2C,IAAIzC,KAAK2B,cAAc,WAAW7B,EAAE2C,IAAIzC,KAAK2B,cAAc,aAAakB,IAAI,GAAGZ,IAAI,GAAGa,KAAK,IAAIhD,EAAEiD,SAAS/C,KAAKC,QAAQC,aAAa,SAAS8C,SAASnD,GAAGG,KAAK2B,cAAcxB,MAAM,IAAIQ,MAAME,MAAMhB,IAAI,GAAGG,KAAKU,sBAAsB,CAAC,IAAIZ,EAAED,EAAE+C,UAAU,0BAA0B9C,EAAE2C,IAAIzC,KAAKU,sBAAsB,WAAWZ,EAAE2C,IAAIzC,KAAKU,sBAAsB,aAAamC,IAAI,GAAGZ,IAAI,IAAIa,KAAK,IAAIhD,EAAE2C,IAAIzC,KAAKU,sBAAsB,cAAcZ,EAAEiD,SAAS/C,KAAKC,QAAQG,aAAa,SAAS4C,SAASnD,GAAGG,KAAKU,sBAAsBP,MAAM,IAAIQ,MAAME,MAAMhB,IAAIC,EAAE2C,IAAIzC,KAAKU,sBAAsBL,SAAS,KAAKwC,KAAK,IAAIZ,IAAI,IAAIa,KAAK,IAAIE,SAAS,IAAIhD,KAAKU,sBAAsBc,OAAO,IAAIb,MAAMc,QAAQ,EAAE,EAAE,KAAK3B,EAAE2C,IAAIzC,KAAKU,sBAAsBL,SAAS,KAAKwC,KAAK,IAAIZ,IAAI,IAAIa,KAAK,IAAIE,SAAS,IAAIhD,KAAKU,sBAAsBc,OAAO,IAAIb,MAAMc,QAAQ,EAAE,EAAE,KAAK3B,EAAE2C,IAAIzC,KAAKU,sBAAsBL,SAAS,KAAKwC,KAAK,IAAIZ,IAAI,IAAIa,KAAK,IAAIE,SAAS,IAAIhD,KAAKU,sBAAsBc,OAAO,IAAIb,MAAMc,QAAQ,EAAE,EAAE,KAAK,GAAGzB,KAAK0B,wBAAwB,CAAC,IAAI5B,EAAED,EAAE+C,UAAU,4BAA4B9C,EAAE2C,IAAIzC,KAAK0B,wBAAwB,WAAW5B,EAAE2C,IAAIzC,KAAK0B,wBAAwB,aAAamB,IAAI,GAAGZ,IAAI,IAAIa,KAAK,IAAIhD,EAAE2C,IAAIzC,KAAK0B,wBAAwB,cAAc5B,EAAEiD,SAAS/C,KAAKC,QAAQG,aAAa,SAAS4C,SAASnD,GAAGG,KAAKU,sBAAsBP,MAAM,IAAIQ,MAAME,MAAMhB,IAAIC,EAAE2C,IAAIzC,KAAK0B,wBAAwBrB,SAAS,KAAKwC,KAAK,IAAIZ,IAAI,IAAIa,KAAK,IAAIE,SAAS,IAAIhD,KAAKU,sBAAsBc,OAAO,IAAIb,MAAMc,QAAQ,EAAE,EAAE,KAAK3B,EAAE2C,IAAIzC,KAAK0B,wBAAwBrB,SAAS,KAAKwC,KAAK,IAAIZ,IAAI,IAAIa,KAAK,IAAIE,SAAS,IAAIhD,KAAKU,sBAAsBc,OAAO,IAAIb,MAAMc,QAAQ,EAAE,EAAE,KAAK3B,EAAE2C,IAAIzC,KAAK0B,wBAAwBrB,SAAS,KAAKwC,KAAK,IAAIZ,IAAI,IAAIa,KAAK,IAAIE,SAAS,IAAIhD,KAAKU,sBAAsBc,OAAO,IAAIb,MAAMc,QAAQ,EAAE,EAAE,U,oCCA7rJ,oPAA8PwB,EAAwB,0CAA0C,MAAMC,EAAwB,gBAAU,IAAI,MAAMC,UAAsB,OAAgB,YAAYC,EAAEtD,EAAEuD,EAAEC,GAAGvD,QAAQC,KAAKuD,QAAQ,IAAI5C,MAAMc,QAAQ,EAAE,EAAE,GAAGzB,KAAKwD,WAAM,IAASF,EAAE,EAAEA,EAAEtD,KAAKwC,OAAOY,EAAEpD,KAAKyD,QAAQ3D,EAAEE,KAAK0D,WAAW,IAAI/C,MAAMgD,UAAU3D,KAAK0D,WAAW3C,OAAO6C,YAAY5D,KAAK6D,cAAcR,EAAErD,KAAK8D,mBAAmBT,GAAGrD,KAAK+D,aAAa,IAAIpD,MAAMqD,MAAM,IAAIrD,MAAMc,QAAQ,EAAE,EAAE,IAAIzB,KAAKiE,YAAY,IAAItD,MAAMqD,MAAM,IAAIrD,MAAMc,QAAQ,EAAE,EAAE,IAAIzB,KAAKkE,WAAW,IAAIvD,MAAMqD,MAAM,IAAIrD,MAAMc,QAAQ,EAAE,EAAE,IAAI,mBAAmB2B,GAAGA,EAAEe,iBAAiB,EAAEf,IAAIpD,KAAKoE,eAAehB,EAAEiB,mBAAmBrE,MAAMoD,EAAEe,iBAAiB,EAAEf,IAAIpD,KAAKsE,eAAelB,EAAEiB,mBAAmBrE,MAAMoD,EAAEe,iBAAiB,EAAEf,IAAIpD,KAAKuE,WAAWnB,EAAEiB,iBAAiBjB,EAAEoB,OAAOxE,MAAMoD,EAAEe,iBAAiB,EAAEf,IAAIpD,KAAKyE,aAAarB,EAAEiB,mBAAmBrE,MAAMoD,EAAEe,iBAAiB,EAAEf,IAAIpD,KAAK0E,QAAQtB,EAAEiB,mBAAmBrE,MAAMoD,EAAEe,iBAAiB,EAAEf,IAAIpD,KAAK2E,WAAWvB,EAAEiB,mBAAmBrE,MAAMoD,EAAEe,iBAAiB,EAAEf,IAAIpD,KAAK4E,UAAUxB,EAAEiB,iBAAiBjB,EAAEyB,WAAW7E,MAAMoD,EAAEe,iBAAiB,GAAG,KAAKnE,KAAK8E,eAAe,MAAM9E,MAAM,eAAeoD,GAAGpD,KAAK+E,cAAc3B,IAAIpD,KAAK6D,cAAcmB,eAAe,eAAe5B,GAAG,IAAItD,EAAEE,KAAK+E,cAAc3B,GAAGtD,EAAEA,GAAGA,EAAEmF,OAAOC,cAAc,CAACV,KAAK,WAAWxE,KAAKkF,cAAc,GAAG,WAAW9B,EAAEtD,GAAG,MAAMuD,EAAErD,KAAK+E,cAAc3B,IAAIC,GAAGrD,KAAKmF,eAAenF,KAAKmF,cAAcD,cAAc,CAACV,KAAK,YAAYY,WAAW,CAACZ,KAAK1E,KAAKE,KAAKmF,cAAc,MAAM9B,IAAIrD,KAAKmF,eAAenF,KAAKmF,cAAcE,KAAKhC,EAAE4B,OAAOI,KAAKrF,KAAKmF,cAAcD,cAAc,CAACV,KAAK,YAAYY,WAAW,CAACZ,KAAK1E,KAAKE,KAAKmF,cAAc,MAAMnF,KAAKmF,cAAcnF,KAAKmF,cAAcD,cAAc,CAACV,KAAK,aAAaY,WAAW,CAACE,aAAajC,EAAEmB,KAAK1E,MAAME,KAAKmF,cAAc9B,EAAE4B,OAAOjF,KAAKmF,cAAcD,cAAc,CAACV,KAAK,WAAWY,WAAW,CAACE,aAAajC,EAAEmB,KAAK1E,OAAO,cAAcsD,GAAG,MAAMtD,EAAEE,KAAKuF,WAAWnC,GAAG,GAAGtD,EAAE0F,QAAQ,EAAE,OAAO,KAAK,IAAInC,EAAEvD,EAAE,GAAG,OAAOA,EAAE0F,OAAO,GAAGxF,KAAKmF,eAAenF,KAAKyF,cAAczF,KAAKyF,aAAaJ,KAAKrF,KAAKmF,cAAcE,IAAIvF,EAAE4F,QAAQtC,IAAIA,EAAE6B,OAAOI,KAAKrF,KAAKmF,cAAcE,IAAIjC,EAAE6B,OAAOU,SAASC,WAAW5F,KAAKmF,cAAcQ,SAASC,UAAUvC,EAAE4B,OAAOU,SAASC,UAAUxC,EAAE6B,OAAOU,SAASC,WAAWvC,EAAED,KAAKC,EAAE,WAAWD,GAAGpD,KAAK0D,WAAWmC,cAAczC,EAAEpD,KAAKyD,SAAS,MAAM3D,EAAE,GAAG,OAAOE,KAAK0D,WAAWoC,iBAAiB9F,KAAKwC,OAAOuD,UAAS,GAAIL,QAAQtC,IAAIA,EAAE6B,OAAOU,SAASK,aAAalG,EAAEmG,KAAK7C,KAAKtD,EAAE0F,QAAQ,EAAE1F,EAAEoG,KAAK,CAAC9C,EAAEtD,IAAIsD,EAAE6B,OAAOU,SAASC,WAAW9F,EAAEmF,OAAOU,SAASC,SAAS9F,EAAEmF,OAAOU,SAASC,SAASxC,EAAE6B,OAAOU,SAASC,SAASxC,EAAE+C,SAASrG,EAAEqG,UAAU,GAAG,aAAa/C,GAAG,IAAItD,EAAEE,KAAK+E,cAAc3B,GAAG,IAAItD,IAAIE,KAAKyF,aAAa,OAAO,GAAG3F,GAAGA,EAAEmF,OAAOU,SAASS,WAAWpG,KAAKqG,iBAAiB,QAAQrG,KAAKyF,cAAc3F,IAAIE,KAAKyF,aAAa3F,EAAEmF,OAAOjF,KAAKyF,aAAaP,cAAc,CAACV,KAAK,gBAAgB,IAAInB,EAAErD,KAAKyF,aAAaa,OAAOjD,GAAGA,EAAEkD,qBAAqBlD,EAAEkD,qBAAqBvG,KAAKwG,iBAAiBnD,IAAIrD,KAAKyG,gBAAgBpD,GAAG,QAAQD,GAAG,IAAIpD,KAAKyF,aAAa,OAAOzF,KAAK0D,WAAWmC,cAAczC,EAAEpD,KAAKyD,SAAS,IAAI3D,EAAEuD,EAAE,IAAI1C,MAAMc,QAAQ,EAAE,GAAG,GAAGzB,KAAK0D,WAAWgD,IAAIC,eAAe3G,KAAK+D,aAAaV,GAAG,IAAIC,EAAEtD,KAAK4G,qBAAqBvD,GAAGtB,EAAE/B,KAAKyD,QAAQkC,SAASkB,IAAI,GAAG,IAAI7G,KAAKwD,MAAMxD,KAAK8G,qBAAqB9G,KAAK8G,mBAAmBzD,EAAE0D,QAAQC,IAAIhH,KAAKyF,aAAaa,OAAOjG,SAAS0G,UAAUjH,EAAEuD,EAAE0D,QAAQC,IAAIhH,KAAK8G,oBAAoBhH,EAAES,EAAEP,KAAKyF,aAAaa,OAAOjG,SAASE,MAAM,CAAC,IAAI6C,EAAE,IAAIzC,MAAMc,QAAQ,EAAE,EAAE,GAAG5B,EAAE,IAAIc,MAAMc,QAAQ,EAAE,EAAE,GAAGzB,KAAK0D,WAAWgD,IAAIC,eAAe3G,KAAKiE,YAAYb,GAAGpD,KAAK0D,WAAWgD,IAAIC,eAAe3G,KAAKkE,WAAWrE,GAAG,IAAIqC,EAAElC,KAAK4G,qBAAqB/G,GAAGoH,EAAEjH,KAAK4G,qBAAqBxD,GAAGrB,IAAImB,GAAyBnB,GAAGmB,EAAwBpD,EAAEwD,EAAE2D,EAAE5D,EAAE0D,QAAQ3D,EAAE2D,QAAQzD,EAAE2D,GAAG3D,EAAEpB,EAAEpC,EAAEuD,EAAE0D,QAAQE,EAAE3D,GAAG2D,EAAE/E,EAAEpC,EAAEsD,EAAE2D,QAAQ7E,EAAEoB,GAAGpB,EAAE+E,IAAInH,EAAED,EAAEkH,SAASjH,EAAEkH,IAAIhH,KAAKuD,SAASvD,KAAKyF,aAAaP,cAAc,CAACV,KAAK,OAAOY,WAAW,CAAC/E,SAASP,KAAK,qBAAqBsD,GAAG,IAAItD,EAAEsD,EAAE2D,QAAQC,IAAIhH,KAAKyD,QAAQpD,UAAUmF,SAAS,OAAO,eAAapC,KAAKtD,EAAEoH,OAAOC,mBAAmBrH,EAAE,WAAWsD,GAAGpD,KAAKyF,eAAezF,KAAKyF,aAAaP,cAAc,CAACV,KAAK,WAAWY,WAAW,CAAC/E,SAAS+C,KAAKpD,KAAKyF,aAAa,KAAKzF,KAAK8G,mBAAmB,MAAM,UAAU1D,EAAEtD,GAAG,IAAIE,KAAK8E,eAAe,CAAC,IAAIhF,EAAEE,KAAK+E,cAAc3B,GAAG,IAAItD,EAAE,OAAOE,KAAK8E,eAAehF,EAAEmF,OAAOjF,KAAK8E,eAAeI,cAAc,CAACV,KAAK,SAASY,WAAW,CAACP,SAAS/E,KAAK,gBAAgBsD,GAAG,IAAIpD,KAAKwD,OAAOxD,KAAK+D,aAAaqD,SAAS,EAAEpH,KAAKyD,QAAQkC,UAAU3F,KAAKyD,QAAQkC,SAAS0B,OAAOrH,KAAKyD,QAAQkC,SAAS0B,MAAM,IAAIrH,KAAK+D,aAAaqD,UAAU,IAAIhE,GAAGA,EAAEkE,aAAatH,KAAKuH,yBAAyBvH,KAAK+D,aAAaqD,UAAUhE,EAAEkE,YAAYE,UAAU,IAAI7G,MAAMc,SAASlB,EAAEP,KAAKuH,uBAAuBhH,EAAEP,KAAKkE,WAAWkD,SAAS,GAAGhE,EAAEkE,YAAYxF,QAAQ,IAAInB,MAAMc,SAASnB,EAAE8C,EAAEkE,YAAYE,UAAU,IAAI7G,MAAMc,SAASnB,EAAEN,KAAKyD,QAAQkC,SAASkB,IAAI,IAAI7G,KAAKkE,WAAWkD,WAAW,GAAGpH,KAAKyH,UAAUzH,KAAKiE,YAAYmD,SAASpH,KAAKyH,QAAQjH,EAAE,EAAE4C,EAAEkE,YAAYE,UAAU,IAAI7G,MAAMc,SAASjB,IAAI,iBAAiB4C,GAAGA,GAAGA,EAAEkE,cAActH,KAAKuD,QAAQmE,KAAKtE,EAAEkE,YAAYE,UAAU,IAAI7G,MAAMc,UAAUzB,KAAKuD,QAAQoE,gBAAgBvE,EAAEwE,mBAAmB,IAAIjH,MAAMkH,cAAc,OAAOzE,EAAEtD,EAAEuD,GAAG,GAAGD,IAAIpD,KAAKyH,QAAQrE,GAAGtD,IAAIE,KAAKuH,uBAAuBzH,GAAGuD,EAAE,CAACrD,KAAK8H,iBAAiBzE,EAAE,IAAID,EAAEpD,KAAK8H,iBAAiB/B,SAAS,GAAG3C,aAAazC,MAAMoH,MAAM3E,EAAE4E,SAASzB,sBAAsB,QAAQvG,KAAKyF,cAAc,eAAYzF,KAAKyF,cAAczF,KAAKmF,eAAe,eAAYnF,KAAKmF,eAAe,aAAa/B,GAAGpD,KAAKyF,aAAarC,EAAE,mBAAmBA,GAAGpD,KAAKqG,iBAAiBjD,EAAE,UAAUA,GAAGpD,KAAKyD,QAAQL,EAAE,SAASA,GAAGpD,KAAKwC,OAAOY,GAAG,MAAM6E,UAA6B,OAAa,YAAY7E,EAAEtD,GAAGC,MAAMqD,EAAEtD,GAAGE,KAAKC,QAAQ,CAACC,aAAa,CAACC,MAAM,YAAYH,KAAK2B,cAAc,IAAIhB,MAAMiB,aAAa,IAAIjB,MAAME,MAAMb,KAAKC,QAAQC,aAAaC,OAAO,KAAKH,KAAK2B,cAAcZ,OAAOD,IAAI,GAAGd,KAAK6B,aAAa,cAAc,OAAM,EAAG,aAAa7B,KAAKwC,OAAOC,IAAIzC,KAAK2B,eAAe,kBAAkB3B,KAAKwC,OAAOE,OAAO1C,KAAK2B,eAAe,SAAS3B,KAAK2C,kBAAkB3C,KAAK6B,aAAa,UAAU,IAAIuB,EAAE,iBAAS,GAAGA,GAAGpD,KAAK2B,cAAc,CAAC,IAAI7B,EAAEsD,EAAER,UAAU,iBAAiB9C,EAAE2C,IAAIzC,KAAK2B,cAAc,WAAW7B,EAAE2C,IAAIzC,KAAK2B,cAAc,aAAakB,IAAI,GAAGZ,IAAI,GAAGa,KAAK,IAAIhD,EAAEiD,SAAS/C,KAAKC,QAAQC,aAAa,SAAS8C,SAASI,GAAGpD,KAAK2B,cAAcxB,MAAM,IAAIQ,MAAME,MAAMuC,MAAM,IAAI8E,EAAc,KAAK,MAAMC,EAAiB,KAAKD,IAAgBA,EAAc,IAAIvH,MAAMyH,cAAc,CAACC,WAAU,EAAGC,OAAM,IAAKJ,EAAcK,eAAe5H,MAAM6H,aAAaN,EAAcO,YAAY,KAAKP,GAAeQ,EAAuB,CAACtF,EAAEtD,EAAE,KAAK,MAAMuD,EAAED,EAAEtB,QAAQ,IAAInB,MAAMc,SAAS,OAAO4B,EAAEsF,UAAU7I,GAAG,CAAC8I,OAAOxF,EAAEoE,UAAU,IAAI7G,MAAMc,SAASoH,OAAOxF,EAAEyF,SAAS9G,KAAK+G,KAAK/G,KAAKgH,IAAI3F,EAAE/C,EAAE,GAAG0B,KAAKgH,IAAI3F,EAAE9C,EAAE,GAAGyB,KAAKgH,IAAI3F,EAAE7C,EAAE,MAAMyI,EAAwB,CAAC7F,EAAEtD,EAAEuD,EAAEC,EAAE,KAAK,IAAI4F,QAAQnH,IAAI,MAAMoH,KAAKtJ,EAAE,MAAMyD,EAAEpB,EAAEiG,IAAmBjG,EAAEkH,QAAQvJ,EAAEA,GAAG,MAAMoH,EAAE7D,EAAEiG,IAAIjG,EAAEiG,IAAItC,QAAQ,KAAKuC,EAAElG,EAAEmG,WAAWnG,EAAEmG,WAAWxC,QAAQ,KAAK3D,EAAEmG,WAAW,KAAKnG,EAAEiG,IAAI,KAAK,IAAIG,EAAE,IAAI,OAAoBpG,GAAGtD,EAAEiB,OAAO0I,QAAQ,GAAG3J,EAAEiB,OAAO0I,QAAQ,GAAGC,EAAgC5J,EAAEuD,GAAG,IAAI,IAAInB,EAAEyH,OAAOvG,EAAEtD,GAAG,MAAM8J,EAAE1H,EAAE2H,WAAWC,YAAYhK,EAAEiB,OAAOgJ,OAAO,GAAG3G,EAAEmG,WAAWD,EAAElG,EAAEiG,IAAIpC,EAAEuC,EAAE7G,kBAAkBZ,EAAE,CAACiI,MAAMJ,EAAEK,MAAMpK,EAAEqK,OAAOrK,EAAEsK,KAAK,SAASC,EAAuB,CAAChH,EAAEtD,EAAEuD,EAAEC,EAAEvB,EAAElC,IAAI,IAAIqJ,QAAQ5F,IAAIzD,IAAIA,EAAE,MAAM,MAAMkC,EAAEoG,IAAmBpG,EAAEqH,QAAQvJ,EAAEA,GAAG,MAAMqC,EAAEkB,EAAEiG,IAAIjG,EAAEiG,IAAItC,QAAQ,KAAKE,EAAE7D,EAAEmG,WAAWnG,EAAEmG,WAAWxC,QAAQ,KAAK3D,EAAEmG,WAAW,KAAKnG,EAAEiG,IAAI,KAAKvJ,EAAEiB,OAAO0I,QAAQ,GAAG3J,EAAEiB,OAAO0I,QAAQ,GAAGpG,EAAEqG,EAAgC5J,EAAEuD,GAAG,IAAI,KAAKvD,EAAEuK,OAAO,EAAEvK,EAAEyC,0BAA0BR,EAAE4H,OAAOvG,EAAEtD,GAAG,MAAMwJ,EAAEvH,EAAE8H,WAAWC,YAAYhK,EAAEiB,OAAOgJ,OAAO,GAAG3G,EAAEmG,WAAWtC,EAAE7D,EAAEiG,IAAInH,EAAEoB,EAAE,CAAC0G,MAAMV,EAAEW,MAAMpK,EAAEqK,OAAOrK,EAAEsK,KAAK,SAAST,EAAgC,CAACtG,EAAEtD,EAAEuD,EAAEC,KAAKF,EAAEhC,IAAI,IAAIgC,EAAEkH,IAAI,GAAGlH,EAAEiH,OAAO,EAAEjH,EAAE/C,SAASqH,KAAK5H,EAAE8I,QAAQxF,EAAEyB,SAAS/D,IAAI,EAAE,EAAE,GAAGsC,EAAEmH,QAAQ,gBAAUjH,IAAIF,EAAEoH,QAAQ,gBAAUnH,IAAID,EAAEqH,WAAW,IAAI3K,EAAEgJ,UAAU1F,EAAEb,0BAA0BmI,EAAgB,CAACtH,EAAEtD,EAAEuD,EAAEC,EAAE,MAAM,MAAMqH,eAAe5I,GAAE,GAAIuB,EAAE,OAAO,IAAI4F,QAAQ5F,IAAI,MAAMzD,EAAEsI,IAAmBtI,EAAE+K,WAAU,EAAG,IAAI1I,EAAE,IAAIvB,MAAMkK,oBAAoBxH,EAAEwF,OAAOvI,EAAE,EAAE+C,EAAEwF,OAAOvI,EAAE,EAAE+C,EAAEwF,OAAOrI,EAAE,GAAG6C,EAAEwF,OAAOrI,EAAE,EAAE,IAAI0B,EAAE7B,SAASqH,KAAKrE,EAAEuF,QAAQ1G,EAAEsI,QAAQ,iBAAW,KAAKtI,EAAEuI,WAAWpH,EAAEwF,OAAOtI,EAAE,GAAG2B,EAAEd,IAAIc,EAAE7B,SAASE,EAAE,GAAG2B,EAAEnB,OAAO+J,KAAK,MAAM,IAAI7D,EAAE,IAAI5D,EAAEwF,OAAOvI,EAAEgJ,EAAE,IAAIjG,EAAEwF,OAAOrI,EAAE,GAAGyG,EAAE,MAAMqC,EAAE,KAAK,CAAC,IAAIlG,EAAE,EAAE6D,EAAE,KAAK7D,EAAE6D,EAAE,KAAKqC,EAAE,OAAOlG,EAAEkG,EAAE,MAAMrC,GAAG7D,EAAEkG,GAAGlG,EAAEvD,EAAEuJ,QAAQnC,EAAEqC,GAAG,IAAIE,EAAEpG,EAAEiG,IAAIjG,EAAEiG,IAAItC,QAAQ,KAAK6C,EAAExG,EAAEmG,WAAWnG,EAAEmG,WAAWxC,QAAQ,KAAK3D,EAAEmG,WAAW,KAAKnG,EAAEiG,IAAI,KAAK,IAAI0B,EAAEhJ,EAAE,IAAIkG,EAAqB7E,GAAG,IAAI,OAAoBA,GAAGlB,EAAEnB,OAAO0I,QAAQ,GAAGvH,EAAEnB,OAAO0I,QAAQ,GAAG1H,EAAEG,EAAEnB,OAAOgJ,OAAO,GAAG7H,EAAEnB,OAAO0I,QAAQ,GAAG5J,EAAE8J,OAAOvG,EAAElB,GAAGpC,IAAID,EAAEmL,aAAanL,EAAE8J,OAAO7J,EAAEoC,IAAI,IAAI+I,EAAEpL,EAAEgK,WAAWC,YAAY5H,EAAEnB,OAAOgJ,OAAO,GAAG7H,EAAEnB,OAAOgJ,OAAO,GAAG3G,EAAEmG,WAAWK,EAAExG,EAAEiG,IAAIG,EAAEuB,EAAEpI,kBAAkBW,EAAE,CAAC0G,MAAMiB,EAAEhB,MAAMhD,EAAEiD,OAAOZ,EAAEa,KAAK,W,kCCA36R,gGAAkV,MAAMe,EAAa,YAAY9H,EAAEtD,GAAGE,KAAKmL,iBAAiB,GAAGnL,KAAKoL,eAAe,OAAOlC,QAAQmC,WAAWnC,QAAQmC,YAAY,CAACjI,GAAG8F,QAAQoC,IAAIlI,EAAEmI,IAAInI,GAAGA,EAAEoI,KAAKpI,IAAG,CAAEqI,OAAO,YAAYC,MAAMtI,KAAKuI,MAAMvI,IAAG,CAAEqI,OAAO,WAAWG,OAAOxI,QAAQA,GAAGpD,KAAK6L,iBAAiBzI,GAAGtD,IAAIE,KAAKoL,eAAetL,GAAG,KAAKsD,GAAGpD,KAAKmL,iBAAiBlF,KAAK7C,GAAG8F,QAAQoC,IAAItL,KAAKmL,kBAAkBK,KAAKpI,IAAIA,EAAEoC,SAASxF,KAAKmL,iBAAiB3F,QAAQxF,KAAK8L,YAAY9L,KAAK8L,UAAU1I,GAAGpD,KAAKmL,iBAAiB,KAAKnL,KAAKoL,gBAAgB,SAAShI,GAAE,GAAI,OAAO,IAAI8F,QAAQ,CAACpJ,EAAEiC,KAAK,MAAMsB,EAAED,EAAE,aAAa,MAAM8F,QAAQ7F,GAAGrD,KAAKmL,kBAAkBK,KAAKpI,IAAI,GAAG,eAAeC,EAAE,CAAC,MAAMtB,EAAE,GAAGqB,EAAEsC,QAAQ,EAAEgG,MAAMtI,EAAEqI,OAAO3L,MAAM,cAAcA,GAAGiC,EAAEkE,KAAK7C,KAAKtD,EAAEiC,QAAQjC,EAAEsD,IAAIA,IAAIrB,EAAEqB,OAAO,iBAAiBA,GAAGpD,KAAK8L,UAAU1I,EAAE,qBAAqBpD,KAAK8L,UAAU,KAAK,aAAa,OAAO9L,KAAKmL,iBAAiB3F,QAAQ,IAAIuG,EAAc,MAAM,MAAM3I,EAAE,YAAYA,GAAGpD,KAAKgM,cAAc,IAAId,EAAalL,KAAKiM,eAAe,EAAEjM,KAAKkM,aAAa,GAAGlM,KAAKmM,eAAe,IAAIxL,MAAMyL,cAAcpM,KAAKqM,UAAUjJ,EAAEpD,KAAKsM,iBAAiB,IAAI3L,MAAM4L,qBAAqB,CAACpM,MAAM,OAAuBqM,UAAU,OAA2BC,UAAU,SAA6BzM,KAAK0M,mBAAmBC,UAAU3M,KAAKsM,kBAAkB,kBAAkBlJ,EAAEtD,EAAEiC,EAAEsB,EAAE4D,GAAG,IAAIpH,EAAE,GAAGuD,GAAGpD,KAAK4M,aAAaC,cAAcC,IAAI1J,GAAGvD,EAAEG,KAAK4M,aAAaC,cAAcE,IAAI3J,OAAO,CAACvD,EAAE,IAAIc,MAAMqM,SAASnN,EAAEoN,cAAc,GAAGpN,EAAEoN,cAAc,GAAG,GAAG,IAAI,IAAI7J,EAAE,EAAErB,EAAEjC,EAAE0F,OAAOpC,EAAErB,EAAEqB,GAAG,EAAEvD,EAAEqN,SAASjH,KAAK,IAAItF,MAAMc,QAAQ3B,EAAEsD,GAAG,IAAItD,EAAEsD,EAAE,GAAG,IAAItD,EAAEsD,EAAE,IAAI,MAAM,IAAIlB,EAAE,EAAEsH,EAAE,EAAEI,EAAE,EAAEN,EAAE,EAAEhG,EAAE,EAAE6J,EAAE,EAAElC,EAAE,EAAEF,EAAE,EAAEqC,EAAE,EAAEC,EAAE,EAAEC,EAAE,GAAG,IAAI,IAAIlK,EAAE,EAAEtD,EAAEiC,EAAEyD,OAAOpC,EAAEtD,EAAEsD,GAAG,EAAEoG,EAAEpG,EAAEwG,EAAExG,EAAE,EAAEkG,EAAElG,EAAE,EAAEE,EAAE,EAAEvB,EAAEyH,GAAG2D,EAAE,EAAEpL,EAAE6H,GAAGqB,EAAE,EAAElJ,EAAEuH,GAAGgE,EAAE,CAAC,IAAI3M,MAAMc,QAAQwF,EAAE3D,GAAG2D,EAAE3D,EAAE,IAAI,EAAE2D,EAAE3D,EAAE,IAAI,IAAI3C,MAAMc,QAAQwF,EAAEkG,GAAGlG,EAAEkG,EAAE,IAAI,EAAElG,EAAEkG,EAAE,IAAI,IAAIxM,MAAMc,QAAQwF,EAAEgE,GAAGhE,EAAEgE,EAAE,IAAI,EAAEhE,EAAEgE,EAAE,KAAKpL,EAAE0N,MAAMtH,KAAK,IAAItF,MAAM6M,MAAMzL,EAAEyH,GAAGzH,EAAE6H,GAAG7H,EAAEuH,GAAGgE,IAAIvC,EAAE,EAAEhJ,EAAEyH,GAAG4D,EAAE,EAAErL,EAAE6H,GAAGyD,EAAE,EAAEtL,EAAEuH,GAAGzJ,EAAEoN,cAAc,GAAG/K,GAAG,GAAGrC,EAAEoN,cAAc,GAAG/K,GAAG,GAAG,IAAIvB,MAAMW,QAAQ+B,EAAE0H,GAAG1H,EAAE0H,EAAE,IAAIlL,EAAEoN,cAAc,GAAG/K,GAAG,GAAG,IAAIvB,MAAMW,QAAQ+B,EAAE+J,GAAG/J,EAAE+J,EAAE,IAAIvN,EAAEoN,cAAc,GAAG/K,GAAG,GAAG,IAAIvB,MAAMW,QAAQ+B,EAAEgK,GAAGhK,EAAEgK,EAAE,IAAInL,IAAIkB,GAAGpD,KAAK4M,aAAaC,cAAc/L,IAAIsC,EAAEvD,GAAG,OAAOA,EAAE,qBAAqBuD,EAAEtD,GAAGsD,GAAGtD,GAAGsD,EAAEqK,SAAS3N,EAAEsD,EAAEqK,SAASC,aAAa,IAAItK,EAAEqK,SAASE,SAASvK,EAAEqK,SAASG,aAAa,GAAGxK,EAAEpC,YAAW,EAAGoC,EAAEyK,eAAc,IAAKzK,EAAEpC,YAAW,EAAGoC,EAAEyK,eAAc,GAAIzK,EAAEqK,SAASK,aAAY,GAAIC,QAAQC,KAAK,oCAAoC,CAACC,KAAK7K,GAAG,CAACqK,SAAS3N,IAAI,gBAAgBsD,EAAEtD,EAAEiC,EAAEsB,EAAE4D,GAAG,GAAGjH,KAAK4M,aAAasB,cAAcpB,IAAI1J,GAAGtD,SAAS,GAAGsD,EAAE+K,WAAW,qBAAqB,CAAC,IAAItO,EAAE,eAAwBuD,GAAGlB,EAAE,eAAerC,EAAEG,KAAK0M,oBAAoB1M,KAAKoO,uBAAuBvO,EAAEqC,EAAEmB,EAAE4D,GAAGuE,KAAK1L,EAAEiC,QAAQ/B,KAAKqO,YAAYC,YAAYlL,GAAGoI,KAAKpI,IAAI,IAAIvD,EAAE,eAAeuD,EAAEpD,KAAK0M,oBAAoB1M,KAAKuO,cAAcnL,EAAEvD,EAAEwD,EAAE4D,GAAGuE,KAAK1L,EAAEiC,IAAIA,GAAG,uBAAuBqB,EAAEtD,EAAEiC,EAAE,EAAEsB,EAAE,GAAG,OAAO,IAAI6F,QAAQ,CAACjC,EAAEpH,KAAK,MAAMqC,EAAE,eAAuBkB,EAAEiC,IAAI,eAAWrF,KAAKwO,YAAYC,aAAavM,EAAE8H,OAAM,GAAI9H,EAAEpC,EAAEE,KAAKiM,eAAelK,GAAG,IAAIG,EAAEwM,QAAQ,EAAExM,EAAEwM,SAASrL,GAAG,IAAInB,EAAEyM,SAAS,EAAEzM,EAAEyM,UAAU3O,KAAKkM,cAAcV,KAAK,KAAKxL,KAAK4M,aAAasB,cAAcpN,IAAIsC,EAAEiC,GAAGvF,GAAGmH,KAAKpH,KAAK,cAAcuD,EAAEtD,EAAEiC,EAAE,EAAEsB,EAAE,GAAG,OAAO,IAAI6F,QAAQ,CAACjC,EAAEpH,KAAK,IAAIuD,EAAEwL,UAAUxL,EAAEwL,UAAU,IAAIxL,EAAEwL,SAASpJ,OAAO,OAAOxF,KAAK4M,aAAasB,cAAcpN,IAAIsC,EAAEiC,GAAGvF,GAAGmH,IAAIjH,KAAKqO,YAAYQ,cAAczL,GAAGoI,KAAKtJ,IAAI,IAAIsH,EAAE,GAAGtH,EAAEwD,QAAQtC,IAAIoG,EAAEvD,KAAK,eAAWjG,KAAKwO,YAAYC,aAAarL,EAAE4G,OAAM,GAAI5G,EAAEtD,EAAEE,KAAKiM,eAAelK,GAAG,IAAIqB,EAAEsL,QAAQ,EAAEtL,EAAEsL,SAASrL,GAAG,IAAID,EAAEuL,SAAS,EAAEvL,EAAEuL,UAAU3O,KAAKkM,iBAAiBhD,QAAQoC,IAAI9B,GAAGgC,KAAK,KAAKxL,KAAK4M,aAAasB,cAAcpN,IAAIsC,EAAEiC,GAAGvF,GAAGmH,KAAKpH,OAAO,cAAcuD,EAAEtD,EAAEiC,GAAG,OAAO,IAAImH,QAAQ,CAAC7F,EAAE4D,KAAKjH,KAAK8O,sBAAsBC,OAAO,EAAE3L,EAAE,CAACC,EAAE4D,IAAIjH,KAAKgP,gBAAgB5L,EAAEC,EAAE4D,EAAEnH,EAAEiC,IAAIyJ,KAAK,KAAKyD,WAAW,IAAI5L,EAAErD,KAAK4M,aAAasB,cAAcnB,IAAI3J,IAAI,IAAI6D,KAAK,gBAAgB7D,EAAEtD,GAAG,OAAOE,KAAK4M,aAAasB,cAAcpB,IAAIhN,IAAIE,KAAKkP,qBAAqB9L,EAAEpD,KAAK4M,aAAasB,cAAcnB,IAAIjN,IAAIoJ,QAAQiG,WAAW,IAAIjG,QAAQ,CAACnH,EAAEsB,KAAKrD,KAAKoP,cAActP,GAAG0L,KAAK1L,IAAIE,KAAKkP,qBAAqB9L,EAAEtD,GAAGiC,KAAKsB,KAAK,oBAAoB,OAAOrD,KAAKiM,eAAe,kBAAkB7I,GAAGpD,KAAKiM,eAAe7I,EAAE,kBAAkB,OAAOpD,KAAKkM,aAAa,gBAAgB9I,GAAGpD,KAAKkM,aAAa9I,EAAE,QAAQpD,KAAK4M,aAAayC,QAAQ,WAAWjM,EAAEtD,GAAG,OAAO,IAAIoJ,QAAQnH,IAAI,IAAIsB,EAAE4D,EAAE,MAAMqI,KAAKC,UAAUzP,GAAGE,KAAK4M,aAAasB,cAAcpB,IAAI7F,GAAG5D,EAAErD,KAAK4M,aAAasB,cAAcnB,IAAI9F,IAAI5D,EAAE,IAAI1C,MAAM4L,qBAAqB,CAACpM,MAAML,IAAIE,KAAK0M,mBAAmBC,UAAUtJ,GAAGrD,KAAK4M,aAAasB,cAAcpN,IAAImG,EAAE5D,IAAIrD,KAAKkP,qBAAqB9L,EAAEC,GAAG4L,WAAW,IAAIlN,IAAI,KAAK,YAAYqB,EAAEtD,GAAG,OAAO,IAAIoJ,QAAQ,CAACnH,EAAEsB,KAAK,GAAGrD,KAAK4M,aAAasB,cAAcpB,IAAIhN,GAAG,OAAOE,KAAKkP,qBAAqB9L,EAAEpD,KAAK4M,aAAasB,cAAcnB,IAAIjN,SAASiC,IAAI/B,KAAKqO,YAAYmB,QAAQ1P,GAAG0L,KAAKvE,IAAI,GAAGA,EAAEwI,SAASzP,KAAKmM,eAAeuD,KAAKzI,EAAEwI,SAASpM,IAAIA,EAAEsM,WAAW3P,KAAKiM,eAAe5I,EAAEuM,MAAMjP,MAAMkP,eAAexM,EAAEyM,MAAMnP,MAAMkP,eAAe,IAAIhQ,EAAE,IAAIc,MAAMW,QAAQ,EAAE,GAAG2F,EAAEgD,MAAM,IAAIpK,EAAES,EAAE,EAAE2G,EAAEgD,OAAOhD,EAAE8I,MAAM,IAAIlQ,EAAEU,EAAE,EAAE0G,EAAE8I,OAAO1M,EAAE2M,OAAOlP,IAAIjB,EAAES,EAAET,EAAEU,GAAG,MAAM2B,EAAE,IAAIvB,MAAMsP,qBAAqB,CAAC1E,IAAIlI,EAAEmJ,UAAU,GAAGC,UAAU,KAAKzM,KAAK0M,mBAAmBC,UAAUzK,GAAGlC,KAAK4M,aAAasB,cAAcpN,IAAIhB,EAAEoC,GAAGlC,KAAKkP,qBAAqB9L,EAAElB,GAAG+M,WAAW,IAAIlN,IAAI,SAAS,CAAC,MAAMqB,EAAE,0DAA0D2K,QAAQC,KAAK5K,GAAGC,EAAED,KAAKC,KAAK,cAAcD,EAAE,EAAEtD,EAAE,KAAKiC,EAAEsB,EAAE4D,EAAEpH,EAAEqC,EAAEsH,GAAE,GAAI,OAAOxJ,KAAKkQ,sBAAsBC,aAAarQ,EAAEiC,EAAEsB,EAAE4D,EAAEpH,EAAEqC,GAAG,0BAA0BkB,GAAGpD,KAAKoQ,gBAAgBhN,EAAE,+BAA+BpD,KAAKoQ,qBAAgB,GAAQ,OAAO,eAAW,CAAC,QAAQhN,EAAEiN,UAAU,mBAAc,GAAQ,eAAW,CAAC,QAAQjN,EAAEiN,UAAU,0BAAqB,GAAQ,eAAW,CAAC,QAAQjN,EAAEiN,UAAU,mBAAc,GAAQ,eAAW,CAAC,QAAQjN,EAAEiN,UAAU,6BAAwB,GAAQ,eAAW,CAAC,QAAQjN,EAAEiN,UAAU,oBAAe,GAAQ,eAAW,CAAC,QAAQjN,EAAEiN,UAAU,6BAAwB,GAAQjN,GAAz6J,GAA+6J,MAAMkN,EAAW,YAAYlN,GAAG,OAAOpD,KAAKuQ,SAAQ,EAAGvQ,KAAKqM,UAAUjJ,EAAE,eAAcpD,KAAK,UAAU,CAACwQ,YAAW,EAAGC,UAAS,IAAK,eAAcH,EAAWD,UAAU,WAAW,CAACG,YAAW,EAAGC,UAAS,IAAK,eAAcH,EAAWD,UAAU,OAAO,CAACG,YAAW,EAAGC,UAAS,IAAK,eAAcH,EAAWD,UAAU,SAAS,CAACG,YAAW,EAAGC,UAAS,IAAK,IAAIC,MAAM1Q,KAAKA,MAAM,SAASoD,GAAG,eAAapD,KAAK,WAAU,GAAIA,KAAKuQ,QAAQnN,EAAE,eAAapD,KAAK,WAAU,GAAI,OAAOA,KAAK2Q,UAAS,GAAI,SAAS3Q,KAAK2Q,UAAS,GAAI,IAAIvN,EAAEtD,GAAG,OAAOE,KAAKuQ,SAAS,mBAAmBvQ,KAAKF,IAAI,OAAOA,EAAE8Q,OAAO,EAAE,GAAG,OAAO5Q,KAAKF","file":"js/chunk-6d36a2bc-legacy.380b568f.js","sourcesContent":["import{f as getGUI}from\"./rapi-access-413632b4.js\";import{L as LightSetting}from\"./pixotron-2f79bd46.js\";class DefaultLightSetting extends LightSetting{constructor(i,t){super(i,t),this._params={ambientLight:{color:\"#ffffff\"},mainDirLight:{position:{x:-3,y:4,z:4},color:\"#ffffff\"},secondDirLight:{position:{x:3,y:4,z:3},color:\"#ffffff\"}},this._mainDirectionalLight=new THREE.DirectionalLight(new THREE.Color(this._params.mainDirLight.color),.8),this._mainDirectionalLight.position.set(this._params.mainDirLight.position.x,this._params.mainDirLight.position.y,this._params.mainDirLight.position.z),this._mainDirectionalLight.layers.set(1),this._mainDirectionalLight.castShadow=!0,this._mainDirectionalLight.shadow.camera.near=.1,this._mainDirectionalLight.shadow.camera.far=100,this._mainDirectionalLight.shadow.mapSize=new THREE.Vector2(1024,1024),this._mainDirectionalLight.visible=!0,this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0)),this._secondDirectionalLight=new THREE.DirectionalLight(new THREE.Color(this._params.secondDirLight.color),.2),this._secondDirectionalLight.position.set(this._params.secondDirLight.position.x,this._params.secondDirLight.position.y,this._params.secondDirLight.position.z),this._secondDirectionalLight.layers.set(1),this._secondDirectionalLight.castShadow=!1,this._secondDirectionalLight.shadow.camera.near=.1,this._secondDirectionalLight.shadow.camera.far=100,this._secondDirectionalLight.shadow.mapSize=new THREE.Vector2(1024,1024),this._secondDirectionalLight.visible=!0,this._secondDirectionalLight.lookAt(new THREE.Vector3(0,0,0)),this._ambientLight=new THREE.AmbientLight(new THREE.Color(this._params.ambientLight.color),.5),this._ambientLight.layers.set(1),this.addToScene()}needsBounds(){return!0}updateBounds(i){const t=i.getSize(new THREE.Vector3),a=Math.max(Math.max(t.x,t.y),t.z)+1,o=a/2;this._mainDirectionalLight.shadow.camera.top=o,this._mainDirectionalLight.shadow.camera.bottom=-o,this._mainDirectionalLight.shadow.camera.left=-o,this._mainDirectionalLight.shadow.camera.right=o,this._mainDirectionalLight.shadow.camera.near=.01,this._mainDirectionalLight.shadow.camera.far=4*a,this._mainDirectionalLight.shadow.camera.updateProjectionMatrix(),this._secondDirectionalLight.shadow.camera.top=o,this._secondDirectionalLight.shadow.camera.bottom=-o,this._secondDirectionalLight.shadow.camera.left=-o,this._secondDirectionalLight.shadow.camera.right=o,this._secondDirectionalLight.shadow.camera.near=.01,this._secondDirectionalLight.shadow.camera.far=4*a,this._secondDirectionalLight.shadow.camera.updateProjectionMatrix()}addToScene(){this._scene.add(this._mainDirectionalLight),this._scene.add(this._secondDirectionalLight),this._scene.add(this._ambientLight)}removeFromScene(){this._scene.remove(this._mainDirectionalLight),this._scene.remove(this._secondDirectionalLight),this._scene.remove(this._ambientLight)}reload(){this.removeFromScene(),this.addToScene()}showGUI(){let i=getGUI();if(i){if(this._ambientLight){let t=i.addFolder(\"Ambient Light\");t.add(this._ambientLight,\"visible\"),t.add(this._ambientLight,\"intensity\").min(0).max(5).step(.1),t.addColor(this._params.ambientLight,\"color\").onChange(i=>this._ambientLight.color=new THREE.Color(i))}if(this._mainDirectionalLight){let t=i.addFolder(\"Main Directional Light\");t.add(this._mainDirectionalLight,\"visible\"),t.add(this._mainDirectionalLight,\"intensity\").min(0).max(10).step(.1),t.add(this._mainDirectionalLight,\"castShadow\"),t.addColor(this._params.mainDirLight,\"color\").onChange(i=>this._mainDirectionalLight.color=new THREE.Color(i)),t.add(this._mainDirectionalLight.position,\"x\").min(-10).max(10).step(.1).onChange(()=>this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0))),t.add(this._mainDirectionalLight.position,\"y\").min(-10).max(50).step(.1).onChange(()=>this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0))),t.add(this._mainDirectionalLight.position,\"z\").min(-10).max(10).step(.1).onChange(()=>this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0)))}if(this._secondDirectionalLight){let t=i.addFolder(\"Second Directional Light\");t.add(this._secondDirectionalLight,\"visible\"),t.add(this._secondDirectionalLight,\"intensity\").min(0).max(10).step(.1),t.add(this._secondDirectionalLight,\"castShadow\"),t.addColor(this._params.mainDirLight,\"color\").onChange(i=>this._mainDirectionalLight.color=new THREE.Color(i)),t.add(this._secondDirectionalLight.position,\"x\").min(-10).max(10).step(.1).onChange(()=>this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0))),t.add(this._secondDirectionalLight.position,\"y\").min(-10).max(50).step(.1).onChange(()=>this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0))),t.add(this._secondDirectionalLight.position,\"z\").min(-10).max(10).step(.1).onChange(()=>this._mainDirectionalLight.lookAt(new THREE.Vector3(0,0,0)))}}}}export{DefaultLightSetting as D};\n//# sourceMappingURL=default-light-setting-3329a5c3.js.map\n","import{S as vectorIsZero,T as disposeMesh,t as toRadiant,f as getGUI}from\"./rapi-access-413632b4.js\";import{E as EventDispatcher,L as LightSetting}from\"./pixotron-2f79bd46.js\";import{D as DefaultLightSetting}from\"./default-light-setting-3329a5c3.js\";var GLTF_EXPORTER_FILE_NAME=\"static/GLTFExporter-86edae059df3a219.js\";const ROTATION_TO_DETECT_SIDE=toRadiant(30);class RaycastHelper extends EventDispatcher{constructor(e,t,r,n){super(),this._offset=new THREE.Vector3(0,0,0),this._mode=void 0===n?1:n,this._scene=e,this._camera=t,this._raycaster=new THREE.Raycaster,this._raycaster.layers.enableAll(),this._inputManager=r,this._addInputListeners(r),this._planeBottom=new THREE.Plane(new THREE.Vector3(0,1,0)),this._planeFront=new THREE.Plane(new THREE.Vector3(0,0,1)),this._planeSide=new THREE.Plane(new THREE.Vector3(1,0,0))}_addInputListeners(e){e.addEventListener(3,e=>{this._findCandidate(e.positionRelative)},this),e.addEventListener(5,e=>{this._findSelection(e.positionRelative)},this),e.addEventListener(6,e=>{this._findHover(e.positionRelative,e.type)},this),e.addEventListener(0,e=>{this._onDragStart(e.positionRelative)},this),e.addEventListener(1,e=>{this._onDrag(e.positionRelative)},this),e.addEventListener(2,e=>{this._onDragEnd(e.positionRelative)},this),e.addEventListener(9,e=>{this._onRotate(e.positionRelative,e.rotation)},this),e.addEventListener(10,()=>{this._currentRotate=null},this)}_findCandidate(e){this._intersection(e)&&this._inputManager.onElementHit()}_findSelection(e){let t=this._intersection(e);t?t&&t.object.dispatchEvent({type:\"select\"}):this.dispatchEvent(3)}_findHover(e,t){const r=this._intersection(e);!r&&this._currentHover?(this._currentHover.dispatchEvent({type:\"hover_off\",attachment:{type:t}}),this._currentHover=null):r&&(this._currentHover&&this._currentHover.id!==r.object.id&&(this._currentHover.dispatchEvent({type:\"hover_off\",attachment:{type:t}}),this._currentHover=null),this._currentHover?this._currentHover.dispatchEvent({type:\"hover_move\",attachment:{intersection:r,type:t}}):(this._currentHover=r.object,this._currentHover.dispatchEvent({type:\"hover_on\",attachment:{intersection:r,type:t}})))}_intersection(e){const t=this._intersect(e);if(t.length<=0)return null;let r=t[0];return t.length>1&&this._currentHover&&this._currentDrag&&this._currentDrag.id!==this._currentHover.id&&t.forEach(e=>{e.object.id===this._currentHover.id&&e.object.userData.priority===this._currentHover.userData.priority&&r.object.userData.priority<=e.object.userData.priority&&(r=e)}),r}_intersect(e){this._raycaster.setFromCamera(e,this._camera);const t=[];return this._raycaster.intersectObjects(this._scene.children,!0).forEach(e=>{e.object.userData.hasListener&&t.push(e)}),t.length>=0?t.sort((e,t)=>e.object.userData.priority!==t.object.userData.priority?t.object.userData.priority-e.object.userData.priority:e.distance-t.distance):[]}_onDragStart(e){let t=this._intersection(e);if(!t&&!this._currentDrag)return;if(t&&t.object.userData.roomleId===this._rootComponentId)return;!this._currentDrag&&t&&(this._currentDrag=t.object,this._currentDrag.dispatchEvent({type:\"drag_start\"}));let r=this._currentDrag.parent;r&&r.computeBoundingBox&&(r.computeBoundingBox(),this._calculateOffset(r)),this._positionPlanes(r)}_onDrag(e){if(!this._currentDrag)return;this._raycaster.setFromCamera(e,this._camera);let t,r=new THREE.Vector3(0,0,-5);this._raycaster.ray.intersectPlane(this._planeBottom,r);let n=this._getDistanceToCamera(r),a=this._camera.userData.yaw;if(0===this._mode)this._currentDragOffset||(this._currentDragOffset=r.clone().sub(this._currentDrag.parent.position.clone())),t=r.clone().sub(this._currentDragOffset),t.y=this._currentDrag.parent.position.y;else{let e=new THREE.Vector3(0,0,0),i=new THREE.Vector3(0,0,0);this._raycaster.ray.intersectPlane(this._planeFront,e),this._raycaster.ray.intersectPlane(this._planeSide,i);let o=this._getDistanceToCamera(i),s=this._getDistanceToCamera(e);a>=-ROTATION_TO_DETECT_SIDE&&a<=ROTATION_TO_DETECT_SIDE?t=n<s?r.clone():e.clone():n<s&&n<o?t=r.clone():s<n&&s<o?t=e.clone():o<n&&o<s&&(t=i.clone()),t.sub(this._offset)}this._currentDrag.dispatchEvent({type:\"drag\",attachment:{position:t}})}_getDistanceToCamera(e){let t=e.clone().sub(this._camera.position).length();return vectorIsZero(e)&&(t=Number.POSITIVE_INFINITY),t}_onDragEnd(e){this._currentDrag&&(this._currentDrag.dispatchEvent({type:\"drag_end\",attachment:{position:e}}),this._currentDrag=null,this._currentDragOffset=null)}_onRotate(e,t){if(!this._currentRotate){let t=this._intersection(e);if(!t)return;this._currentRotate=t.object}this._currentRotate.dispatchEvent({type:\"rotate\",attachment:{rotation:t}})}_positionPlanes(e){0===this._mode?(this._planeBottom.constant=0,this._camera.userData&&this._camera.userData.pitch&&this._camera.userData.pitch<0&&(this._planeBottom.constant=-3)):e&&e.boundingBox&&this._rootComponentPosition&&(this._planeBottom.constant=-e.boundingBox.getCenter(new THREE.Vector3).y-this._rootComponentPosition.y,this._planeSide.constant=2*-e.boundingBox.getSize(new THREE.Vector3).x+e.boundingBox.getCenter(new THREE.Vector3).x,this._camera.userData.yaw>0&&(this._planeSide.constant*=-1),this._bounds&&(this._planeFront.constant=this._bounds.z/2+e.boundingBox.getCenter(new THREE.Vector3).z))}_calculateOffset(e){e&&e.boundingBox&&(this._offset.copy(e.boundingBox.getCenter(new THREE.Vector3)),this._offset.applyQuaternion(e.getWorldQuaternion(new THREE.Quaternion)))}update(e,t,r){if(e&&(this._bounds=e),t&&(this._rootComponentPosition=t),r){this._backgroundScene=r;let e=this._backgroundScene.children[0];e instanceof THREE.Mesh&&e.geometry.computeBoundingBox()}}clear(){this._currentDrag&&disposeMesh(this._currentDrag),this._currentHover&&disposeMesh(this._currentHover)}enableDragIn(e){this._currentDrag=e}setRootComponentId(e){this._rootComponentId=e}setCamera(e){this._camera=e}setScene(e){this._scene=e}}class TopImageLightSetting extends LightSetting{constructor(e,t){super(e,t),this._params={ambientLight:{color:\"#ffffff\"}},this._ambientLight=new THREE.AmbientLight(new THREE.Color(this._params.ambientLight.color),1.2),this._ambientLight.layers.set(1),this.addToScene()}needsBounds(){return!1}addToScene(){this._scene.add(this._ambientLight)}removeFromScene(){this._scene.remove(this._ambientLight)}reload(){this.removeFromScene(),this.addToScene()}showGUI(){let e=getGUI();if(e&&this._ambientLight){let t=e.addFolder(\"Ambient Light\");t.add(this._ambientLight,\"visible\"),t.add(this._ambientLight,\"intensity\").min(0).max(5).step(.1),t.addColor(this._params.ambientLight,\"color\").onChange(e=>this._ambientLight.color=new THREE.Color(e))}}}let imageRenderer=null;const getImageRenderer=()=>(imageRenderer||(imageRenderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),imageRenderer.outputEncoding=THREE.sRGBEncoding,imageRenderer.gammaFactor=2.2),imageRenderer),getCameraTargetForBBox=(e,t=0)=>{const r=e.getSize(new THREE.Vector3);return r.addScalar(t),{center:e.getCenter(new THREE.Vector3),bounds:r,diagonal:Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2)+Math.pow(r.z,2))}},preparePerspectiveImage=(e,t,r,n={})=>new Promise(a=>{const{size:i=1024}=n,o=getImageRenderer();o.setSize(i,i);const s=e.fog?e.fog.clone():null,c=e.background?e.background.clone():null;e.background=null,e.fog=null;let h=new DefaultLightSetting(e);t.layers.disable(2),t.layers.disable(5),_placeCameraForPerspectiveImage(t,r,-20,-30),o.render(e,t);const l=o.domElement.toDataURL();t.layers.enable(2),e.background=c,e.fog=s,h.removeFromScene(),a({image:l,width:i,height:i,blob:null})}),renderPerspectiveImage=(e,t,r,n,a,i)=>new Promise(n=>{i||(i=1024);const a=getImageRenderer();a.setSize(i,i);const o=e.fog?e.fog.clone():null,s=e.background?e.background.clone():null;e.background=null,e.fog=null,t.layers.disable(2),t.layers.disable(5),r?_placeCameraForPerspectiveImage(t,r,-20,-30):(t.aspect=1,t.updateProjectionMatrix()),a.render(e,t);const c=a.domElement.toDataURL();t.layers.enable(2),e.background=s,e.fog=o,n({image:c,width:i,height:i,blob:null})}),_placeCameraForPerspectiveImage=(e,t,r,n)=>{e.far=1e3,e.fov=15,e.aspect=1,e.position.copy(t.center),e.rotation.set(0,0,0),e.rotateY(toRadiant(n)),e.rotateX(toRadiant(r)),e.translateZ(3.8*t.diagonal),e.updateProjectionMatrix()},prepareTopImage=(e,t,r,n={})=>{const{showDimensions:a=!1}=n;return new Promise(n=>{const i=getImageRenderer();i.autoClear=!1;let o=new THREE.OrthographicCamera(-r.bounds.x/2,r.bounds.x/2,r.bounds.z/2,-r.bounds.z/2,.5);o.position.copy(r.center),o.rotateX(toRadiant(-90)),o.translateZ(r.bounds.y+1),o.far=o.position.y+.5,o.layers.mask=65535;let s=200*r.bounds.x,c=200*r.bounds.z;if(s>4096||c>4096){let e=0;s>4096?e=s/4096:c>4096&&(e=c/4096),s/=e,c/=e}i.setSize(s,c);let h=e.fog?e.fog.clone():null,l=e.background?e.background.clone():null;e.background=null,e.fog=null;let d=a?new TopImageLightSetting(e):new DefaultLightSetting(e);o.layers.disable(2),o.layers.disable(5),a?o.layers.enable(6):o.layers.disable(6),i.render(e,o),t&&(i.clearDepth(),i.render(t,o));let _=i.domElement.toDataURL();o.layers.enable(2),o.layers.enable(5),e.background=l,e.fog=h,d.removeFromScene(),n({image:_,width:s,height:c,blob:null})})};export{GLTF_EXPORTER_FILE_NAME as G,RaycastHelper as R,prepareTopImage as a,getCameraTargetForBBox as g,preparePerspectiveImage as p,renderPerspectiveImage as r};\n//# sourceMappingURL=image-renderer-d4f0305a.js.map\n","import{_ as __decorate,i as inject,K as PREVIEW_MATERIAL_COLOR,O as PREVIEW_MATERIAL_ROUGHNESS,Q as PREVIEW_MATERIAL_METALNESS,H as createMaterial,J as addTexture}from\"./rapi-access-413632b4.js\";import{c as createBenchmarkMaterial,e as createBenchmarkTexture,f as setDescriptor,i as setWriteable}from\"./main-thread-to-worker-8efc9a92.js\";class PromiseQueue{constructor(e,t){this._waitingPromises=[],this._errorCallback=()=>{},Promise.allSettled=Promise.allSettled||(e=>Promise.all(e.map(e=>e.then(e=>({status:\"fulfilled\",value:e})).catch(e=>({status:\"rejected\",reason:e}))))),e&&this.registerCallback(e),t&&(this._errorCallback=t)}push(e){this._waitingPromises.push(e),Promise.all(this._waitingPromises).then(e=>{e.length===this._waitingPromises.length&&this._callback&&(this._callback(e),this._waitingPromises=[])},this._errorCallback)}finished(e=!1){return new Promise((t,a)=>{const r=e?\"allSettled\":\"all\";Promise[r](this._waitingPromises).then(e=>{if(\"allSettled\"===r){const a=[];e.forEach(({value:e,status:t})=>{\"fulfilled\"===t&&a.push(e)}),t(a)}else t(e)},e=>{a(e)})})}registerCallback(e){this._callback=e}unregisterCallback(){this._callback=null}get length(){return this._waitingPromises.length}}let MeshGenerator=(()=>{class e{constructor(e){this.materialQueue=new PromiseQueue,this._maxAnisotropy=1,this._maxTextures=16,this._textureLoader=new THREE.TextureLoader,this._creator_=e,this._previewMaterial=new THREE.MeshStandardMaterial({color:PREVIEW_MATERIAL_COLOR,roughness:PREVIEW_MATERIAL_ROUGHNESS,metalness:PREVIEW_MATERIAL_METALNESS}),this._environmentLoader.setEnvMap(this._previewMaterial)}_generateGeometry(e,t,a,r,s){let i;if(e&&this._cacheHolder.geometryCache.has(e))i=this._cacheHolder.geometryCache.get(e);else{i=new THREE.Geometry,i.faceVertexUvs=[],i.faceVertexUvs[0]=[];for(let e=0,a=t.length;e<a;e+=3)i.vertices.push(new THREE.Vector3(t[e]/1e3,t[e+2]/1e3,t[e+1]/-1e3));let o=0,h=0,l=0,c=0,n=0,m=0,_=0,d=0,u=0,p=0,g=[];for(let e=0,t=a.length;e<t;e+=3)h=e,l=e+1,c=e+2,n=3*a[h],m=3*a[l],_=3*a[c],g=[new THREE.Vector3(s[n],s[n+2],-1*s[n+1]),new THREE.Vector3(s[m],s[m+2],-1*s[m+1]),new THREE.Vector3(s[_],s[_+2],-1*s[_+1])],i.faces.push(new THREE.Face3(a[h],a[l],a[c],g)),d=2*a[h],u=2*a[l],p=2*a[c],i.faceVertexUvs[0][o]=[],i.faceVertexUvs[0][o][0]=new THREE.Vector2(r[d],r[d+1]),i.faceVertexUvs[0][o][1]=new THREE.Vector2(r[u],r[u+1]),i.faceVertexUvs[0][o][2]=new THREE.Vector2(r[p],r[p+1]),o++;e&&this._cacheHolder.geometryCache.set(e,i)}return i}changeMaterialOfMesh(e,t){e&&t?(e.material=t,e.material.transparent||0===e.material.opacity||e.material.transmission>0?(e.castShadow=!1,e.receiveShadow=!1):(e.castShadow=!0,e.receiveShadow=!0),e.material.needsUpdate=!0):console.warn(\"could not assign material to mesh\",{mesh:e},{material:t})}_createMaterial(e,t,a,r,s){if(this._cacheHolder.materialCache.has(e))t();else if(e.startsWith(\"benchmarkMaterial\")){let i=createBenchmarkMaterial(e),o=createMaterial(i,this._environmentLoader);this._loadBenchmarkTextures(i,o,r,s).then(t,a)}else this._rapiAccess.getMaterial(e).then(e=>{let i=createMaterial(e,this._environmentLoader);this._loadTextures(e,i,r,s).then(t,a)},a)}_loadBenchmarkTextures(e,t,a=1,r=1){return new Promise((s,i)=>{const o=createBenchmarkTexture(e.id);addTexture(this._dataSyncer.requestAsset(o.image,!0),o,t,this._maxAnisotropy,a/(0===o.mmWidth?1:o.mmWidth),r/(0===o.mmHeight?1:o.mmHeight),this._maxTextures).then(()=>{this._cacheHolder.materialCache.set(e.id,t),s()},i)})}_loadTextures(e,t,a=1,r=1){return new Promise((s,i)=>{if(!e.textures||e.textures&&0===e.textures.length)return this._cacheHolder.materialCache.set(e.id,t),s();this._rapiAccess.getTexturesOf(e).then(o=>{let h=[];o.forEach(e=>{h.push(addTexture(this._dataSyncer.requestAsset(e.image,!0),e,t,this._maxAnisotropy,a/(0===e.mmWidth?1:e.mmWidth),r/(0===e.mmHeight?1:e.mmHeight),this._maxTextures))}),Promise.all(h).then(()=>{this._cacheHolder.materialCache.set(e.id,t),s()},i)})})}_loadMaterial(e,t,a){return new Promise((r,s)=>{this._singlePromiseFactory.create(6,e,(r,s)=>this._createMaterial(e,r,s,t,a)).then(()=>{setTimeout(()=>r(this._cacheHolder.materialCache.get(e)),0)},s)})}_assignMaterial(e,t){return this._cacheHolder.materialCache.has(t)?(this.changeMaterialOfMesh(e,this._cacheHolder.materialCache.get(t)),Promise.resolve()):new Promise((a,r)=>{this._loadMaterial(t).then(t=>{this.changeMaterialOfMesh(e,t),a()},r)})}get maxAnisotropy(){return this._maxAnisotropy}set maxAnisotropy(e){this._maxAnisotropy=e}get maxTextures(){return this._maxTextures}set maxTextures(e){this._maxTextures=e}clear(){this._cacheHolder.clear()}_assignRGB(e,t){return new Promise(a=>{let r,s=\"rbg\"+JSON.stringify(t);this._cacheHolder.materialCache.has(s)?r=this._cacheHolder.materialCache.get(s):(r=new THREE.MeshStandardMaterial({color:t}),this._environmentLoader.setEnvMap(r),this._cacheHolder.materialCache.set(s,r)),this.changeMaterialOfMesh(e,r),setTimeout(()=>a(),0)})}_assignItem(e,t){return new Promise((a,r)=>{if(this._cacheHolder.materialCache.has(t))return this.changeMaterialOfMesh(e,this._cacheHolder.materialCache.get(t)),void a();this._rapiAccess.getItem(t).then(s=>{if(s.topImage)this._textureLoader.load(s.topImage,r=>{r.anisotropy=this._maxAnisotropy,r.wrapS=THREE.RepeatWrapping,r.wrapT=THREE.RepeatWrapping;let i=new THREE.Vector2(1,1);s.width>0&&(i.x=1/s.width),s.depth>0&&(i.y=1/s.depth),r.repeat.set(i.x,i.y);const o=new THREE.MeshPhysicalMaterial({map:r,roughness:.5,metalness:.1});this._environmentLoader.setEnvMap(o),this._cacheHolder.materialCache.set(t,o),this.changeMaterialOfMesh(e,o),setTimeout(()=>a(),0)});else{const e=\"can not set material, catalog item top image is not set\";console.warn(e),r(e)}},r)})}_generateMesh(e=0,t=null,a,r,s,i,o,h=!1){return this._plannerMeshGenerator.generateMesh(t,a,r,s,i,o)}setMaterialLoadedListener(e){this._materialLoaded=e}removeMaterialLoadedListener(){this._materialLoaded=void 0}}return __decorate([inject],e.prototype,\"_rapiAccess\",void 0),__decorate([inject],e.prototype,\"_environmentLoader\",void 0),__decorate([inject],e.prototype,\"_dataSyncer\",void 0),__decorate([inject],e.prototype,\"_singlePromiseFactory\",void 0),__decorate([inject],e.prototype,\"_cacheHolder\",void 0),__decorate([inject],e.prototype,\"_plannerMeshGenerator\",void 0),e})();class UiCallback{constructor(e){return this._isMute=!1,this._creator_=e,setDescriptor(this,\"_isMute\",{enumerable:!1,writable:!1}),setDescriptor(UiCallback.prototype,\"_setMute\",{enumerable:!1,writable:!1}),setDescriptor(UiCallback.prototype,\"mute\",{enumerable:!1,writable:!1}),setDescriptor(UiCallback.prototype,\"unmute\",{enumerable:!1,writable:!1}),new Proxy(this,this)}_setMute(e){setWriteable(this,\"_isMute\",!0),this._isMute=e,setWriteable(this,\"_isMute\",!1)}mute(){this._setMute(!0)}unmute(){this._setMute(!1)}get(e,t){return this._isMute&&\"function\"==typeof this[t]&&\"on\"===t.substr(0,2)?()=>{}:this[t]}}export{MeshGenerator as M,UiCallback as U};\n//# sourceMappingURL=ui-callback-908e86fb.js.map\n"],"sourceRoot":""}