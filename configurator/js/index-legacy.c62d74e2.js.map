{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/planner/store/planner-ui-state.ts","webpack:///./src/configurator/store/core-state.ts","webpack:///./src/configurator/store/ui-state.ts","webpack:///./src/configurator/components/-utils/overlays.ts","webpack:///./src/common/store/collection-view-state.ts","webpack:///./src/common/store/common-ui-state.ts","webpack:///./src/App.vue?f446","webpack:///./src/common/utils/parameters.ts","webpack:///./src/configurator/store/core-data.ts","webpack:///./src/App.vue?a4a9","webpack:///./src/configurator/components/Overlays.vue?ee3b","webpack:///./src/configurator/components/SceneContainer.vue?4284","webpack:///./src/App.vue?b00e","webpack:///./src/configurator/components/Overlays.vue?bb46","webpack:///./src/configurator/components/Overlays.vue?f231","webpack:///./src/configurator/components/Overlays.vue?6950","webpack:///./src/configurator/components/Overlays.vue","webpack:///./src/common/utils/performance.ts","webpack:///./src/common/store/index.ts","webpack:///./src/configurator/business-logic/sdk-connector-configurator.ts","webpack:///./src/viewer/business-logic/sdk-connector-viewer.ts","webpack:///./src/planner/utils/interaction.ts","webpack:///./src/planner/business-logic/sdk-connector-planner.ts","webpack:///./src/configurator/business-logic/sdk-connector.ts","webpack:///./src/configurator/embedding/exposed-analytics-callbacks.ts","webpack:///./src/configurator/embedding/exposed-api.ts","webpack:///./src/configurator/components/SceneContainer.vue?1f25","webpack:///./src/common/utils/access-restriction.ts","webpack:///./src/configurator/components/SceneContainer.vue?be90","webpack:///./src/configurator/components/SceneContainer.vue?a782","webpack:///./src/configurator/components/SceneContainer.vue","webpack:///./src/common/components/Loading.vue?ed91","webpack:///./src/common/components/Loading.vue?5b91","webpack:///./src/common/components/Loading.vue?9140","webpack:///./src/common/components/Loading.vue","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?640d","webpack:///./src/App.vue","webpack:///./src/configurator/plugins/sdk-connector-plugin.ts","webpack:///./src/common/plugins/analytics.ts","webpack:///./src/configurator/embedding/exposed-callbacks.ts","webpack:///./src/configurator/plugins/embedding-callbacks-plugin.ts","webpack:///./src/configurator/plugins/libs-plugin.ts","webpack:///./src/common/utils/compatibility.ts","webpack:///./src/main.ts","webpack:///./src/common/utils/script-loader.ts","webpack:///./src/common/utils/google-analytics.ts","webpack:///./src/configurator/embedding/helper.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","use","namespaced","PLANNER_UI_STATE_MUTATIONS","PLANNER_UI_STATE_ACTIONS","PLANNER_UI_STATE_GETTERS","initialState","selection","selectionPayload","isFullscreen","isLandscape","interactionsExpanded","isDesktop","lastRegularViewMode","wasDesktopBefore","showCatalog","catalogTags","sidebar","gettersImplementation","CATALOG_ROOT_TAG","state","currentCatalogRootTag","actions","SELECT_VIEW_MODE","commit","getters","rootState","isInitialSet","wasSwitchFromViewMode","SET_IS_DESKTOP","commonUiState","isInIframe","SET_IS_FULLSCREEN","isRegularLayout","USE_REGULAR_LAYOUT","SET_LAST_REGULAR_VIEW_MODE","showsDetails","SET_INTERACTIONS_EXPANDED","isExpanded","ELEMENT_EXPANDED","mutations","SET_SELECTION_PAYLOAD","payload","SET_SELECTION","SET_IS_LANDSCAPE","SET_SHOW_CATALOG","show","SET_CATALOG_ROOT_TAG","tags","plannerUiState","CORE_STATE_MUTATIONS","CORE_STATE_ACTIONS","CORE_STATE_GETTERS","label","catalogLabel","componentHasChildren","initialHash","currentHash","safeLabel","HAS_CONFIGURATION_CHANGE","UPDATE_HASH","hash","SET_INITIAL_HASH","SET_CURRENT_HASH","SET_LABEL","SET_CATALOG_LABEL","SET_COMPONENT_HAS_CHILDREN","coreState","BUTTON_ACTIONS","UI_STATE_MUTATIONS","UI_STATE_INTERAL_MUTATIONS","UI_STATE_ACTIONS","UI_STATE_GETTERS","selectedGroup","overlays","selectedActions","onlyShowAddons","activeAddon","currentSelection","initData","configuratorId","isExpandedForConfigure","isLoadingInProgress","currentVariants","showVariants","isConfigurator","isViewer","isPlanner","email","mobileLandscape","COLLECTION_VIEW_ELEMENTS","_state","_getters","coreData","parameters","addons","parameterElements","map","collectionViewElement","COLLECTION_VIEW_ADDON_ELEMENTS","SHOW_BACK_TO_WEBSITE","isViewOnly","COLLECTION_VIEW_VARIANTS","SELECT_GROUP","dispatch","parameterGroup","SET_SELECTED_GROUP","UPDATE_PARAMETERS","RESET_COLLECTION_VIEW","START_CONFIGURING","PAUSE_CONFIGURING","SELECTION_CHANGE","SET_SELECTED_ELEMENT","SHOW_ALL_COLLECTION_VIEW_ELEMENTS","SET_SHOW_VARIANTS","SET_IS_VIEW_ONLY","SET_IS_EXPANDED_FOR_CONFIGURE","USE_CONFIGURATOR","SET_IS_CONFIGURATOR","SET_IS_VIEWER","SET_IS_PLANNER","USE_VIEWER","USE_PLANNER","SET_ACTION_SELECTED","action","includes","SET_ACTION_DESELECTED","indexOf","SET_OVERLAY_STATE","overlay","open","CLOSE_ALL_OVERLAYS","SHOW_ONLY_ADDONS","SET_ACTIVE_ADDON","possibleChild","SET_CURRENT_SELECTION","SET_INIT_DATA","SET_IS_LOADING_IN_PROGRESS","SET_CURRENT_VARIANTS","variants","isShown","SET_EMAIL","uiState","OVERLAYS","initialOverlaysState","PART_LIST","NO_DOCKING","SAVE_DRAFT","VARIANT_WARNING","OPEN_AR","EXPORT_3D","ELEMENT_DISABLED","getInitialCollectionViewState","selected","gridView","filter","showAllAsList","search","userInitiatedSearch","COLLECTION_VIEW_STATE_MUTATIONS","GRID_VIEW_STATE_MUTATIONS","SET_SEARCH","toLowerCase","TOGGLE_LIST_DISPLAY_TYPE","SET_FILTER","SET_USER_INITIATED_SEARCH","collectionViewUiStateHelper","lastRequestedId","COMMON_UI_STATE_MUTATIONS","SET_IS_IN_IFRAME","SET_LAST_REQUESTED_ID","id","getAllMaterials","groups","reduce","acc","group","materials","mapAddons","addonTag","tagToCollectionViewElement","identifier","tagToCollectionViewElements","items","mapVariants","mapCatalogRootTag","filterAndMapAddons","filteredAddons","addon","possibleChildren","addonsHaveGroups","possibleChildTag","extractRootComponentId","separator","split","join","getCurrentVariants","async","api","variantChangeMap","rootComponentId","variantRootCompopnentId","tagId","getTagById","include","additionalContents","getAdditionalContentsOf","additionalContentsMap","Map","forEach","additionalContent","set","itemId","item","sketch","has","content","perspectiveImage","prepareParametersForUi","part","sort","p1","p2","CORE_DATA_MUTATIONS","CORE_DATA_ACTIONS","CORE_DATA_GETTERS","partList","fullList","originPart","perMainComponent","bounds","currencySymbol","price","CURRENT_PRICE","HAS_NON_GROUP_ADDONS","pct","pc","debug","UPDATE_GROUPS","UPDATE_ADDONS","UPDATE_PART_LIST","UPDATE_BOUNDS","UPDATE_CURRENCY","UPDATE_PRICE_VALUE","UPDATE_PRICE","render","_vm","this","_h","$createElement","_c","_self","staticClass","_e","$store","attrs","updateCookies","staticRenderFns","class","hasOpenOverlay","closeOverlays","extend","components","OpenAR","Export3D","PartList","NoDocking","VariantWarning","SaveDraft","ElementDisabled","computed","methods","component","initialLoadMarkKey","regularLoadMarkKey","ensureMark","performance","mark","getEntriesByName","startTime","Number","MAX_SAFE_INTEGER","clearMarks","addLoadMark","calcTiming","entries","timingMarkKey","start","end","log","warn","MUTATIONS","Store","store","analytics","_configurator","_initWaiters","_uiCallbacks","_store","_analytics","sdkWrapper","element","sdkMain","getConfigurator","configurator","getApi","hasPlanner","init","initConfigurator","REGISTERED_CALLBACKS","clear","addCallback","catalogName","rapiItemLabel","rootComponentLabel","_updateParameterGroups","_updateAddons","PARTLIST","_hash","_label","hasChildren","disableMultiselect","MULTISELECT","visible","DIMENSIONS","selectionMode","isRoot","callback","onSelectionChange","onSelectionCancel","setPrice","childDbId","_childDockId","parentDbId","ga","trackEvent","INTERACTION","timing","time","Math","round","Date","getTime","responseStart","trackTiming","TIMING","KERNEL_IS_READY","rapiPath","ids","trackContentError","trackError","fun","allowMultiple","knownUndefined","callbacks","oldCallback","arguments","parameter","isRaw","getCurrentSelection","paramType","paramKey","setParameter","listener","index","grouping","collapsed","size","parameterGroups","Array","from","values","g1","g2","_checkParameterGroups","groupToSelect","find","param","isGroupStillThere","setActiveGroupInView","_updateParameters","possibleChildrenTags","addonGroupKeys","Set","storedAddons","add","storedGroups","missingGroups","groupKey","g","allParameterGroups","getParameterGroups","missingGroup","SdkConnectorViewer","_viewer","getGlbViewer","viewer","initViewer","isCorrectSelectionPayload","currentlySelected","asyncSelectionData","configurationRuntimeId","_planner","_sdkWrapper","_currentPlan","_lastPlanId","getPlanner","planner","initPlanner","plannerApi","_mode","objectType","payloadPromise","payloadData","rapiAccess","getRapiAccess","plan","getPlan","loadPlan","EMPTY_PLAN","loadPlanXml","insertObject","createNewPlan","planObjects","_getCurrentPlanXML","image","token","userId","signinUser","VUE_APP_DUMMY_USER","VUE_APP_DUMMY_PASSWORD","setCurrentToken","user","parent","preparePerspectiveImage","thumbnail","savedPlan","savePlan","removeCurrentToken","planInteractionHandler","getPlanInteractionHandler","getPlanXML","SDK_MODULES","ExposedAnalyticsCallbacks","onGATracking","_args","sdkConnector","messageHandler","sdk","exposedCallbacks","_isWebsiteReady","_handleMessage","args","_event","WEBSITE_READY","_websiteReady","namespaces","methodName","instance","SDK","_sdk","_exposedCallbacks","_sdkConnector","_exposedAnalyticsCallbacks","availableUiCallbacks","UI","availableUiMethods","getPrototypeOf","availableSdkMethods","availableSdkCallbacks","availableAnalyticsCallbacks","ANALYTICS","callbackName","fullname","callbackShortName","pop","configuratorConnector","connector","sendMessage","_forwardSdkCallbacks","SETUP","setMessageExecution","RubensAPI","loadObject","configurationString","startsWith","loadConfigurationString","onBackToWebsite","history","functionArgs","giveGaConsent","onResize","consent","gaConsent","featureFlags","realPartList","onPartListUpdate","embeddingCallbacks","loadInProgress","someLoadDone","_loadWaiters","_messageHandler","_initWaitersConfiguratorConnector","_initWaitersViewerConnector","_initWaitersPlannerConnector","_waitForCanvasElementCallback","_canvasElement","_configuratorSettingsCache","_connectorConfigurator","_connectorViewer","_connectorPlanner","_embeddingCallbacks","plannerConnector","viewerConnector","PLANNER","VIEWER","viewerApi","configuratorApi","saveCurrentConfiguration","back","addUiCallback","removeUiCallback","tenant","getTenant","hostname","configuratorObject","getConfiguratorSettings","hasGlobalWildCard","allowedHosts","moc","isObjectId","isGlb","isIdAGlb","loadStaticItem","loadConfigurableItem","loadConfiguration","_startLoading","initCanvasElement","options","loadPlanBasedOnObjectId","_finishLoading","configurationId","_fetchVariants","_execLoadingConfiguratorProcess","loadConfigurationById","loadPlanObjectId","planObjectId","syncPlanObjectToView","componentId","JSON","parse","confString","configurableItemId","loadConfigurableItemById","waitForLoad","getCurrentConfigurationHash","getItem","configuration","_needsInit","moduleToActivate","_waitForCanvasElement","configuratorSettings","cleanUpHistory","giveConsent","saveCurrentPlan","moduleToUse","isCurrentlyConfigurator","isCurrentlyViewer","isCurrentlyPlanner","isInitialBoot","CONFIGURATOR","method","kernelParts","INIT_LOADING_SCREEN_CLOSE","ref","_v","_s","errorMsg","isShowSceneAllowed","isCorrectDomain","hasActivePackage","isCorrectConfiguratorDomain","trackWrongDomain","trackNoActivePackage","$sdkConnector","canvasElementReady","$refs","canvasContainer","initSceneContainer","isSceneActive","$analytics","_checkAccessRights","sceneContainer","ConfiguratorMain","loading","Loading","delay","ViewerMain","BackToWebsite","PlannerMain","CookieBanner","Overlays","SceneContainer","acceptedCookies","cookie","some","test","isInIframeStore","watch","skin","cssProperty","documentElement","style","setProperty","innerWidth","innerHeight","TRACKING","navigator","userAgent","$embeddingCallbacks","setViewModes","addEventListener","removeEventListener","SdkConnectorPlugin","Vue","AnalyticsPlugin","useTracking","ExposedCallbacks","onRequestProduct","labels","onUseFullPage","onButtonClicked","onRequestPlan","planId","EmbeddingCallbacksPlugin","Libs","jsPDF","default","autoTable","LibsPlugin","$libs","logDeprecation","version","DEPRECATION","checkDeprecations","inIframe","uiInitData","isProductionBuild","config","productionTip","devtools","silent","bootApp","queryParams","MessageHandler","finalInitData","setGlobalInitData","translationSource","locale","translations","setDimension","INIT_ID","CONFIGURATOR_ID","app","h","App","$mount","setMessageHandler","createExposedApi","startedInIframe","SCRIPT_CACHE","SCRIPT_ID_CACHE","SCRIPT_WAITER","attachScript","url","ScriptLoader","GA_DIMENSIONS","CLIENT_ID","WINDOW_ID","HIT_ID","HIT_TIME","HIT_TYPE","HIT_SOURCE","VISIBILITY_STATE","GA_DIMENSIONS_ORDER","GA_METRICS","RESPONSE_END_TIME","DOM_LOAD_TIME","WINDOW_LOAD_TIME","TIME_TO_FIRST_BTYE","GA_METRICS_ORDER","GA_CUSTOM","GA_HIT_TYPE","GA_ACTION_TYPE","CUSTOM_ACTION_TYPE","CONTENT_ERROR_PREFIX","DEBUG_TRACKING_LOCALLY","GA_NULL_VALUE","GA_CATEGORY","MAX_QUEUE_LENGTH","_queue","_trackingId","_callbacks","_gaReady","_useTracking","customMap","_setObjectProperties","DIMENSION","METRIC","settings","custom_map","sendBeacon","transport_type","keys","visibilityState","anonymize_ip","tracker","buildTaskKey","originalBuildHitTask","customMapSettingsSettings","model","qt","_findDimension","String","_settings","_setSettings","_trackErrors","_sendNavigationTimingMetrics","_execCommand","page_title","page_path","location","pathname","page_location","gtag","requestIdleCallback","_loadLibScript","_flushQueue","category","fieldsObject","event_category","event_label","_send","EVENT","assign","TRACK_TIMING","dimension","dimensions","specialErrorName","errorEvent","ErrorEvent","lineno","filename","_trackErrorEvent","_gtag","fetch","queuedArgs","input","output","gaKey","order","description","fatal","EXCEPTION","loadErrorEvents","__e","q","colno","stack","ERROR","nonInteraction","_trackException","readyState","nt","navStart","navigationStart","responseEnd","domLoaded","domContentLoadedEventStart","windowLoaded","loadEventStart","timeToFirstByte","fetchStart","allValuesAreValid","every","NAVIGATION_TIMING","startConfiguring","triggerRequestProduct","REQUESTPRODUCT","pricing","storedPartList","useRealPartList","sendUserAction","CONVERSION","actionId","actionLabel","triggerRequestPlan","REQUESTPLAN","kernelPlanObjects","getObjects"],"mappings":"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","file":"js/index-legacy.c62d74e2.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"index\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \"-legacy.\" + {\"chunk-0c957810\":\"61da2e5b\",\"chunk-11305649\":\"fcaf1e5a\",\"chunk-21063757\":\"ef7e81b4\",\"chunk-03daa8f7\":\"62b67810\",\"chunk-1fd0cc7e\":\"7d59a653\",\"chunk-2a38272e\":\"4b86b140\",\"chunk-2d0c1cce\":\"c7e3c9e9\",\"chunk-2d22c2e4\":\"11c1a807\",\"chunk-3336d37a\":\"800a0c98\",\"chunk-4dbfc12e\":\"abe8d390\",\"chunk-5c4e2ae8\":\"3e06e899\",\"chunk-6a0c8e8c\":\"835f1abc\",\"chunk-6bdf8bd2\":\"b8050b23\",\"chunk-71180739\":\"01f16df9\",\"chunk-75046c5d\":\"360e03b4\",\"chunk-a474db44\":\"80579264\",\"chunk-2d0af61d\":\"08bd848e\",\"chunk-d1e8c618\":\"968ec51f\",\"chunk-3cdbd03f\":\"bfa0a09e\",\"chunk-5b403032\":\"ce96c162\",\"chunk-62cb4e26\":\"a3126ec0\",\"chunk-66be89ce\":\"163b9cb6\",\"chunk-6d36a2bc\":\"380b568f\",\"chunk-2d0cb76d\":\"bf883299\",\"chunk-6b2d5f05\":\"b6cb8148\",\"chunk-3b09de03\":\"5108a8b8\",\"chunk-61de2ad2\":\"da1cf5c1\",\"chunk-6fbbdaa2\":\"7496bd62\",\"chunk-75827ee6\":\"ebc163b7\",\"chunk-08ca9b08\":\"8c1d5c26\",\"chunk-2d216214\":\"3fd22800\",\"chunk-2d216257\":\"1eff1fbf\",\"chunk-84c712ee\":\"d164d873\",\"chunk-2d0b16c2\":\"d4cf3d8a\",\"chunk-2d0b23c2\":\"822e0f62\",\"chunk-2d0e55df\":\"fd189fa9\",\"chunk-2d0e9222\":\"90a0532c\",\"chunk-2d208aa7\":\"3ce30e51\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-0c957810\":1,\"chunk-11305649\":1,\"chunk-21063757\":1,\"chunk-03daa8f7\":1,\"chunk-1fd0cc7e\":1,\"chunk-2a38272e\":1,\"chunk-3336d37a\":1,\"chunk-4dbfc12e\":1,\"chunk-5c4e2ae8\":1,\"chunk-6a0c8e8c\":1,\"chunk-6bdf8bd2\":1,\"chunk-71180739\":1,\"chunk-75046c5d\":1,\"chunk-6b2d5f05\":1,\"chunk-3b09de03\":1,\"chunk-61de2ad2\":1,\"chunk-6fbbdaa2\":1,\"chunk-75827ee6\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-0c957810\":\"ab22c084\",\"chunk-11305649\":\"a4578a91\",\"chunk-21063757\":\"8d603e7c\",\"chunk-03daa8f7\":\"32ebcb57\",\"chunk-1fd0cc7e\":\"1422246b\",\"chunk-2a38272e\":\"c87f331d\",\"chunk-2d0c1cce\":\"31d6cfe0\",\"chunk-2d22c2e4\":\"31d6cfe0\",\"chunk-3336d37a\":\"eb67a703\",\"chunk-4dbfc12e\":\"9b1852aa\",\"chunk-5c4e2ae8\":\"a087707f\",\"chunk-6a0c8e8c\":\"e640bc56\",\"chunk-6bdf8bd2\":\"0275a644\",\"chunk-71180739\":\"8e951474\",\"chunk-75046c5d\":\"b2421eda\",\"chunk-a474db44\":\"31d6cfe0\",\"chunk-2d0af61d\":\"31d6cfe0\",\"chunk-d1e8c618\":\"31d6cfe0\",\"chunk-3cdbd03f\":\"31d6cfe0\",\"chunk-5b403032\":\"31d6cfe0\",\"chunk-62cb4e26\":\"31d6cfe0\",\"chunk-66be89ce\":\"31d6cfe0\",\"chunk-6d36a2bc\":\"31d6cfe0\",\"chunk-2d0cb76d\":\"31d6cfe0\",\"chunk-6b2d5f05\":\"62aa4bb8\",\"chunk-3b09de03\":\"88dba543\",\"chunk-61de2ad2\":\"b2421eda\",\"chunk-6fbbdaa2\":\"ab9d4f22\",\"chunk-75827ee6\":\"285d2e29\",\"chunk-08ca9b08\":\"31d6cfe0\",\"chunk-2d216214\":\"31d6cfe0\",\"chunk-2d216257\":\"31d6cfe0\",\"chunk-84c712ee\":\"31d6cfe0\",\"chunk-2d0b16c2\":\"31d6cfe0\",\"chunk-2d0b23c2\":\"31d6cfe0\",\"chunk-2d0e55df\":\"31d6cfe0\",\"chunk-2d0e9222\":\"31d6cfe0\",\"chunk-2d208aa7\":\"31d6cfe0\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\",\"chunk-common\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import Vue from 'vue';\nimport Vuex, {ActionTree, GetterTree, Module, MutationTree} from 'vuex';\nimport {SharedUiState, StoreState} from '@/common/store';\nimport {Nullable} from '@/common/utils/types';\nimport {SelectionPayload} from '@roomle/web-sdk/lib/definitions/planner-core/src/roomle-planner-ui-callback';\nimport {UI_STATE_GETTERS} from '@/configurator/store/ui-state';\nimport {RapiTagForUi} from '@roomle/web-sdk/lib/definitions/typings/rapi-types';\nimport {mapCatalogRootTag} from '@/common/utils/parameters';\nimport {CollectionViewElement} from '@/configurator/components/collection-view/-utils/types';\nimport {COLLECTION_VIEW_STATE_MUTATIONS, getInitialCollectionViewState} from '@/common/store/collection-view-state';\n\nVue.use(Vuex);\n\nconst namespaced: boolean = false;\n\ntype SelectionType = 'static' | 'configuration';\n\nexport interface PlannerUiState extends SharedUiState {\n  selection: Nullable<SelectionType>;\n  selectionPayload: Nullable<SelectionPayload>;\n  showCatalog: boolean;\n  catalogTags: Nullable<RapiTagForUi[]>;\n}\n\nexport enum PLANNER_UI_STATE_MUTATIONS {\n  SET_SELECTION_PAYLOAD = 'PLANNER_UI_STATE_setSelectionPayload',\n  SET_SELECTION = 'PLANNER_UI_STATE_setSelection',\n  SET_IS_LANDSCAPE = 'PLANNER_UI_STATE_setIsLandscape',\n  SET_INTERACTIONS_EXPANDED = 'PLANNER_UI_STATE_setInteractionsExpanded',\n  SET_IS_FULLSCREEN = 'PLANNER_UI_STATE_setIsFullscreen',\n  SET_IS_DESKTOP = 'PLANNER_UI_STATE_setIsDesktop',\n  SET_LAST_REGULAR_VIEW_MODE = 'PLANNER_UI_STATE_SET_LAST_REGULAR_VIEW_MODE',\n  SET_SHOW_CATALOG = 'PLANNER_UI_STATE_SET_SHOW_CATALOG',\n  SET_CATALOG_ROOT_TAG = 'PLANNER_UI_STATE_SET_CATALOG_ROOT_TAG',\n}\n\nexport enum PLANNER_UI_STATE_ACTIONS {\n  SELECT_VIEW_MODE = 'PLANNER_UI_STATE_SELECT_VIEW_MODE',\n  SET_INTERACTIONS_EXPANDED = 'PLANNER_UI_STATE_SET_INTERACTIONS_EXPANDED',\n}\n\nexport enum PLANNER_UI_STATE_GETTERS {\n  CATALOG_ROOT_TAG = 'PLANNER_UI_STATE_CATALOG_ROOT_TAG',\n}\n\nconst initialState: PlannerUiState = {\n  selection: null,\n  selectionPayload: null,\n  isFullscreen: false,\n  isLandscape: false,\n  interactionsExpanded: true,\n  isDesktop: false,\n  lastRegularViewMode: null,\n  wasDesktopBefore: false,\n  showCatalog: false,\n  catalogTags: null,\n  sidebar: getInitialCollectionViewState(),\n};\n\nconst gettersImplementation: GetterTree<PlannerUiState, StoreState> = {\n  [PLANNER_UI_STATE_GETTERS.CATALOG_ROOT_TAG](state): CollectionViewElement[] {\n    const currentCatalogRootTag = state.catalogTags;\n    return (currentCatalogRootTag) ? [\n      ...mapCatalogRootTag(currentCatalogRootTag),\n    ] : [];\n  },\n};\n\nconst actions: ActionTree<PlannerUiState, StoreState> = {\n  [PLANNER_UI_STATE_ACTIONS.SELECT_VIEW_MODE]({commit, state, getters, rootState}, isDesktop: boolean): void {\n    // PLEASE REFACTOR ME!! THIS IS SO CONFUSING...\n\n    const isInitialSet = state.isDesktop === null;\n    const wasSwitchFromViewMode = state.lastRegularViewMode !== isDesktop;\n\n    commit(PLANNER_UI_STATE_MUTATIONS.SET_IS_DESKTOP, isDesktop);\n    if (isInitialSet && rootState.commonUiState.isInIframe && !isDesktop) {\n      commit(PLANNER_UI_STATE_MUTATIONS.SET_IS_FULLSCREEN, true);\n    }\n    const isRegularLayout = getters[UI_STATE_GETTERS.USE_REGULAR_LAYOUT];\n    if (isRegularLayout) {\n      commit(PLANNER_UI_STATE_MUTATIONS.SET_LAST_REGULAR_VIEW_MODE, isDesktop);\n    }\n\n    if (isInitialSet || (wasSwitchFromViewMode && isRegularLayout)) {\n      if (!state.isDesktop && state.sidebar.showsDetails) {\n        commit(PLANNER_UI_STATE_MUTATIONS.SET_INTERACTIONS_EXPANDED, true);\n      } else {\n        commit(PLANNER_UI_STATE_MUTATIONS.SET_INTERACTIONS_EXPANDED, state.isDesktop);\n      }\n    }\n\n    // if (wasSwitchFromViewMode && rootState.commonUiState.isInIframe) {\n    //   if (!state.isDesktop && !state.isExpandedForConfigure && !state.initData?.mobileLandscape) {\n    //     dispatch(UI_STATE_ACTIONS.PAUSE_CONFIGURING);\n    //   } else {\n    //     dispatch(UI_STATE_ACTIONS.START_CONFIGURING);\n    //   }\n    // }\n  },\n\n  [PLANNER_UI_STATE_ACTIONS.SET_INTERACTIONS_EXPANDED]({commit, state}, isExpanded: boolean): void {\n    commit(PLANNER_UI_STATE_MUTATIONS.SET_INTERACTIONS_EXPANDED, isExpanded);\n    if (!state.interactionsExpanded && !state.isDesktop) {\n      commit(COLLECTION_VIEW_STATE_MUTATIONS.ELEMENT_EXPANDED, {state: state.sidebar, value: false});\n    }\n  },\n};\n\nconst mutations: MutationTree<PlannerUiState> = {\n  [PLANNER_UI_STATE_MUTATIONS.SET_SELECTION_PAYLOAD](state: PlannerUiState, payload: SelectionPayload) {\n    state.selectionPayload = payload;\n  },\n  [PLANNER_UI_STATE_MUTATIONS.SET_SELECTION](state: PlannerUiState, selection: Nullable<SelectionType>) {\n    state.selection = selection;\n  },\n  [PLANNER_UI_STATE_MUTATIONS.SET_IS_LANDSCAPE](state: PlannerUiState, isLandscape: boolean) {\n    state.isLandscape = isLandscape;\n  },\n  [PLANNER_UI_STATE_MUTATIONS.SET_INTERACTIONS_EXPANDED](state: PlannerUiState, isExpanded: boolean) {\n    state.interactionsExpanded = isExpanded;\n  },\n  [PLANNER_UI_STATE_MUTATIONS.SET_IS_DESKTOP](state: PlannerUiState, isDesktop: boolean) {\n    state.wasDesktopBefore = state.isDesktop === null ? false : state.isDesktop;\n    state.isDesktop = isDesktop;\n  },\n  [PLANNER_UI_STATE_MUTATIONS.SET_LAST_REGULAR_VIEW_MODE](state: PlannerUiState, isDesktop: boolean) {\n    state.lastRegularViewMode = isDesktop;\n  },\n  [PLANNER_UI_STATE_MUTATIONS.SET_SHOW_CATALOG](state: PlannerUiState, show: boolean) {\n    state.showCatalog = show;\n  },\n  [PLANNER_UI_STATE_MUTATIONS.SET_CATALOG_ROOT_TAG](state: PlannerUiState, tags: RapiTagForUi[]) {\n    state.catalogTags = tags;\n  },\n};\n\nexport const plannerUiState: Module<PlannerUiState, StoreState> = {\n  namespaced,\n  state: initialState,\n  getters: gettersImplementation,\n  actions,\n  mutations,\n};\n","import Vue from 'vue';\nimport Vuex, {ActionTree, GetterTree, Module, MutationTree} from 'vuex';\nimport {StoreState} from '@/common/store';\nimport {Nullable} from '@/common/utils/types';\n\nVue.use(Vuex);\n\nconst namespaced: boolean = false;\n\nexport interface CoreState {\n  label: string;\n  componentHasChildren: boolean;\n  catalogLabel: Nullable<string>;\n  initialHash: Nullable<string>;\n  currentHash: Nullable<string>;\n}\n\nexport enum CORE_STATE_MUTATIONS {\n  SET_LABEL = 'setLabel',\n  SET_COMPONENT_HAS_CHILDREN = 'setComponentHasChildren',\n  SET_CATALOG_LABEL = 'SET_CATALOG_LABEL',\n  SET_INITIAL_HASH = 'SET_INITIAL_HASH',\n  SET_CURRENT_HASH = 'SET_CURRENT_HASH',\n}\n\nexport enum CORE_STATE_ACTIONS {\n  SET_LABEL = 'setLabel',\n  SET_COMPONENT_HAS_CHILDREN = 'setComponentHasChildren',\n  UPDATE_HASH = 'UPDATE_HASH',\n}\n\nexport enum CORE_STATE_GETTERS {\n  HAS_CONFIGURATION_CHANGE = 'HAS_CONFIGURATION_CHANGE',\n}\n\nconst initialState: CoreState = {\n  label: '',\n  catalogLabel: null,\n  componentHasChildren: false,\n  initialHash: null,\n  currentHash: null,\n};\n\nconst getters: GetterTree<CoreState, StoreState> = {\n  safeLabel(state: CoreState): string {\n    const safeLabel = state.label || '';\n    return safeLabel;\n  },\n  [CORE_STATE_GETTERS.HAS_CONFIGURATION_CHANGE](state: CoreState) {\n    return state.initialHash !== state.currentHash;\n  },\n};\n\nconst actions: ActionTree<CoreState, StoreState> = {\n  [CORE_STATE_ACTIONS.UPDATE_HASH]({commit, state}, hash: string): void {\n    if (!state.initialHash) {\n      commit(CORE_STATE_MUTATIONS.SET_INITIAL_HASH, hash);\n    }\n    commit(CORE_STATE_MUTATIONS.SET_CURRENT_HASH, hash);\n  },\n};\n\nconst mutations: MutationTree<CoreState> = {\n  [CORE_STATE_MUTATIONS.SET_LABEL](state: CoreState, label: string) {\n    state.label = label;\n  },\n  [CORE_STATE_MUTATIONS.SET_CATALOG_LABEL](state: CoreState, label: string) {\n    state.catalogLabel = label;\n  },\n  [CORE_STATE_MUTATIONS.SET_COMPONENT_HAS_CHILDREN](state: CoreState, componentHasChildren: boolean) {\n    state.componentHasChildren = componentHasChildren;\n  },\n  [CORE_STATE_MUTATIONS.SET_INITIAL_HASH](state: CoreState, hash: string) {\n    state.initialHash = hash;\n  },\n  [CORE_STATE_MUTATIONS.SET_CURRENT_HASH](state: CoreState, hash: string) {\n    state.currentHash = hash;\n  },\n};\n\nexport const coreState: Module<CoreState, StoreState> = {\n  namespaced,\n  state: initialState,\n  getters,\n  actions,\n  mutations,\n};\n","import Vue from 'vue';\nimport Vuex, {ActionTree, GetterTree, Module, MutationTree} from 'vuex';\nimport {SharedUiState, StoreState} from '@/common/store';\nimport {Nullable} from '@/common/utils/types';\nimport {CORE_DATA_MUTATIONS, ParameterGroup} from '@/configurator/store/core-data';\nimport {KernelComponent, UiPossibleChild} from '@roomle/web-sdk/lib/definitions/typings/kernel';\nimport {addonsHaveGroups, filterAndMapAddons, mapAddons, mapVariants} from '@/common/utils/parameters';\nimport {initialOverlaysState, OVERLAYS, OverlaysOpenState} from '@/configurator/components/-utils/overlays';\nimport {UiInitData} from '@/configurator/embedding/types';\nimport {RapiTagForUi} from '@roomle/web-sdk/lib/definitions/typings/rapi-types';\nimport {COMMON_UI_STATE_MUTATIONS} from '@/common/store/common-ui-state';\nimport {CORE_STATE_MUTATIONS} from '@/configurator/store/core-state';\nimport {COLLECTION_VIEW_STATE_MUTATIONS, getInitialCollectionViewState} from '@/common/store/collection-view-state';\n\nVue.use(Vuex);\n\nconst namespaced: boolean = false;\n\nexport enum BUTTON_ACTIONS {\n  AR = 0,\n  PARTLIST = 1,\n  MULTISELECT = 2,\n  DIMENSIONS = 3,\n  FULLSCREEN = 4,\n  RESET_CAMERA = 5,\n  RENDER_IMAGE = 6,\n}\n\nexport interface SceneSelection {\n  selectionMode: string;\n  hasChildren: boolean;\n  isRoot: boolean;\n  components: KernelComponent[];\n}\n\nexport interface UiState extends SharedUiState {\n  selectedGroup: Nullable<ParameterGroup>;\n  overlays: OverlaysOpenState;\n  selectedActions: BUTTON_ACTIONS[];\n  lastRegularViewMode: Nullable<boolean>;\n  onlyShowAddons: boolean;\n  activeAddon: Nullable<UiPossibleChild>;\n  currentSelection: Nullable<SceneSelection>;\n  initData: Nullable<UiInitData>;\n  isExpandedForConfigure: boolean;\n  isLoadingInProgress: boolean;\n  currentVariants: Nullable<RapiTagForUi>;\n  showVariants: boolean;\n  isViewer: boolean;\n  isConfigurator: boolean;\n  isPlanner: boolean;\n  email: Nullable<string>;\n}\n\nexport enum UI_STATE_MUTATIONS {\n  SET_SELECTED_GROUP = 'setSelectedGroup',\n  SET_IS_DESKTOP = 'setIsDesktop',\n  SET_ACTION_SELECTED = 'setActionSelected',\n  SET_ACTION_DESELECTED = 'setActionDeselected',\n  SET_INTERACTIONS_EXPANDED = 'setInteractionsExpanded',\n  SET_IS_LANDSCAPE = 'setIsLandscape',\n  SET_IS_PART_LIST_SHOWN = 'SET_IS_PART_LIST_SHOWN',\n  SET_LAST_REGULAR_VIEW_MODE = 'SET_LAST_REGULAR_VIEW_MODE',\n  SET_IS_FULLSCREEN = 'setIsFullscreen',\n  SHOW_ONLY_ADDONS = 'SHOW_ONLY_ADDONS',\n  SHOW_ALL_COLLECTION_VIEW_ELEMENTS = 'SHOW_ALL_COLLECTION_VIEW_ELEMENTS',\n  SET_ACTIVE_ADDON = 'SET_ACTIVE_ADDON',\n  SET_CURRENT_SELECTION = 'SET_CURRENT_SELECTION',\n  SET_OVERLAY_STATE = 'SET_OVERLAY_STATE',\n  CLOSE_ALL_OVERLAYS = 'CLOSE_ALL_OVERLAYS',\n  SET_INIT_DATA = 'SET_INIT_DATA',\n  SET_IS_EXPANDED_FOR_CONFIGURE = 'SET_IS_EXPANDED_FOR_CONFIGURE',\n  SET_IS_LOADING_IN_PROGRESS = 'SET_IS_LOADING_IN_PROGRESS',\n  SET_CURRENT_VARIANTS = 'SET_CURRENT_VARIANTS',\n  SET_SHOW_VARIANTS = 'SET_SHOW_VARIANTS',\n  SET_EMAIL = 'SET_EMAIL',\n}\n\nenum UI_STATE_INTERAL_MUTATIONS {\n  SET_IS_VIEWER = 'SET_IS_VIEWER',\n  SET_IS_CONFIGURATOR = 'SET_IS_CONFIGURATOR',\n  SET_IS_PLANNER = 'SET_IS_PLANNER',\n}\n\nexport enum UI_STATE_ACTIONS {\n  SELECT_GROUP = 'SELECT_GROUP',\n  SELECT_VIEW_MODE = 'SELECT_VIEW_MODE',\n  SET_INTERACTIONS_EXPANDED = 'SET_INTERACTIONS_EXPANDED',\n  SELECTION_CHANGE = 'SELECTION_CHANGE',\n  RESET_COLLECTION_VIEW = 'RESET_COLLECTION_VIEW',\n  START_CONFIGURING = 'START_CONFIGURING',\n  PAUSE_CONFIGURING = 'PAUSE_CONFIGURING',\n  USE_VIEWER = 'USE_VIEWER',\n  USE_PLANNER = 'USE_PLANNER',\n  USE_CONFIGURATOR = 'USE_CONFIGURATOR',\n}\n\nexport enum UI_STATE_GETTERS {\n  USE_REGULAR_LAYOUT = 'USE_REGULAR_LAYOUT',\n  COLLECTION_VIEW_ELEMENTS = 'COLLECTION_VIEW_ELEMENTS',\n  COLLECTION_VIEW_ADDON_ELEMENTS = 'COLLECTION_VIEW_ADDON_ELEMENTS',\n  COLLECTION_VIEW_VARIANTS = 'COLLECTION_VIEW_VARIANTS',\n  SHOW_BACK_TO_WEBSITE = 'SHOW_BACK_TO_WEBSITE',\n}\n\nexport const initialState: UiState = {\n  selectedGroup: null,\n  interactionsExpanded: false,\n  isDesktop: false,\n  wasDesktopBefore: false,\n  isLandscape: false,\n  overlays: initialOverlaysState,\n  lastRegularViewMode: null,\n  selectedActions: [],\n  isFullscreen: false,\n  onlyShowAddons: false,\n  activeAddon: null,\n  currentSelection: null,\n  initData: {\n    configuratorId: 'testConfigurator',\n  },\n  isExpandedForConfigure: false,\n  isLoadingInProgress: true,\n  currentVariants: null,\n  showVariants: false,\n  isConfigurator: false,\n  isViewer: false,\n  isPlanner: false,\n  email: null,\n  sidebar: getInitialCollectionViewState(),\n};\n\nconst gettersImplementation: GetterTree<UiState, StoreState> = {\n  [UI_STATE_GETTERS.USE_REGULAR_LAYOUT](state) {\n    return (state.isDesktop || !state.isLandscape || !!state.initData?.mobileLandscape);\n  },\n  [UI_STATE_GETTERS.COLLECTION_VIEW_ELEMENTS](_state, _getters, {coreData}) {\n    const {parameters, addons} = coreData;\n    if (!parameters.length && !addons.length) {\n      return [];\n    }\n    const parameterElements = parameters.map((collectionViewElement) => ({\n      label: collectionViewElement.label,\n      key: 'parameter_' + collectionViewElement.key,\n      payload: collectionViewElement,\n      type: 'parameter',\n    }));\n    if (!addonsHaveGroups(addons)) {\n      return [...parameterElements];\n    }\n    return [\n      ...parameterElements,\n      ...filterAndMapAddons(addons, _state.selectedGroup?.key),\n    ];\n  },\n  [UI_STATE_GETTERS.COLLECTION_VIEW_ADDON_ELEMENTS](_state, _getters, {coreData}) {\n    const {addons} = coreData;\n    if (!addons.length) {\n      return [];\n    }\n    return [\n      ...mapAddons(addons),\n    ];\n  },\n  [UI_STATE_GETTERS.SHOW_BACK_TO_WEBSITE](state, _getters, {commonUiState}) {\n    const {isFullscreen, isExpandedForConfigure} = state;\n    const {isInIframe, isViewOnly} = commonUiState;\n    return isInIframe && !isFullscreen && !isViewOnly && isExpandedForConfigure;\n  },\n  [UI_STATE_GETTERS.COLLECTION_VIEW_VARIANTS](state) {\n    const currentVariants = state.currentVariants;\n    return (currentVariants) ? [\n      ...mapVariants(currentVariants),\n    ] : [];\n  },\n};\n\nconst actions: ActionTree<UiState, StoreState> = {\n  [UI_STATE_ACTIONS.SELECT_GROUP]({commit, dispatch}, parameterGroup: ParameterGroup): void {\n    commit(UI_STATE_MUTATIONS.SET_SELECTED_GROUP, parameterGroup);\n    if (!!parameterGroup) {\n      commit(CORE_DATA_MUTATIONS.UPDATE_PARAMETERS, parameterGroup.parameters);\n    }\n    dispatch(UI_STATE_ACTIONS.RESET_COLLECTION_VIEW);\n  },\n  [UI_STATE_ACTIONS.SELECT_VIEW_MODE]({commit, state, rootState, getters, dispatch}, isDesktop: boolean): void {\n    // PLEASE REFACTOR ME!! THIS IS SO CONFUSING...\n\n    const isInitialSet = state.isDesktop === null;\n    const wasSwitchFromViewMode = state.lastRegularViewMode !== isDesktop;\n\n    commit(UI_STATE_MUTATIONS.SET_IS_DESKTOP, isDesktop);\n    if (isInitialSet && rootState.commonUiState.isInIframe && !isDesktop) {\n      commit(UI_STATE_MUTATIONS.SET_IS_FULLSCREEN, true);\n    }\n    const isRegularLayout = getters[UI_STATE_GETTERS.USE_REGULAR_LAYOUT];\n    if (isRegularLayout) {\n      commit(UI_STATE_MUTATIONS.SET_LAST_REGULAR_VIEW_MODE, isDesktop);\n    }\n\n    if (isInitialSet || (wasSwitchFromViewMode && isRegularLayout)) {\n      if (!state.isDesktop && state.sidebar.showsDetails) {\n        commit(UI_STATE_MUTATIONS.SET_INTERACTIONS_EXPANDED, true);\n      } else {\n        commit(UI_STATE_MUTATIONS.SET_INTERACTIONS_EXPANDED, state.isDesktop);\n      }\n      if (!state.isDesktop && !state.interactionsExpanded) {\n        // do something\n      }\n    }\n\n    if (wasSwitchFromViewMode && rootState.commonUiState.isInIframe) {\n      if (!state.isDesktop && !state.isExpandedForConfigure && !state.initData?.mobileLandscape) {\n        dispatch(UI_STATE_ACTIONS.PAUSE_CONFIGURING);\n      } else {\n        dispatch(UI_STATE_ACTIONS.START_CONFIGURING);\n      }\n    }\n  },\n  [UI_STATE_ACTIONS.SET_INTERACTIONS_EXPANDED]({commit, state}, isExpanded: boolean): void {\n    commit(UI_STATE_MUTATIONS.SET_INTERACTIONS_EXPANDED, isExpanded);\n    if (!state.interactionsExpanded && !state.isDesktop) {\n      commit(COLLECTION_VIEW_STATE_MUTATIONS.ELEMENT_EXPANDED, {state: state.sidebar, value: false});\n    }\n  },\n\n  [UI_STATE_ACTIONS.SELECTION_CHANGE]({dispatch}): void {\n    dispatch(UI_STATE_ACTIONS.RESET_COLLECTION_VIEW);\n  },\n\n  [UI_STATE_ACTIONS.RESET_COLLECTION_VIEW]({commit, state}): void {\n    commit(COLLECTION_VIEW_STATE_MUTATIONS.SET_SELECTED_ELEMENT, {state: state.sidebar, value: null});\n    commit(UI_STATE_MUTATIONS.SHOW_ALL_COLLECTION_VIEW_ELEMENTS);\n    commit(COLLECTION_VIEW_STATE_MUTATIONS.ELEMENT_EXPANDED, {state: state.sidebar, value: false});\n    commit(UI_STATE_MUTATIONS.SET_SHOW_VARIANTS, false);\n    if (!state.isDesktop) {\n      commit(UI_STATE_MUTATIONS.SET_INTERACTIONS_EXPANDED, false);\n    }\n  },\n  [UI_STATE_ACTIONS.START_CONFIGURING]({commit, rootState}): void {\n    if (!rootState.commonUiState.isViewOnly) {\n      return;\n    }\n    commit(UI_STATE_MUTATIONS.SET_IS_FULLSCREEN, false);\n    commit(COMMON_UI_STATE_MUTATIONS.SET_IS_VIEW_ONLY, false);\n  },\n  [UI_STATE_ACTIONS.PAUSE_CONFIGURING]({commit}): void {\n    commit(UI_STATE_MUTATIONS.SET_IS_FULLSCREEN, true);\n    commit(COMMON_UI_STATE_MUTATIONS.SET_IS_VIEW_ONLY, true);\n    commit(UI_STATE_MUTATIONS.SET_IS_EXPANDED_FOR_CONFIGURE, false);\n  },\n  [UI_STATE_ACTIONS.USE_CONFIGURATOR]({commit}): void {\n    commit(UI_STATE_INTERAL_MUTATIONS.SET_IS_CONFIGURATOR, true);\n    commit(UI_STATE_INTERAL_MUTATIONS.SET_IS_VIEWER, false);\n    commit(UI_STATE_INTERAL_MUTATIONS.SET_IS_PLANNER, false);\n  },\n  [UI_STATE_ACTIONS.USE_VIEWER]({commit}): void {\n    commit(UI_STATE_INTERAL_MUTATIONS.SET_IS_CONFIGURATOR, false);\n    commit(UI_STATE_INTERAL_MUTATIONS.SET_IS_VIEWER, true);\n    commit(UI_STATE_INTERAL_MUTATIONS.SET_IS_PLANNER, false);\n  },\n  [UI_STATE_ACTIONS.USE_PLANNER]({commit}): void {\n    commit(UI_STATE_INTERAL_MUTATIONS.SET_IS_CONFIGURATOR, false);\n    commit(UI_STATE_INTERAL_MUTATIONS.SET_IS_VIEWER, false);\n    commit(UI_STATE_INTERAL_MUTATIONS.SET_IS_PLANNER, true);\n    commit(CORE_STATE_MUTATIONS.SET_INITIAL_HASH, null);\n  },\n};\n\nconst mutations: MutationTree<UiState> = {\n  [UI_STATE_MUTATIONS.SET_SELECTED_GROUP](state: UiState, selectedGroup: ParameterGroup) {\n    state.selectedGroup = selectedGroup;\n  },\n  [UI_STATE_MUTATIONS.SET_IS_DESKTOP](state: UiState, isDesktop: boolean) {\n    state.wasDesktopBefore = state.isDesktop === null ? false : state.isDesktop;\n    state.isDesktop = isDesktop;\n  },\n  [UI_STATE_MUTATIONS.SET_ACTION_SELECTED](state: UiState, action: BUTTON_ACTIONS) {\n    if (!state.selectedActions.includes(action)) {\n      state.selectedActions.push(action);\n    }\n  },\n  [UI_STATE_MUTATIONS.SET_ACTION_DESELECTED](state: UiState, action: BUTTON_ACTIONS) {\n    if (state.selectedActions.includes(action)) {\n      state.selectedActions.splice(state.selectedActions.indexOf(action), 1);\n    }\n  },\n  [UI_STATE_MUTATIONS.SET_INTERACTIONS_EXPANDED](state: UiState, isExpanded: boolean) {\n    state.interactionsExpanded = isExpanded;\n  },\n  [UI_STATE_MUTATIONS.SET_IS_LANDSCAPE](state: UiState, isLandscape: boolean) {\n    state.isLandscape = isLandscape;\n  },\n  [UI_STATE_MUTATIONS.SET_OVERLAY_STATE](state: UiState, {overlay, open, payload = null}: {overlay: OVERLAYS, open: boolean, payload?: any}) {\n    // NEED A NEW OBJECT DUE TO REACTIVITY CAVEAT and also because we do not want to alter initialOverlaysState\n    state.overlays = {...initialOverlaysState};\n    state.overlays[overlay] = {open, payload};\n  },\n  [UI_STATE_MUTATIONS.CLOSE_ALL_OVERLAYS](state: UiState) {\n    state.overlays = {...initialOverlaysState};\n  },\n  [UI_STATE_MUTATIONS.SET_LAST_REGULAR_VIEW_MODE](state: UiState, isDesktop: boolean) {\n    state.lastRegularViewMode = isDesktop;\n  },\n  [UI_STATE_MUTATIONS.SET_IS_FULLSCREEN](state: UiState, isFullscreen: boolean) {\n    state.isFullscreen = isFullscreen;\n  },\n  [UI_STATE_MUTATIONS.SHOW_ONLY_ADDONS](state: UiState) {\n    state.onlyShowAddons = true;\n  },\n  [UI_STATE_MUTATIONS.SHOW_ALL_COLLECTION_VIEW_ELEMENTS](state: UiState) {\n    state.onlyShowAddons = false;\n  },\n  [UI_STATE_MUTATIONS.SET_ACTIVE_ADDON](state: UiState, possibleChild: UiPossibleChild) {\n    state.activeAddon = possibleChild;\n  },\n  [UI_STATE_MUTATIONS.SET_CURRENT_SELECTION](state: UiState, selection: Nullable<SceneSelection>) {\n    state.currentSelection = selection;\n  },\n  [UI_STATE_MUTATIONS.SET_INIT_DATA](state: UiState, initData: Nullable<UiInitData>) {\n    state.initData = initData;\n  },\n  [UI_STATE_MUTATIONS.SET_IS_EXPANDED_FOR_CONFIGURE](state: UiState, isExpandedForConfigure: boolean) {\n    state.isExpandedForConfigure = isExpandedForConfigure;\n  },\n  [UI_STATE_MUTATIONS.SET_IS_LOADING_IN_PROGRESS](state: UiState, isLoadingInProgress: boolean) {\n    state.isLoadingInProgress = isLoadingInProgress;\n  },\n  [UI_STATE_MUTATIONS.SET_CURRENT_VARIANTS](state: UiState, variants: RapiTagForUi) {\n    state.currentVariants = variants;\n  },\n  [UI_STATE_MUTATIONS.SET_SHOW_VARIANTS](state: UiState, isShown: boolean) {\n    state.showVariants = isShown;\n  },\n  [UI_STATE_INTERAL_MUTATIONS.SET_IS_CONFIGURATOR](state: UiState, isConfigurator: boolean) {\n    state.isConfigurator = isConfigurator;\n  },\n  [UI_STATE_INTERAL_MUTATIONS.SET_IS_VIEWER](state: UiState, isViewer: boolean) {\n    state.isViewer = isViewer;\n  },\n  [UI_STATE_INTERAL_MUTATIONS.SET_IS_PLANNER](state: UiState, isPlanner: boolean) {\n    state.isPlanner = isPlanner;\n  },\n  [UI_STATE_MUTATIONS.SET_EMAIL](state: UiState, email: string) {\n    state.email = email;\n  },\n};\n\nexport const uiState: Module<UiState, StoreState> = {\n  namespaced,\n  state: initialState,\n  getters: gettersImplementation,\n  actions,\n  mutations,\n};\n","// CAN NOT BE CONST ENUM BECAUSE WE NEED TO EXPOSE TO THE TEMPLATE\nexport enum OVERLAYS {\n  PART_LIST,\n  NO_DOCKING,\n  SAVE_DRAFT,\n  VARIANT_WARNING,\n  OPEN_AR,\n  EXPORT_3D,\n  ELEMENT_DISABLED,\n}\n\nexport interface OverlayState {\n  open: boolean;\n  payload?: any;\n}\n\nexport type OverlaysOpenState = {[key in OVERLAYS]: OverlayState};\n\nexport const initialOverlaysState = {\n  [OVERLAYS.PART_LIST]: {open: false},\n  [OVERLAYS.NO_DOCKING]: {open: false},\n  [OVERLAYS.SAVE_DRAFT]: {open: false},\n  [OVERLAYS.VARIANT_WARNING]: {open: false},\n  [OVERLAYS.OPEN_AR]: {open: false},\n  [OVERLAYS.EXPORT_3D]: {open: false},\n  [OVERLAYS.ELEMENT_DISABLED]: {open: false},\n};\n","import Vue from 'vue';\nimport Vuex, {ActionTree, GetterTree, Module, MutationTree} from 'vuex';\n\nimport {Nullable} from '@/common/utils/types';\nimport {CollectionViewElement} from '@/configurator/components/collection-view/-utils/types';\nimport {StoreState} from '@/common/store';\n\nVue.use(Vuex);\n\nconst namespaced: boolean = false;\n\nexport interface GridViewUiState {\n  filter: Nullable<string>;\n  showAllAsList: boolean;\n  search: Nullable<string>;\n  userInitiatedSearch: boolean;\n}\n\nexport interface CollectionViewUiState {\n  selected: Nullable<CollectionViewElement>;\n  showsDetails: boolean;\n  gridView: GridViewUiState;\n}\n\nexport const getInitialCollectionViewState = (): CollectionViewUiState => {\n  return {\n    selected: null,\n    showsDetails: false,\n    gridView: {\n      filter: null,\n      showAllAsList: false,\n      search: null,\n      userInitiatedSearch: false,\n    },\n  };\n};\n\nexport enum COLLECTION_VIEW_STATE_MUTATIONS {\n  // ADD CV as prefix to prevent name clashes\n  ELEMENT_EXPANDED = 'CV_ELEMENT_EXPANDED',\n  SET_SELECTED_ELEMENT = 'CV_SET_SELECTED_ELEMENT',\n}\n\nexport enum GRID_VIEW_STATE_MUTATIONS {\n  // ADD GV as prefix to prevent name clashes\n  SET_SEARCH = 'GV_SET_SEARCH',\n  TOGGLE_LIST_DISPLAY_TYPE = 'GV_TOGGLE_LIST_DISPLAY_TYPE',\n  SET_FILTER = 'GV_SET_FILTER',\n  SET_USER_INITIATED_SEARCH = 'GV_SET_USER_INITIATED_SEARCH',\n}\n\ninterface MuationPayload<T, V> {\n  state: T;\n  value: V;\n}\n\nexport type GridViewMutationPayload<T> = MuationPayload<GridViewUiState, T>;\nexport type CollectionViewMutationPayload<T> = MuationPayload<CollectionViewUiState, T>;\n\nconst actions: ActionTree<CollectionViewUiState, StoreState> = {};\nconst getters: GetterTree<CollectionViewUiState, StoreState> = {};\n\nconst mutations: MutationTree<CollectionViewUiState> = {\n  [COLLECTION_VIEW_STATE_MUTATIONS.ELEMENT_EXPANDED](_state: CollectionViewUiState, {state, value}: CollectionViewMutationPayload<boolean>) {\n    state.showsDetails = value;\n  },\n  [COLLECTION_VIEW_STATE_MUTATIONS.SET_SELECTED_ELEMENT](_state: CollectionViewUiState, {state, value}: CollectionViewMutationPayload<CollectionViewElement>) {\n    state.selected = value;\n  },\n  [GRID_VIEW_STATE_MUTATIONS.SET_SEARCH](_state: CollectionViewUiState, {state, value}: GridViewMutationPayload<Nullable<string>>) {\n    value = (value === '' || typeof value !== 'string') ? null : value.toLowerCase();\n    state.search = value;\n  },\n  [GRID_VIEW_STATE_MUTATIONS.TOGGLE_LIST_DISPLAY_TYPE](_state: CollectionViewUiState, {state}: GridViewMutationPayload<void>) {\n    state.showAllAsList = !state.showAllAsList;\n  },\n  [GRID_VIEW_STATE_MUTATIONS.SET_FILTER](_state: CollectionViewUiState, {state, value}: GridViewMutationPayload<Nullable<string>>) {\n    state.filter = value;\n  },\n  [GRID_VIEW_STATE_MUTATIONS.SET_USER_INITIATED_SEARCH](_state: CollectionViewUiState, {state, value}: GridViewMutationPayload<boolean>) {\n    state.userInitiatedSearch = value;\n  },\n\n};\n\nexport const collectionViewUiStateHelper: Module<CollectionViewUiState, StoreState> = {\n  namespaced,\n  state: getInitialCollectionViewState(),\n  getters,\n  actions,\n  mutations,\n};\n","import Vue from 'vue';\nimport Vuex, {ActionTree, GetterTree, Module, MutationTree} from 'vuex';\nimport {StoreState} from '@/common/store';\nimport {Nullable} from '@/common/utils/types';\nimport {RapiId} from '@roomle/web-sdk/lib/definitions/typings/rapi-types';\n\nVue.use(Vuex);\n\nconst namespaced: boolean = false;\n\nexport interface CommonUiState {\n  isInIframe: boolean;\n  isViewOnly: boolean;\n  lastRequestedId: Nullable<RapiId>;\n}\n\nexport const initialState: CommonUiState = {\n  isInIframe: false,\n  isViewOnly: false,\n  lastRequestedId: null, // I need this to set the correct parent id when saving a new plan\n};\n\nexport enum COMMON_UI_STATE_MUTATIONS {\n  SET_IS_IN_IFRAME = 'SET_IS_IN_IFRAME',\n  SET_IS_VIEW_ONLY = 'SET_IS_VIEW_ONLY',\n  SET_LAST_REQUESTED_ID = 'SET_LAST_REQUESTED_ID',\n}\n\nconst gettersImplementation: GetterTree<CommonUiState, StoreState> = {};\n\nconst actions: ActionTree<CommonUiState, StoreState> = {};\n\nconst mutations: MutationTree<CommonUiState> = {\n  [COMMON_UI_STATE_MUTATIONS.SET_IS_IN_IFRAME](state: CommonUiState, isInIframe: boolean) {\n    state.isInIframe = isInIframe;\n  },\n  [COMMON_UI_STATE_MUTATIONS.SET_IS_VIEW_ONLY](state: CommonUiState, isViewOnly: boolean) {\n    state.isViewOnly = isViewOnly;\n  },\n  [COMMON_UI_STATE_MUTATIONS.SET_LAST_REQUESTED_ID](state: CommonUiState, id: RapiId) {\n    state.lastRequestedId = id;\n  },\n};\n\nexport const commonUiState: Module<CommonUiState, StoreState> = {\n  namespaced,\n  state: initialState,\n  getters: gettersImplementation,\n  actions,\n  mutations,\n};\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import {RapiMaterial, RapiMaterialGroup, RapiTexture, RapiId, RapiAdditionalContent, RapiItem, RapiTagForUi} from '@roomle/web-sdk/lib/definitions/typings/rapi-types';\nimport {KernelPartListParameter, UiPossibleChildTag} from '@roomle/web-sdk/lib/definitions/typings/kernel';\nimport {CollectionViewElement, CollectionViewElementType} from '@/configurator/components/collection-view/-utils/types';\nimport {VariantsMap} from '@/configurator/embedding/types';\nimport RoomleConfigurator from '@roomle/web-sdk/lib/definitions/configurator-core/src/roomle-configurator';\n// can not import RAPI_PATHS and RAPI_ADDITIONAL_CONTENTS because it's a const enum\n// import {RAPI_PATHS, RAPI_ADDITIONAL_CONTENTS} from '@roomle/web-sdk/lib/definitions/common-core/src/rapi-access';\n\n// @todo this should move into SDK\nexport interface RapiMaterialEmbeddedTextures extends RapiMaterial {\n  embeddedTextures?: RapiTexture[];\n\n  [key: string]: any;\n}\n\nexport const getAllMaterials = (groups: RapiMaterialGroup[] = []): RapiMaterialEmbeddedTextures[] => groups.reduce((acc, group) => {\n  acc.push(...group.materials);\n  return acc;\n}, [] as RapiMaterialEmbeddedTextures[]);\n\nexport const mapAddons = (addons: UiPossibleChildTag[]): CollectionViewElement[] => {\n  return addons.map((addonTag) => ({\n    label: addonTag.label,\n    key: 'addon_' + addonTag.id,\n    payload: addonTag,\n    type: 'addon',\n  })) as CollectionViewElement[];\n};\n\nconst tagToCollectionViewElement = (tag: RapiTagForUi, identifier: CollectionViewElementType): CollectionViewElement => {\n  return {\n    label: tag.label || null,\n    key: identifier + '_' + tag.id,\n    payload: tag,\n    type: identifier,\n  };\n};\n\nconst tagToCollectionViewElements = (tag: RapiTagForUi, identifier: CollectionViewElementType): CollectionViewElement[] => {\n  if (!tag.items || !tag.items.length) {\n    return [];\n  }\n\n  return [tagToCollectionViewElement(tag, identifier)] as CollectionViewElement[];\n};\n\nexport const mapVariants = (tag: RapiTagForUi): CollectionViewElement[] => {\n  return tagToCollectionViewElements(tag, 'variant');\n};\n\nexport const mapCatalogRootTag = (tags: RapiTagForUi[]): CollectionViewElement[] => {\n  return tags.reduce((acc, tag) => {\n    acc.push(tagToCollectionViewElement(tag, 'object'));\n    return acc;\n  }, [] as CollectionViewElement[]);\n};\n\nexport const filterAndMapAddons = (addons: UiPossibleChildTag[], selectedGroup: string | undefined): CollectionViewElement[] => {\n  if (!selectedGroup) {\n    return [];\n  }\n  const filteredAddons = addons\n    .map((addon) => {\n      const result = {...addon};\n      result.possibleChildren = result.possibleChildren.filter((possibleChild) => possibleChild.group === selectedGroup);\n      return result;\n    })\n    .filter((addon) => addon.possibleChildren.length > 0);\n  return mapAddons(filteredAddons);\n};\n\nexport const addonsHaveGroups = (addons: UiPossibleChildTag[]): boolean => {\n  if (!addons.length) {\n    return false;\n  }\n  for (const possibleChildTag of addons) {\n    for (const possibleChild of possibleChildTag.possibleChildren) {\n      if (possibleChild.group) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\nexport const extractRootComponentId = (id: string) => {\n  if (!id || typeof id !== 'string') {\n    return;\n  }\n  const separator = ':';\n  return id.split(separator).slice(0, 2).join(separator);\n};\n\nexport const getCurrentVariants = async (api: RoomleConfigurator, id: string, variantChangeMap: VariantsMap = {}) => {\n  const rootComponentId = extractRootComponentId(id);\n  if (!rootComponentId) {\n    return;\n  }\n  for (const variantRootCompopnentId in variantChangeMap) {\n    if (variantRootCompopnentId === rootComponentId) {\n      const tagId = variantChangeMap[variantRootCompopnentId];\n      // @ts-ignore -- because we can not import RAPI_PATHS and therefore there is a type error\n      const tag = await api.getTagById(tagId, {include: ['items']});\n      const additionalContents = await api.getAdditionalContentsOf(tag.items);\n      const additionalContentsMap = new Map<RapiId, RapiAdditionalContent>();\n      additionalContents.forEach((additionalContent: RapiAdditionalContent) => {\n        // needed to use raw ID because RAPI_ADDITIONAL_CONTENTS can not imported because it's a const enum\n        if (additionalContent.type === 6) {\n          additionalContentsMap.set(additionalContent.itemId, additionalContent);\n        }\n      });\n      tag.items.forEach((item: RapiItem) => item.sketch = (additionalContentsMap.has(item.id) ? additionalContentsMap.get(item.id)!.content : item.perspectiveImage));\n      return tag;\n    }\n  }\n};\n\nexport const prepareParametersForUi = (parameters: KernelPartListParameter[]) => {\n  return parameters\n    .filter((part) => !!part.label)\n    .sort((p1, p2) => (p1.sort ? p1.sort : 0) - (p2.sort ? p2.sort : 0));\n};\n","import Vue from 'vue';\nimport Vuex, {ActionTree, GetterTree, Module, MutationTree} from 'vuex';\nimport {StoreState} from '@/common/store';\nimport {KernelParameterGroup, KernelPartList, UiKernelParameter, UiPossibleChildTag} from '@roomle/web-sdk/lib/definitions/typings/kernel';\nimport {Nullable} from '@/common/utils/types';\nimport {KernelBoundsFormatted, round, scriptInfo, formatPrice} from '@/common/utils/helper';\n\nVue.use(Vuex);\n\nconst namespaced: boolean = false;\n\nexport interface ParameterGroup extends KernelParameterGroup {\n  parameters: UiKernelParameter[];\n}\n\nexport interface CoreData {\n  groups: ParameterGroup[];\n  parameters: UiKernelParameter[];\n  addons: UiPossibleChildTag[];\n  partList: KernelPartList;\n  bounds: Nullable<KernelBoundsFormatted>;\n  currencySymbol: string;\n  price: Nullable<number>;\n}\n\nexport enum CORE_DATA_MUTATIONS {\n  UPDATE_GROUPS = 'updateGroups',\n  UPDATE_PARAMETERS = 'updateParameters',\n  UPDATE_ADDONS = 'updateAddons',\n  UPDATE_PART_LIST = 'UPDATE_PART_LIST',\n  UPDATE_BOUNDS = 'UPDATE_BOUNDS',\n  UPDATE_CURRENCY = 'UPDATE_CURRENCY',\n  UPDATE_PRICE_VALUE = 'UPDATE_PRICE_VALUE',\n}\n\nexport enum CORE_DATA_ACTIONS {\n  UPDATE_PRICE = 'UPDATE_PRICE',\n}\n\nexport enum CORE_DATA_GETTERS {\n  HAS_NON_GROUP_ADDONS = 'hasNonGroupAddons',\n  CURRENT_PRICE = 'currentPrice',\n}\n\nconst initialState: CoreData = {\n  groups: [],\n  parameters: [],\n  addons: [],\n  partList: {fullList: [], originPart: {} as any, perMainComponent: []},\n  bounds: null,\n  currencySymbol: '',\n  price: null,\n};\n\nconst getters: GetterTree<CoreData, StoreState> = {\n  [CORE_DATA_GETTERS.CURRENT_PRICE](state: CoreData) {\n    const {currencySymbol, price} = state;\n    return formatPrice(currencySymbol, price);\n  },\n  [CORE_DATA_GETTERS.HAS_NON_GROUP_ADDONS](state: CoreData, _getters, rootState) {\n    if (!state.addons || !state.addons.length) {\n      return false;\n    }\n\n    // check if every addon is in a group\n    for (const pct of state.addons) {\n      for (const pc of pct.possibleChildren) {\n        if (!pc.group) {\n          if (rootState.uiState.initData?.debug) {\n            scriptInfo('possible child has no group', pc);\n          }\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n};\n\nconst mutations: MutationTree<CoreData> = {\n  [CORE_DATA_MUTATIONS.UPDATE_GROUPS](state: CoreData, groups: ParameterGroup[]) {\n    state.groups = groups;\n  },\n  [CORE_DATA_MUTATIONS.UPDATE_PARAMETERS](state: CoreData, parameters: UiKernelParameter[]) {\n    state.parameters = parameters;\n  },\n  [CORE_DATA_MUTATIONS.UPDATE_ADDONS](state: CoreData, addons: UiPossibleChildTag[]) {\n    state.addons = addons;\n  },\n  [CORE_DATA_MUTATIONS.UPDATE_PART_LIST](state: CoreData, partList: KernelPartList) {\n    state.partList = partList;\n  },\n  [CORE_DATA_MUTATIONS.UPDATE_BOUNDS](state: CoreData, bounds: KernelBoundsFormatted) {\n    state.bounds = bounds;\n  },\n  [CORE_DATA_MUTATIONS.UPDATE_CURRENCY](state: CoreData, currencySymbol: string) {\n    state.currencySymbol = currencySymbol;\n  },\n  [CORE_DATA_MUTATIONS.UPDATE_PRICE_VALUE](state: CoreData, price: number) {\n    state.price = round(price, 2); // @todo I think SDK should do the rounding\n  },\n\n};\n\nconst actions: ActionTree<CoreData, StoreState> = {\n  [CORE_DATA_ACTIONS.UPDATE_PRICE]({commit}, {currencySymbol, price}: {currencySymbol: string, price: number}): void {\n    commit(CORE_DATA_MUTATIONS.UPDATE_CURRENCY, currencySymbol);\n    commit(CORE_DATA_MUTATIONS.UPDATE_PRICE_VALUE, price);\n  },\n};\n\nexport const coreData: Module<CoreData, StoreState> = {\n  namespaced,\n  state: initialState,\n  getters,\n  actions,\n  mutations,\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"interactionContainerHeight\":\"60%\",\"interactionTiming\":\"450ms\",\"interactionCollapsedHeight\":\"10rem\",\"interactionDesktopWidth\":\"30rem\",\"cssMX1\":\".42\",\"cssMY1\":\"0\",\"cssMX2\":\".58\",\"cssMY2\":\"1\",\"breakPointDesktop\":\"1024px\",\"blackText\":\"#121212\",\"whiteText\":\"#fff\"};","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overlays.vue?vue&type=style&index=0&id=5139ba2c&scoped=true&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SceneContainer.vue?vue&type=style&index=0&id=58815f9e&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h100 app-container\"},[(_vm.showBack)?_c('BackToWebsite'):_vm._e(),_c('Overlays'),_c('SceneContainer'),(_vm.$store.state.uiState.isConfigurator)?_c('ConfiguratorMain'):_vm._e(),(_vm.$store.state.uiState.isPlanner)?_c('PlannerMain'):_vm._e(),(_vm.$store.state.uiState.isViewer)?_c('ViewerMain',{attrs:{\"objectId\":_vm.lastRequestedId}}):_vm._e(),(_vm.showCookieBanner)?_c('CookieBanner',{attrs:{\"onAccept\":_vm.updateCookies}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"overlays\",class:{'h100': _vm.hasOpenOverlay}},[(_vm.$store.state.uiState.overlays[_vm.OVERLAYS.PART_LIST].open)?_c('PartList',{attrs:{\"onClose\":_vm.closeOverlays}}):_vm._e(),(_vm.$store.state.uiState.overlays[_vm.OVERLAYS.NO_DOCKING].open)?_c('NoDocking',{attrs:{\"onClose\":_vm.closeOverlays}}):_vm._e(),(_vm.$store.state.uiState.overlays[_vm.OVERLAYS.SAVE_DRAFT].open)?_c('SaveDraft',{attrs:{\"onClose\":_vm.closeOverlays}}):_vm._e(),(_vm.$store.state.uiState.overlays[_vm.OVERLAYS.VARIANT_WARNING].open)?_c('VariantWarning',{attrs:{\"payload\":_vm.$store.state.uiState.overlays[_vm.OVERLAYS.VARIANT_WARNING].payload,\"onClose\":_vm.closeOverlays}}):_vm._e(),(_vm.$store.state.uiState.overlays[_vm.OVERLAYS.OPEN_AR].open)?_c('OpenAR',{attrs:{\"onClose\":_vm.closeOverlays}}):_vm._e(),(_vm.$store.state.uiState.overlays[_vm.OVERLAYS.EXPORT_3D].open)?_c('Export3D',{attrs:{\"onClose\":_vm.closeOverlays}}):_vm._e(),(_vm.$store.state.uiState.overlays[_vm.OVERLAYS.ELEMENT_DISABLED].open)?_c('ElementDisabled',{attrs:{\"onClose\":_vm.closeOverlays}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport {UI_STATE_MUTATIONS} from '@/configurator/store/ui-state';\nimport {OVERLAYS} from '@/configurator/components/-utils/overlays';\n\nexport default Vue.extend({\n  components: {\n    OpenAR: () => import('@/configurator/components/overlays/ar/OpenAR.vue'),\n    Export3D: () => import('@/configurator/components/overlays/Export3D.vue'),\n    PartList: () => import('@/configurator/components/overlays/PartList.vue'),\n    NoDocking: () => import('@/configurator/components/overlays/NoDocking.vue'),\n    VariantWarning: () => import('@/configurator/components/overlays/VariantWarning.vue'),\n    SaveDraft: () => import('@/configurator/components/overlays/SaveDraft.vue'),\n    ElementDisabled: () => import('@/configurator/components/overlays/ElementDisabled.vue'),\n  },\n\n  computed: {\n    OVERLAYS(): typeof OVERLAYS {\n      return OVERLAYS;\n    },\n    hasOpenOverlay(): boolean {\n      const {overlays} = this.$store.state.uiState;\n      for (const state in overlays) {\n        if (overlays.hasOwnProperty(state) && overlays[state].open) {\n          return true;\n        }\n      }\n      return false;\n    },\n  },\n\n  methods: {\n    closeOverlays() {\n      this.$store.commit(UI_STATE_MUTATIONS.CLOSE_ALL_OVERLAYS);\n    },\n  },\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overlays.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overlays.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Overlays.vue?vue&type=template&id=5139ba2c&scoped=true&\"\nimport script from \"./Overlays.vue?vue&type=script&lang=ts&\"\nexport * from \"./Overlays.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Overlays.vue?vue&type=style&index=0&id=5139ba2c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5139ba2c\",\n  null\n  \n)\n\nexport default component.exports","const initialLoadMarkKey = 'initial-load';\nconst regularLoadMarkKey = 'regular-load';\n\nconst ensureMark = () => {\n  // depending on the security settings (thanks to melt down and spectre)\n  // performance functions are not always there...\n  if (!performance.mark) {\n    performance.mark = () => undefined;\n  }\n  if (!performance.getEntriesByName) {\n    (performance as any).getEntriesByName = () => [{startTime: 0}, {startTime: Number.MAX_SAFE_INTEGER}];\n  }\n  if (!performance.clearMarks) {\n    (performance as any).clearMarks = () => undefined;\n  }\n};\n\nexport const addLoadMark = () => {\n  ensureMark();\n  performance.mark(regularLoadMarkKey);\n};\n\nexport const calcTiming = () => {\n  ensureMark();\n  const entries = performance.getEntriesByName(initialLoadMarkKey);\n  const timingMarkKey = (entries.length > 0) ? initialLoadMarkKey : regularLoadMarkKey;\n  performance.mark(timingMarkKey);\n  const [start, end] = performance.getEntriesByName(timingMarkKey);\n  // we do not want to clutter the output during tests\n  if (process.env.NODE_ENV !== 'test') {\n    if (!start || !end) {\n      console.warn('TIMING: ', 'Can not calculate timing, please check why');\n    } else {\n      console.log('TIMING: ', end.startTime - start.startTime, timingMarkKey, process.env.NODE_ENV);\n    }\n  }\n  performance.clearMarks(initialLoadMarkKey);\n  performance.clearMarks(regularLoadMarkKey);\n};\n","import Vue from 'vue';\nimport Vuex, {StoreOptions} from 'vuex';\nimport {CORE_STATE_ACTIONS, CORE_STATE_MUTATIONS, coreState, CoreState} from '@/configurator/store/core-state';\nimport {CORE_DATA_ACTIONS, CORE_DATA_MUTATIONS, coreData, CoreData} from '@/configurator/store/core-data';\nimport {UI_STATE_ACTIONS, UI_STATE_MUTATIONS, uiState, UiState} from '@/configurator/store/ui-state';\n\nimport {PLANNER_UI_STATE_MUTATIONS, plannerUiState, PlannerUiState} from '@/planner/store/planner-ui-state';\nimport {COMMON_UI_STATE_MUTATIONS, commonUiState, CommonUiState} from '@/common/store/common-ui-state';\n\nimport {CollectionViewUiState, collectionViewUiStateHelper, COLLECTION_VIEW_STATE_MUTATIONS} from '@/common/store/collection-view-state';\n\nimport {Nullable} from '@/common/utils/types';\n\nVue.use(Vuex);\n\nexport interface SharedUiState {\n  interactionsExpanded: boolean;\n  isFullscreen: boolean;\n  isDesktop: boolean;\n  isLandscape: boolean;\n  lastRegularViewMode: Nullable<boolean>;\n  wasDesktopBefore: boolean;\n  sidebar: CollectionViewUiState;\n}\n\nexport const MUTATIONS = {\n  ...CORE_STATE_MUTATIONS,\n  ...CORE_DATA_MUTATIONS,\n  ...UI_STATE_MUTATIONS,\n  ...PLANNER_UI_STATE_MUTATIONS,\n  ...COMMON_UI_STATE_MUTATIONS,\n  ...COLLECTION_VIEW_STATE_MUTATIONS,\n};\n\nexport const ACTIONS = {\n  ...CORE_STATE_ACTIONS,\n  ...CORE_DATA_ACTIONS,\n  ...UI_STATE_ACTIONS,\n};\n\nexport interface StoreState {\n  coreState: CoreState;\n  coreData: CoreData;\n  uiState: UiState;\n  plannerUiState: PlannerUiState;\n  commonUiState: CommonUiState;\n}\n\nconst store: StoreOptions<StoreState> = {\n  modules: {\n    coreState,\n    coreData,\n    uiState,\n    plannerUiState,\n    commonUiState,\n    collectionViewUiStateHelper,\n  },\n};\n\nexport default new Vuex.Store<StoreState>(store);\n","import RoomleConfigurator from '@roomle/web-sdk/lib/definitions/configurator-core/src/roomle-configurator';\nimport {Nullable} from '@/common/utils/types';\nimport {Connector, REGISTERED_CALLBACKS, UiPossibleChildTagWithKey} from '@/configurator/business-logic/sdk-connector';\nimport {UiInitData} from '@/configurator/embedding/types';\nimport {MUTATIONS, StoreState} from '@/common/store';\nimport {CORE_STATE_ACTIONS, CORE_STATE_MUTATIONS} from '@/configurator/store/core-state';\nimport {KernelComponent, KernelParameter, KernelParameterGroup, KernelPartList, UiKernelParameter, UiPossibleChildTag} from '@roomle/web-sdk/lib/definitions/typings/kernel';\nimport {BUTTON_ACTIONS, UI_STATE_ACTIONS, UI_STATE_MUTATIONS} from '@/configurator/store/ui-state';\nimport {CORE_DATA_ACTIONS, CORE_DATA_MUTATIONS, ParameterGroup} from '@/configurator/store/core-data';\nimport {KernelBoundsFormatted} from '@/common/utils/helper';\nimport {OVERLAYS} from '@/configurator/components/-utils/overlays';\nimport {RapiId} from '@roomle/web-sdk/lib/definitions/typings/rapi-types';\nimport {GA_CATEGORY, GA_METRICS} from '@/common/utils/google-analytics';\nimport ConfiguratorUiCallbacks from '@roomle/web-sdk/lib/definitions/configurator-core/src/services/configurator-ui-callback';\nimport {Store} from 'vuex';\nimport {RoomleSdkWrapper} from '@/configurator/business-logic/roomle-sdk-wrapper';\nimport {Analytics} from '@/common/plugins/analytics';\nimport {UiCallbacks} from '@/configurator/business-logic/ui-callback';\n\nexport class SdkConnectorConfigurator implements Connector {\n\n  private _configurator: Nullable<RoomleConfigurator> = null;\n  private _initWaiters: Array<(configurator: RoomleConfigurator) => void> = [];\n  private _store: Store<StoreState>;\n  private _analytics: Nullable<Analytics>;\n\n  private _uiCallbacks: UiCallbacks[] = [];\n\n  constructor(store: Store<StoreState>, analytics: Nullable<Analytics> = null) {\n    this._store = store;\n    this._analytics = analytics;\n  }\n\n  get api(): Promise<RoomleConfigurator> {\n    if (this._configurator) {\n      return Promise.resolve(this._configurator);\n    }\n    return new Promise((resolve) => this._initWaiters.push(resolve));\n  }\n\n  public async init(sdkWrapper: RoomleSdkWrapper, element: HTMLElement, initData: UiInitData): Promise<void> {\n    const sdkMain = await sdkWrapper.getConfigurator(element, initData);\n    const configurator = sdkMain.getApi();\n    if (!sdkWrapper.hasPlanner) {\n      await configurator.init(element);\n    }\n    return this.initConfigurator(configurator);\n  }\n\n  public initConfigurator(configurator: RoomleConfigurator) {\n    if (this._configurator) {\n      return;\n    }\n    // need to clear the callbacks on init to make browser-syncs live reload\n    // working in iframe as well\n    REGISTERED_CALLBACKS.clear();\n    this._configurator = configurator;\n\n    this.addCallback('onConfigurationLabelChange', (catalogName: string, rapiItemLabel: string, rootComponentLabel: string) => {\n      const safeLabel = rootComponentLabel || rapiItemLabel || catalogName || '';\n      this._store.commit(MUTATIONS.SET_LABEL, safeLabel);\n      if (!catalogName || safeLabel === catalogName) {\n        return;\n      }\n      this._store.commit(CORE_STATE_MUTATIONS.SET_CATALOG_LABEL, catalogName);\n    });\n\n    this.addCallback('onUpdateParameters', async (parameters: UiKernelParameter[]) => {\n      await this._updateParameterGroups(parameters);\n    });\n    this.addCallback('onUpdatePossibleChildren', async (possibleChildren: UiPossibleChildTag[]) => {\n      await this._updateAddons(possibleChildren.map((possibleChild): UiPossibleChildTagWithKey => {\n        possibleChild.key = possibleChild.id;\n        return possibleChild as UiPossibleChildTagWithKey;\n      }));\n    });\n\n    this.addCallback('onPartListUpdate', (partList: KernelPartList, hash: string) => {\n      if (!this._store.state.coreState.componentHasChildren && this._store.state.uiState.selectedActions.includes(BUTTON_ACTIONS.PARTLIST)) {\n        this._store.commit(UI_STATE_MUTATIONS.SET_ACTION_SELECTED, BUTTON_ACTIONS.PARTLIST);\n      }\n      this._store.commit(CORE_DATA_MUTATIONS.UPDATE_PART_LIST, partList);\n      this._store.dispatch(CORE_STATE_ACTIONS.UPDATE_HASH, hash);\n    });\n\n    this.addCallback('onConfigurationReady', (partList: KernelPartList, _hash: string, _label: string) => {\n      if (partList) {\n        this._store.commit(CORE_DATA_MUTATIONS.UPDATE_PART_LIST, partList);\n      }\n    });\n\n    this.addCallback('onBoundsUpdate', (bounds: KernelBoundsFormatted) => this._store.commit(CORE_DATA_MUTATIONS.UPDATE_BOUNDS, bounds));\n\n    this.addCallback('onConfigurationHasChildren', (hasChildren) => this._store.commit(CORE_STATE_MUTATIONS.SET_COMPONENT_HAS_CHILDREN, hasChildren));\n    this.addCallback('onClickOutside', () => {\n      this._configurator!.disableMultiselect();\n      this._store.commit(UI_STATE_MUTATIONS.SET_ACTION_DESELECTED, BUTTON_ACTIONS.MULTISELECT);\n    });\n    this.addCallback('onDimensionsVisibilityChange', (visible) => {\n      if (!visible) {\n        this._store.commit(UI_STATE_MUTATIONS.SET_ACTION_DESELECTED, BUTTON_ACTIONS.DIMENSIONS);\n      }\n    });\n    this.addCallback('onDockingsPreviewRemoved', () => this._store.commit(UI_STATE_MUTATIONS.SET_ACTIVE_ADDON, null));\n    this.addCallback('onNoDockingsAvailable', () => {\n      this._store.commit(UI_STATE_MUTATIONS.SET_ACTIVE_ADDON, null);\n      this._store.commit(UI_STATE_MUTATIONS.SET_OVERLAY_STATE, {overlay: OVERLAYS.NO_DOCKING, open: true});\n    });\n\n    this.addCallback('onSelectionChange', (selectionMode: string, isRoot: boolean, hasChildren: boolean, components: KernelComponent[]) => {\n      this._store.dispatch(UI_STATE_ACTIONS.SELECTION_CHANGE);\n      if (!this._store.state.uiState.isDesktop) {\n        this._store.dispatch(UI_STATE_ACTIONS.SET_INTERACTIONS_EXPANDED, false);\n      }\n      this._store.commit(UI_STATE_MUTATIONS.SET_CURRENT_SELECTION, {selectionMode, isRoot, hasChildren, components});\n      this._uiCallbacks.forEach((callback) => callback.onSelectionChange(selectionMode, isRoot, hasChildren, components));\n    });\n\n    this.addCallback('onSelectionCancel', () => {\n      this._store.commit(UI_STATE_MUTATIONS.SET_CURRENT_SELECTION, null);\n      if (this._store.state.uiState.onlyShowAddons) {\n        return;\n      }\n      this._store.dispatch(UI_STATE_ACTIONS.SELECTION_CHANGE);\n      if (!this._store.state.uiState.isDesktop) {\n        this._store.dispatch(UI_STATE_ACTIONS.SET_INTERACTIONS_EXPANDED, false);\n      }\n      this._uiCallbacks.forEach((callback) => callback.onSelectionCancel());\n    });\n\n    this.addCallback('onUpdatePrice', (currencySymbol: string, price: number) => {\n      this.setPrice(currencySymbol, price);\n    });\n\n    this.addCallback('onUserInitiatedDockDone', (childDbId: RapiId, _childDockId: number, parentDbId: RapiId) => {\n      this._analytics?.ga?.trackEvent('Dock', GA_CATEGORY.INTERACTION, childDbId + '#' + parentDbId);\n    });\n\n    this.addCallback('onKernelIsReady', () => {\n      if (performance && performance.timing) {\n        const time = Math.round((new Date()).getTime() - performance.timing.responseStart);\n        this._analytics?.ga.trackTiming(GA_CATEGORY.TIMING, GA_METRICS.KERNEL_IS_READY, time, {\n          [GA_METRICS.KERNEL_IS_READY]: time,\n        });\n      }\n    });\n\n    this.addCallback('onContentProblem', ({rapiPath, ids}) => {\n      if (rapiPath && ids) {\n        this._analytics?.ga.trackContentError('Trying to fetch \"' + rapiPath + '\" but the following IDs \"' + ids + '\" are not in the database, please check the script');\n      } else {\n        this._analytics?.ga.trackError('Reported content error but either ids (\"' + ids + '\") or rapiPath (\"' + rapiPath + '\") missing');\n      }\n    });\n    this._initWaiters.forEach((callback) => callback(this._configurator!));\n    this._initWaiters = [];\n  }\n\n  // tslint:disable-next-line:member-ordering\n  public addCallback<K extends keyof ConfiguratorUiCallbacks>(key: K, fun: ConfiguratorUiCallbacks[K], allowMultiple: boolean = false) {\n    if (!allowMultiple && REGISTERED_CALLBACKS.has(key)) {\n      throw new Error('Can not register callback \"' + key + '\" again!');\n    }\n    if (!this._configurator) {\n      return console.warn('PLEASE IMPLEMENT ME, this is just a quick fix, for more details see the method \"initGlbViewer\"');\n    }\n    // see: SDK file packages/configurator-core/src/services/configurator-ui-callback.ts\n    // those two functions are initilized with null on purpose\n    const knownUndefined = ['onKernelIsReady', 'onComponentPositionsUpdated'];\n    if (typeof this._configurator.callbacks[key] !== 'function' && !knownUndefined.includes(key)) {\n      console.warn('Can only assign to function properties on callbacks object, maybe \"' + key + '\" is not defined on the object');\n    }\n\n    if (allowMultiple && (this._configurator.callbacks as any)[key]) {\n      const oldCallback = (this._configurator.callbacks as any)[key].bind(this._configurator.callbacks);\n      // tslint:disable-next-line:only-arrow-functions\n      (this._configurator.callbacks as any)[key] = function () {\n        (fun as any)(...arguments);\n        oldCallback(...arguments);\n      };\n    } else {\n      ((this._configurator.callbacks) as any)[key] = fun;\n    }\n    REGISTERED_CALLBACKS.set(key, true);\n  }\n\n  public async setParameter(parameter: KernelParameter, value: string, isRaw: boolean = false): Promise<void> {\n    const api = await this.api;\n    if (this._analytics) {\n      const selection = api.getCurrentSelection();\n      const paramType = parameter.type ? parameter.type : '(UnknownType)';\n      const paramKey = parameter.key ? parameter.key : '(UnknownKey)';\n      this._analytics.ga?.trackEvent('Parameter:ChangeEvent', GA_CATEGORY.INTERACTION, selection.join(',') + '#' + paramType + '#' + paramKey + '#' + value);\n    }\n    return api.setParameter(parameter, value, isRaw);\n  }\n\n  public setPrice(currencySymbol: string, price: number) {\n    this._store.dispatch(CORE_DATA_ACTIONS.UPDATE_PRICE, {currencySymbol, price});\n  }\n\n  public addUiCallback(listener: UiCallbacks) {\n    if (this._uiCallbacks.includes(listener)) {\n      return;\n    }\n    this._uiCallbacks.push(listener);\n  }\n\n  public removeUiCallback(listener: UiCallbacks) {\n    const index = this._uiCallbacks.indexOf(listener);\n    if (index === -1) {\n      return;\n    }\n    this._uiCallbacks.splice(index, 1);\n  }\n\n  private _updateParameters(parameters: UiKernelParameter[]) {\n    this._store.commit(MUTATIONS.UPDATE_PARAMETERS, parameters);\n  }\n\n  private async _updateParameterGroups(parameters: UiKernelParameter[]) {\n    const groups: Map<string, ParameterGroup> = new Map<string, ParameterGroup>();\n    parameters.forEach((parameter) => {\n      if (parameter.grouping) {\n        let group = null;\n        if (groups.has(parameter.grouping.key)) {\n          group = groups.get(parameter.grouping.key);\n        } else {\n          group = {\n            key: parameter.grouping.key,\n            collapsed: parameter.grouping.collapsed,\n            label: parameter.grouping.label,\n            sort: parameter.grouping.sort,\n            parameters: [],\n          };\n          groups.set(group.key, group);\n        }\n        if (group) {\n          group.parameters.push(parameter);\n        }\n      }\n    });\n    const api = await this.api;\n    if (groups.size > 0) {\n      const parameterGroups = Array.from(groups.values());\n      parameterGroups.sort((g1, g2) => g1.sort - g2.sort);\n      this._store.commit(MUTATIONS.UPDATE_GROUPS, parameterGroups);\n      this._checkParameterGroups(api);\n\n      const selectedGroup = (this._store.state as any).uiState.selectedGroup;\n      let groupToSelect: Nullable<ParameterGroup> = null;\n      if (selectedGroup) {\n        groupToSelect = parameterGroups.find((param) => selectedGroup.key === param.key) || null;\n      }\n      if (!groupToSelect) {\n        groupToSelect = parameterGroups[0];\n      }\n      // we always need to rerender parameters because from kernel we do not get a reference (JSON.parse(JSON.stringify))\n      // and a parameter could be different and have the same key, e.g.: different valid values\n      this._store.commit(UI_STATE_MUTATIONS.SET_SELECTED_GROUP, groupToSelect);\n      this.api.then((configurator) => {\n        const isGroupStillThere = this._store.state.coreData.groups.find((group) => groupToSelect?.key === group.key);\n        if (!isGroupStillThere) {\n          return;\n        }\n        configurator.setActiveGroupInView(groupToSelect ? groupToSelect.key : '');\n      });\n      this._updateParameters(groupToSelect!.parameters);\n    } else {\n      this._store.commit(MUTATIONS.UPDATE_GROUPS, []);\n      this._updateParameters(parameters);\n    }\n  }\n\n  private async _updateAddons(possibleChildrenTags: UiPossibleChildTagWithKey[]) {\n    const api = await this.api;\n    this._store.commit(CORE_DATA_MUTATIONS.UPDATE_ADDONS, possibleChildrenTags);\n    this._checkParameterGroups(api);\n  }\n\n  private _checkParameterGroups(api: RoomleConfigurator): boolean {\n    if (!!this._store.state.uiState.currentSelection) {\n      return false;\n    }\n    const addonGroupKeys = new Set<string>();\n    const storedAddons = this._store.state.coreData.addons;\n    storedAddons.forEach((pct) => pct.possibleChildren.forEach((pc) => addonGroupKeys.add(pc.group)));\n    let storedGroups = this._store.state.coreData.groups;\n    const missingGroups = new Set<string>();\n\n    // check if every group exists which is referenced in an addon\n    addonGroupKeys.forEach((groupKey) => {\n      const group = storedGroups.find((g) => g.key === groupKey);\n      if (!group) {\n        missingGroups.add(groupKey);\n      }\n    });\n\n    // if a group is missing we check if it exists at all\n    if (missingGroups.size) {\n      storedGroups = this._store.state.coreData.groups;\n      const allParameterGroups: KernelParameterGroup[] = api.getParameterGroups();\n\n      // then we add missing groups to the UI\n      missingGroups.forEach((groupKey) => {\n        const missingGroup = allParameterGroups.find((g) => g.key === groupKey) as ParameterGroup;\n        if (missingGroup && !storedGroups.find((g) => g.key === groupKey)) {\n          missingGroup.parameters = [];\n          storedGroups.push(missingGroup);\n        }\n      });\n      storedGroups.sort((g1, g2) => g1.sort - g2.sort);\n      this._store.commit(MUTATIONS.UPDATE_GROUPS, storedGroups);\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n","import {Connector} from '@/configurator/business-logic/sdk-connector';\nimport {Nullable} from '@/common/utils/types';\nimport {Store} from 'vuex';\nimport {StoreState} from '@/common/store';\nimport {Analytics} from '@/common/plugins/analytics';\nimport {RoomleSdkWrapper} from '@/configurator/business-logic/roomle-sdk-wrapper';\nimport {UiInitData} from '@/configurator/embedding/types';\nimport RoomleGLBViewer from '@roomle/web-sdk/lib/definitions/glb-viewer-core/src/roomle-glb-viewer';\n\nexport class SdkConnectorViewer implements Connector {\n  private _viewer: Nullable<RoomleGLBViewer> = null;\n  private _initWaiters: Array<(configurator: RoomleGLBViewer) => void> = [];\n  private _store: Store<StoreState>;\n  private _analytics: Nullable<Analytics>;\n\n  constructor(store: Store<StoreState>, analytics: Nullable<Analytics> = null) {\n    this._store = store;\n    this._analytics = analytics;\n  }\n\n  get api(): Promise<RoomleGLBViewer> {\n    if (this._viewer) {\n      return Promise.resolve(this._viewer);\n    }\n    return new Promise((resolve) => this._initWaiters.push(resolve));\n  }\n\n  public async init(sdkWrapper: RoomleSdkWrapper, element: HTMLElement, initData: UiInitData): Promise<void> {\n    const sdkMain = await sdkWrapper.getGlbViewer(element, initData);\n    const viewer = sdkMain.getApi();\n    if (!sdkWrapper.hasPlanner) {\n      await viewer.init(element);\n    }\n    return this.initViewer(viewer);\n  }\n\n  public initViewer(viewer: RoomleGLBViewer) {\n    if (this._viewer) {\n      return;\n    }\n    this._viewer = viewer;\n  }\n\n}\n","import {Nullable} from '@/common/utils/types';\nimport {SelectionPayload} from '@roomle/web-sdk/lib/definitions/planner-core/src/roomle-planner-ui-callback';\n\nexport const isCorrectSelectionPayload = (currentlySelected: Nullable<SelectionPayload>, asyncSelectionData: SelectionPayload) => {\n  if (!currentlySelected) {\n    // selection was canceled before promise resolved\n    return false;\n  }\n  if (currentlySelected.configurationRuntimeId !== asyncSelectionData.configurationRuntimeId) {\n    // selection was changed before promise resolved (other configuration, configurable item selected)\n    return false;\n  }\n\n  if ((!!currentlySelected.item) !== (!!asyncSelectionData.item)) {\n    // selection was changed before promise resolved (switched from static item to configurable or other way round)\n    if (asyncSelectionData.configurationRuntimeId !== currentlySelected.configurationRuntimeId) {\n      // selection was changed before promise resolved (switched from configurable item to something else)\n      return false;\n    }\n  }\n\n  if (currentlySelected.item && asyncSelectionData.item && currentlySelected.item.id !== asyncSelectionData.item.id) {\n    // selection was changed before promise resolved (other static item selected)\n    return false;\n  }\n  return true;\n};\n\n","import {Connector} from '@/configurator/business-logic/sdk-connector';\nimport {Nullable} from '@/common/utils/types';\nimport {Store} from 'vuex';\nimport {StoreState} from '@/common/store';\nimport {Analytics} from '@/common/plugins/analytics';\nimport {RoomleSdkWrapper} from '@/configurator/business-logic/roomle-sdk-wrapper';\nimport {UiInitData} from '@/configurator/embedding/types';\nimport RoomlePlanner from '@roomle/web-sdk/lib/definitions/planner-core/src/roomle-planner';\nimport {SelectionPayload} from '@roomle/web-sdk/lib/definitions/planner-core/src/roomle-planner-ui-callback';\nimport {PLANNER_UI_STATE_MUTATIONS} from '@/planner/store/planner-ui-state';\nimport {isCorrectSelectionPayload} from '@/planner/utils/interaction';\nimport {RapiId, RapiPlan} from '@roomle/web-sdk/lib/definitions/typings/rapi-types';\nimport {COLLECTION_VIEW_STATE_MUTATIONS} from '@/common/store/collection-view-state';\nimport {Base64Image} from '@roomle/web-sdk/lib/definitions/common-core/src/common-interfaces';\n\nexport class SdkConnectorPlanner implements Connector {\n  private _planner: Nullable<RoomlePlanner> = null;\n  private _initWaiters: Array<(configurator: RoomlePlanner) => void> = [];\n  private _store: Store<StoreState>;\n  private _sdkWrapper: Nullable<RoomleSdkWrapper> = null;\n  private _analytics: Nullable<Analytics>;\n  private _currentPlan: Nullable<RapiPlan> = null;\n  private _lastPlanId: Nullable<RapiId> = null;\n\n  constructor(store: Store<StoreState>, analytics: Nullable<Analytics> = null) {\n    this._store = store;\n    this._analytics = analytics;\n  }\n\n  get api(): Promise<RoomlePlanner> {\n    if (this._planner) {\n      return Promise.resolve(this._planner);\n    }\n    return new Promise((resolve) => this._initWaiters.push(resolve));\n  }\n\n  public async init(sdkWrapper: RoomleSdkWrapper, element: HTMLElement, initData: UiInitData): Promise<void> {\n    this._sdkWrapper = sdkWrapper;\n    const sdkMain = await this._sdkWrapper.getPlanner(element, initData);\n    const planner = sdkMain.getApi();\n    await planner.init(element);\n    return this.initPlanner(planner);\n  }\n\n  public initPlanner(planner: RoomlePlanner) {\n    if (this._planner) {\n      return;\n    }\n\n    this._planner = planner;\n\n    const plannerApi = this._planner;\n    plannerApi.callbacks.onSelectionChange = (_mode: string, objectType: string, payload: SelectionPayload, payloadPromise: Promise<SelectionPayload>) => {\n      this._store.commit(PLANNER_UI_STATE_MUTATIONS.SET_SELECTION_PAYLOAD, payload);\n      payloadPromise.then((payloadData: SelectionPayload) => {\n        if (!isCorrectSelectionPayload(this._store.state.plannerUiState.selectionPayload, payloadData)) {\n          return;\n        }\n        this._store.commit(PLANNER_UI_STATE_MUTATIONS.SET_SELECTION_PAYLOAD, payloadData);\n      });\n      this._store.commit(PLANNER_UI_STATE_MUTATIONS.SET_SELECTION, objectType);\n      if (!this._store.state.plannerUiState.isDesktop && this._store.state.plannerUiState.interactionsExpanded) {\n        this._store.commit(PLANNER_UI_STATE_MUTATIONS.SET_INTERACTIONS_EXPANDED, false);\n      }\n    };\n    plannerApi.callbacks.onSelectionCancel = () => {\n      if (!this._store.state.uiState.isDesktop) {\n        this._store.commit(PLANNER_UI_STATE_MUTATIONS.SET_INTERACTIONS_EXPANDED, false);\n        const state = this._store.state.plannerUiState.sidebar;\n        this._store.commit(COLLECTION_VIEW_STATE_MUTATIONS.ELEMENT_EXPANDED, {state, value: false});\n      }\n      this._store.commit(PLANNER_UI_STATE_MUTATIONS.SET_SELECTION_PAYLOAD, null);\n      this._store.commit(PLANNER_UI_STATE_MUTATIONS.SET_SELECTION, null);\n    };\n\n    this._initWaiters.forEach((callback) => callback(this._planner!));\n    this._initWaiters = [];\n  }\n\n  public async loadPlan(id: RapiId): Promise<void> {\n    if (!this._sdkWrapper) {\n      throw new Error('can not load plan because sdkWrapper is not ready');\n    }\n    const rapiAccess = await this._sdkWrapper.getRapiAccess();\n    const plan = await rapiAccess.getPlan(id);\n    const api = await this.api;\n    await api.loadPlan(id);\n    this._lastPlanId = plan.id as string;\n    this._currentPlan = plan;\n    // if the plan has an ID we delete it because\n    // we want that the RAPI creates a new plan for us\n    delete this._currentPlan.id;\n  }\n\n  public async loadPlanBasedOnObjectId(id: RapiId) {\n    const {EMPTY_PLAN} = await import('@/common/utils/plan');\n    const api = await this.api;\n    await api.loadPlanXml(EMPTY_PLAN, this._store.state.uiState.initData as any);\n    await api.insertObject(id);\n    if (!this._sdkWrapper) {\n      throw new Error('can not load plan because sdkWrapper is not ready');\n    }\n    const rapiAccess = await this._sdkWrapper.getRapiAccess();\n    const plan: RapiPlan = rapiAccess.createNewPlan();\n    plan.planObjects = await this._getCurrentPlanXML();\n    this._lastPlanId = null;\n    this._currentPlan = plan;\n    // if the plan has an ID we delete it because\n    // we want that the RAPI creates a new plan for us\n    delete this._currentPlan.id;\n  }\n\n  public async saveCurrentPlan(image?: Base64Image) {\n    const planObjects = await this._getCurrentPlanXML();\n    if (!this._sdkWrapper) {\n      throw new Error('can not save plan because sdkWrapper is not ready');\n    }\n    const rapiAccess = await this._sdkWrapper.getRapiAccess();\n    const {\n      token,\n      userId,\n    } = await rapiAccess.signinUser(process.env.VUE_APP_DUMMY_USER as string, process.env.VUE_APP_DUMMY_PASSWORD as string);\n    rapiAccess.setCurrentToken(token);\n    if (!this._currentPlan) {\n      throw new Error('no plan loaded, can not save');\n    }\n    this._currentPlan.user = userId;\n    this._currentPlan.planObjects = planObjects;\n    if (this._lastPlanId) {\n      this._currentPlan.parent = this._lastPlanId;\n    }\n    const planner = await this.api;\n    if (!image) {\n      const perspectiveImage = await planner.preparePerspectiveImage();\n      image = perspectiveImage;\n    }\n    this._currentPlan.thumbnail = image.image;\n    const savedPlan = await rapiAccess.savePlan(this._currentPlan);\n    this._currentPlan = savedPlan;\n    rapiAccess.removeCurrentToken();\n    return this._currentPlan;\n  }\n\n  private async _getCurrentPlanXML(): Promise<string> {\n    const api = await this.api;\n    const planInteractionHandler = await api.getPlanInteractionHandler();\n    const plan = planInteractionHandler.getPlan();\n    return plan.getPlanXML(false /** includeRuntimeId */, 2 /** XML version */);\n  }\n}\n","import {Store} from 'vuex';\nimport {StoreState} from '@/common/store';\nimport {UI_STATE_ACTIONS, UI_STATE_MUTATIONS} from '@/configurator/store/ui-state';\nimport {Nullable} from '@/common/utils/types';\nimport {KernelParameter, KernelPartList, UiPossibleChildTag} from '@roomle/web-sdk/lib/definitions/typings/kernel';\nimport {checkForActivePackage, getHostname, isIdAnItem, isIdAPlan, NAMES_FOR_LOCALHOST} from '@/common/utils/helper';\nimport ConfiguratorUiCallbacks from '@roomle/web-sdk/lib/definitions/configurator-core/src/services/configurator-ui-callback';\nimport {hideLoadingCircle, removeLoadingScreen, setLoadingProgress, showLoadingScreen} from '@/common/utils/dom';\nimport {Analytics} from '@/common/plugins/analytics';\nimport {RoomleSdkWrapper} from '@/configurator/business-logic/roomle-sdk-wrapper';\nimport RoomleGLBViewer from '@roomle/web-sdk/lib/definitions/glb-viewer-core/src/roomle-glb-viewer';\nimport RapiAccess from '@roomle/web-sdk/lib/definitions/common-core/src/rapi-access';\nimport {addLoadMark, calcTiming} from '@/common/utils/performance';\n// tslint:disable:no-unused-expression -- only import type because otherwise everything is bundled\nimport type {MessageHandler} from '@/configurator/embedding/message-handler';\nimport type {ExposedCallbacks} from '@/configurator/embedding/exposed-callbacks';\nimport {ConfiguratorSettings, UiInitData} from '@/configurator/embedding/types';\nimport {getConfiguratorSettings} from '@/configurator/embedding/utils';\nimport {sameOrigin} from '@/common/utils/iframe';\nimport RoomlePlanner from '@roomle/web-sdk/lib/definitions/planner-core/src/roomle-planner';\nimport {SdkConnectorConfigurator} from '@/configurator/business-logic/sdk-connector-configurator';\nimport {SdkConnectorViewer} from '@/viewer/business-logic/sdk-connector-viewer';\nimport {SdkConnectorPlanner} from '@/planner/business-logic/sdk-connector-planner';\nimport {GA_CATEGORY, GA_METRICS} from '@/common/utils/google-analytics';\nimport {RapiConfigurationEnhanced, RapiId, RapiPlan} from '@roomle/web-sdk/lib/definitions/typings/rapi-types';\nimport {getCurrentVariants} from '@/common/utils/parameters';\nimport RoomleConfigurator from '@roomle/web-sdk/lib/definitions/configurator-core/src/roomle-configurator';\nimport {CORE_STATE_GETTERS} from '@/configurator/store/core-state';\nimport {ExposedApi} from '@/configurator/embedding/exposed-api';\nimport {UiCallbacks} from '@/configurator/business-logic/ui-callback';\nimport {COMMON_UI_STATE_MUTATIONS} from '@/common/store/common-ui-state';\nimport {Base64Image} from '@roomle/web-sdk/lib/definitions/common-core/src/common-interfaces';\n// tslint:enable:no-unused-expression\n\n// can only import type of ConfiguratorUiCallbacks but can not use it for new. This is because we bundle our stuff into random chunks and\n// therefore TS compiler can not find it\n// import ConfiguratorUiCallbacks from '@roomle/web-sdk/lib/definitions/configurator-core/src/services/configurator-ui-callback';\n\nexport enum SDK_MODULES {\n  VIEWER = 0,\n  CONFIGURATOR = 1,\n  PLANNER = 2,\n}\n\nexport interface Selectable {\n  key: string;\n}\n\nexport interface UiPossibleChildTagWithKey extends UiPossibleChildTag {\n  key: string;\n}\n\nexport type LoadResponse = PartlistResponse | void;\n\nexport interface PartlistResponse {\n  partList: KernelPartList;\n}\n\nexport const getSelectableEntry = (selected: Selectable, data: Selectable[]): Nullable<Selectable> => {\n  const validData = data && data.length;\n  if (!validData) {\n    return null;\n  }\n  return (!selected) ? null : (data.find((entry) => selected.key === entry.key) || null);\n\n};\n\nexport const REGISTERED_CALLBACKS: Map<keyof ConfiguratorUiCallbacks, boolean> = new Map();\n\nexport interface Connector {\n  readonly api: any;\n\n  init(sdkWrapper: RoomleSdkWrapper, element: HTMLElement, initData: UiInitData): Promise<void>;\n}\n\nexport class SdkConnector {\n\n  protected loadInProgress: boolean = false; // protected so we can override it for tests\n  protected someLoadDone: boolean = false; // protected so we can override it for tests\n\n  private _store: Store<StoreState>;\n  private _loadWaiters: Array<(kernelParts: Nullable<LoadResponse>) => void> = [];\n  private _analytics: Nullable<Analytics>;\n  private _sdkWrapper: RoomleSdkWrapper;\n  private _messageHandler: Nullable<MessageHandler> = null;\n  private _embeddingCallbacks: Nullable<ExposedCallbacks>;\n\n  private _initWaitersConfiguratorConnector: Array<(connectorConfigurator: SdkConnectorConfigurator) => void> = [];\n  private _initWaitersViewerConnector: Array<(connectorViewer: SdkConnectorViewer) => void> = [];\n  private _initWaitersPlannerConnector: Array<(connectorPlanner: SdkConnectorPlanner) => void> = [];\n\n  private _waitForCanvasElementCallback: Nullable<(element: HTMLElement) => void> = null;\n  private _canvasElement: Nullable<HTMLElement> = null;\n\n  private _configuratorSettingsCache: Map<string, ConfiguratorSettings> = new Map();\n\n  private _connectorConfigurator: Nullable<SdkConnectorConfigurator> = null;\n  private _connectorViewer: Nullable<SdkConnectorViewer> = null;\n  private _connectorPlanner: Nullable<SdkConnectorPlanner> = null;\n\n  get configuratorConnector(): Promise<SdkConnectorConfigurator> {\n    if (this._connectorConfigurator) {\n      return Promise.resolve(this._connectorConfigurator);\n    }\n    return new Promise((resolve) => this._initWaitersConfiguratorConnector.push(resolve));\n  }\n\n  get viewerConnector(): Promise<SdkConnectorViewer> {\n    if (this._connectorViewer) {\n      return Promise.resolve(this._connectorViewer);\n    }\n    return new Promise((resolve) => this._initWaitersViewerConnector.push(resolve));\n  }\n\n  get plannerConnector(): Promise<SdkConnectorPlanner> {\n    if (this._connectorPlanner) {\n      return Promise.resolve(this._connectorPlanner);\n    }\n    return new Promise((resolve) => this._initWaitersPlannerConnector.push(resolve));\n  }\n\n  get configuratorApi(): Promise<RoomleConfigurator> {\n    return new Promise((resolve) => {\n      this.configuratorConnector.then((connector) => {\n        connector.api.then((api) => resolve(api));\n      });\n    });\n  }\n\n  get plannerApi(): Promise<RoomlePlanner> {\n    return new Promise((resolve) => {\n      this.plannerConnector.then((connector) => {\n        connector.api.then((api) => resolve(api));\n      });\n    });\n  }\n\n  get viewerApi(): Promise<RoomleGLBViewer> {\n    return new Promise((resolve) => {\n      this.viewerConnector.then((connector) => {\n        connector.api.then((api) => resolve(api));\n      });\n    });\n  }\n\n  constructor(sdkWrapper: RoomleSdkWrapper, store: Store<StoreState>, analytics: Nullable<Analytics> = null, embeddingCallbacks: Nullable<ExposedCallbacks> = null) {\n    this._analytics = analytics;\n    this._sdkWrapper = sdkWrapper;\n    this._store = store;\n    this._embeddingCallbacks = embeddingCallbacks;\n  }\n\n  public setMessageHandler(messageHandler: MessageHandler) {\n    this._messageHandler = messageHandler;\n  }\n\n  public async createExposedApi(module: SDK_MODULES) {\n    // if message handler is not defined (needed for embedding api)\n    // and iframe and parent are different origin -> something is wrong\n    if (!this._messageHandler && !sameOrigin()) {\n      console.error('Message handler not defined? Maybe you called createExposedApi too early?');\n      return;\n    }\n\n    let api;\n    if (module === SDK_MODULES.PLANNER) {\n      api = await this.plannerApi;\n    } else if (module === SDK_MODULES.VIEWER) {\n      api = await this.viewerApi;\n    } else {\n      api = await this.configuratorApi;\n    }\n    // tslint:disable-next-line:no-unused-expression\n    new ExposedApi(\n      this,\n      this._messageHandler,\n      api,\n      this._embeddingCallbacks!,\n      this._store,\n      this._analytics!,\n    );\n  }\n\n  public async getRapiAccess(): Promise<RapiAccess> {\n    return await this._sdkWrapper.getRapiAccess();\n  }\n\n  public waitForLoad(): Promise<Nullable<LoadResponse>> {\n    if (!this.loadInProgress && this.someLoadDone) {\n      return Promise.resolve(null);\n    }\n    return new Promise((resolve) => this._loadWaiters.push(resolve));\n  }\n\n  public async goBack() {\n    showLoadingScreen();\n    hideLoadingCircle();\n    if (this._store.state.uiState.isConfigurator && this._store.getters[CORE_STATE_GETTERS.HAS_CONFIGURATION_CHANGE]) {\n      (await (await this.configuratorApi).saveCurrentConfiguration());\n    }\n    (await this.plannerApi).back();\n    this._store.dispatch(UI_STATE_ACTIONS.USE_PLANNER);\n    removeLoadingScreen();\n  }\n\n  /**\n   * @deprecated use .configuratorConnector.then((connector) => connector.addUiCallback(listener))\n   * @param listener\n   */\n  public addUiCallback(listener: UiCallbacks) {\n    this.configuratorConnector.then((connector) => connector.addUiCallback(listener));\n  }\n\n  /**\n   * @deprecated use configuratorConnector.then((connector) => connector.removeUiCallback(listener))\n   * @param listener\n   */\n  public removeUiCallback(listener: UiCallbacks) {\n    this.configuratorConnector.then((connector) => connector.removeUiCallback(listener));\n  }\n\n  public async setParameter(parameter: KernelParameter, value: string, isRaw: boolean = false): Promise<void> {\n    return (await this.configuratorConnector).setParameter(parameter, value, isRaw);\n  }\n\n  public async hasActivePackage(): Promise<boolean> {\n    const tenant = await this.getTenant();\n    return checkForActivePackage(tenant);\n  }\n\n  public async isCorrectConfiguratorDomain(configuratorId: string): Promise<boolean> {\n    const hostname = getHostname();\n    if (hostname && NAMES_FOR_LOCALHOST.includes(hostname)) {\n      return true;\n    }\n    const rapiAccess = await this.getRapiAccess();\n    const configuratorObject = await rapiAccess.getConfiguratorSettings(configuratorId);\n    const hasGlobalWildCard = (configuratorObject.allowedHosts as string[]).includes('*');\n    if (hasGlobalWildCard) {\n      return true;\n    }\n\n    if (!hostname) {\n      console.error('document.referrer not available, check security settings! Otherwise we can not check configurator settings');\n      return false;\n    }\n\n    if (!configuratorObject.allowedHosts.includes(hostname)) {\n      console.error('None of the following domains \"' + configuratorObject.allowedHosts.join(', ') + '\" matched \"' + hostname + '\"');\n      return false;\n    }\n    return true;\n  }\n\n  public async loadObject(id: string): Promise<Nullable<LoadResponse>> {\n    if (this.loadInProgress) {\n      console.warn('Will not load ' + id + ', please wait until the last object has finished loading!');\n    }\n    addLoadMark();\n    let result: Nullable<LoadResponse> = null;\n    // handle configuration\n    if (isIdAPlan(id)) { // is a plan\n      await this.loadPlan(id);\n    } else if (isIdAnItem(id)) { // is an item\n      if (this._store.state.uiState.initData?.moc) {\n        await this.loadPlan(id, {isObjectId: true});\n        return null;\n      }\n      const isGlb = await this.isIdAGlb(id);\n      if (isGlb) { // is a static item\n        result = await this.loadStaticItem(id);\n      } else { // is a configurable item\n        result = await this.loadConfigurableItem(id);\n      }\n    } else { // is a configuration\n      if (this._store.state.uiState.initData?.moc) {\n        await this.loadPlan(id, {isObjectId: true});\n        return null;\n      }\n      result = await this.loadConfiguration(id);\n    }\n    calcTiming();\n    return result;\n  }\n\n  public async loadStaticItem(id: Nullable<string>): Promise<null> {\n    this._store.commit(COMMON_UI_STATE_MUTATIONS.SET_LAST_REQUESTED_ID, id);\n    this._startLoading();\n    let api: RoomleGLBViewer;\n    await this.initCanvasElement(SDK_MODULES.VIEWER);\n    if (id) {\n      api = await this.viewerApi;\n      await api.loadStaticItem(id, setLoadingProgress);\n    }\n    removeLoadingScreen();\n    return null;\n  }\n\n  public async loadPlan(id: Nullable<string>, options: {isObjectId?: boolean} = {}): Promise<null> {\n    this._startLoading();\n    await this.initCanvasElement(SDK_MODULES.PLANNER);\n    if (id) {\n      const plannerConnector = (await this.plannerConnector);\n      if (!options.isObjectId) {\n        await plannerConnector.loadPlan(id);\n      } else {\n        await plannerConnector.loadPlanBasedOnObjectId(id);\n      }\n    }\n    this._finishLoading();\n    return null;\n  }\n\n  public async loadConfiguration(configurationId: string, initData?: UiInitData | undefined): Promise<Nullable<LoadResponse>> {\n    this._fetchVariants(configurationId);\n    return await this._execLoadingConfiguratorProcess(configurationId, async (id: string) => (await this.configuratorApi).loadConfigurationById(id, initData));\n  }\n\n  public async loadSelectedPlanObject() {\n    if (!this._store.state.plannerUiState.selectionPayload) {\n      return;\n    }\n    const selection = this._store.state.plannerUiState.selection;\n    if (selection === 'configuration') {\n      const {\n        configurationRuntimeId,\n        component,\n      } = this._store.state.plannerUiState.selectionPayload;\n      const id = component!.id!;\n      return this.loadPlanObjectId(id, configurationRuntimeId!);\n    } else {\n      const {item} = this._store.state.plannerUiState.selectionPayload;\n      return this.loadStaticItem(item!.id);\n    }\n  }\n\n  public async loadPlanObjectId(configurationId: string, planObjectId: number): Promise<Nullable<LoadResponse>> {\n    // needed here because on slow devices/internet connection it takes a second\n    // until all the async vue-components are fetched the first time\n    showLoadingScreen();\n    this._fetchVariants(configurationId);\n    return await this._execLoadingConfiguratorProcess(configurationId,\n      async (_id: string) => (await this.configuratorApi).syncPlanObjectToView(-1, planObjectId));\n  }\n\n  public async loadConfigurationString(configurationString: string, initData?: UiInitData | undefined): Promise<Nullable<LoadResponse>> {\n    // check for variants here because parsing the configuration string can be very expensive\n    if (this._store.state.uiState.initData?.variants) {\n      try {\n        if (!configurationString) {\n          return null;\n        }\n        const {componentId} = JSON.parse(configurationString);\n        this._fetchVariants(componentId);\n      } catch (e) {\n        console.error('Problems fetching variants for configuration string');\n      }\n    }\n    return this._execLoadingConfiguratorProcess(configurationString, async (confString: string) => (await this.configuratorApi).loadConfiguration(confString, initData));\n  }\n\n  public async loadConfigurableItem(configurableItemId: string, initData?: UiInitData | undefined): Promise<Nullable<LoadResponse>> {\n    const result = this._execLoadingConfiguratorProcess(configurableItemId, async (itemId: string) => (await this.configuratorApi).loadConfigurableItemById(itemId, initData));\n    // since a configurableItemId does not need to match with the root component ID\n    // we need to fetch the current configuration hash from the kernel, this is not\n    // a network call but we need to wait until the kernel is ready\n    this.waitForLoad().then(async () => {\n      const api = await this.configuratorApi;\n      this._fetchVariants(await api.getCurrentConfigurationHash());\n    });\n    return result;\n  }\n\n  public async isIdAGlb(id: string) {\n    if (!isIdAnItem(id)) {\n      return false;\n    }\n    const rapiAccess = await this.getRapiAccess();\n    const item = await rapiAccess.getItem(id);\n    return !item.configuration;\n  }\n\n  public canvasElementReady(element: HTMLElement) {\n    this._canvasElement = element;\n    if (this._waitForCanvasElementCallback) {\n      this._waitForCanvasElementCallback(element);\n    }\n  }\n\n  public async initCanvasElement(module: SDK_MODULES) {\n    if (this._needsInit(module)) {\n      const {USE_VIEWER, USE_CONFIGURATOR, USE_PLANNER} = UI_STATE_ACTIONS;\n      let moduleToActivate: UI_STATE_ACTIONS;\n      switch (module) {\n        case SDK_MODULES.VIEWER:\n          moduleToActivate = USE_VIEWER;\n          break;\n        case SDK_MODULES.PLANNER:\n          moduleToActivate = USE_PLANNER;\n          break;\n        default:\n          moduleToActivate = USE_CONFIGURATOR;\n          break;\n      }\n      const element = await this._waitForCanvasElement(moduleToActivate);\n      const initData = this._store.state.uiState.initData!;\n\n      switch (moduleToActivate) {\n        case USE_VIEWER:\n          this._connectorViewer = new SdkConnectorViewer(this._store, this._analytics);\n          await this._connectorViewer.init(this._sdkWrapper, element, initData);\n          this._initWaitersViewerConnector.forEach((callback) => callback(this._connectorViewer!));\n          break;\n        case USE_PLANNER:\n          this._connectorPlanner = new SdkConnectorPlanner(this._store, this._analytics);\n          await this._connectorPlanner.init(this._sdkWrapper, element, initData);\n          this._initWaitersPlannerConnector.forEach((callback) => callback(this._connectorPlanner!));\n          break;\n        default:\n          this._connectorConfigurator = new SdkConnectorConfigurator(this._store, this._analytics);\n          await this._connectorConfigurator.init(this._sdkWrapper, element, initData);\n          this._initWaitersConfiguratorConnector.forEach((callback) => callback(this._connectorConfigurator!));\n          break;\n      }\n    }\n  }\n\n  public async getTenant() {\n    const rapiAccess = await this.getRapiAccess();\n    const initData = this._store.state.uiState.initData!;\n    const configuratorId = initData.configuratorId!;\n    let configuratorSettings;\n    // configuratorSettings is a bad naming because it's embeddingSettings\n    if (this._configuratorSettingsCache.has(configuratorId)) {\n      configuratorSettings = this._configuratorSettingsCache.get(configuratorId) as ConfiguratorSettings;\n    } else {\n      configuratorSettings = await getConfiguratorSettings(configuratorId, initData);\n      this._configuratorSettingsCache.set(configuratorId, configuratorSettings);\n    }\n    return rapiAccess.getTenant(configuratorSettings.tenant);\n  }\n\n  public async saveCurrentConfiguration() {\n    const api = await this.configuratorApi;\n    return api.saveCurrentConfiguration();\n  }\n\n  public giveGaConsent() {\n    if (!this._analytics) {\n      return;\n    }\n    this._analytics.ga.cleanUpHistory();\n    this._analytics.ga.giveConsent();\n  }\n\n  public get hasPlanner(): boolean {\n    return this._sdkWrapper.hasPlanner;\n  }\n\n  public async saveCurrentObject(): Promise<RapiPlan | RapiConfigurationEnhanced> {\n    if (this._store.state.uiState.initData?.moc) {\n      const plannerConnector = await this.plannerConnector;\n      return plannerConnector.saveCurrentPlan();\n    }\n    return this.saveCurrentConfiguration();\n  }\n\n  public async preparePerspectiveImage(): Promise<Base64Image> {\n    if (this._store.state.uiState.initData?.moc) {\n      const planner = await this.plannerApi;\n      return planner.preparePerspectiveImage();\n    }\n    const configurator = await this.configuratorApi;\n    return configurator.preparePerspectiveImage();\n  }\n\n  private _waitForCanvasElement(moduleToUse: UI_STATE_ACTIONS): Promise<HTMLElement> {\n    return new Promise((resolve) => {\n      this._store.dispatch(moduleToUse);\n      if (this._canvasElement) {\n        resolve(this._canvasElement);\n      } else {\n        this._waitForCanvasElementCallback = resolve;\n      }\n    });\n  }\n\n  private _needsInit(module: SDK_MODULES) {\n    const isCurrentlyConfigurator = this._store.state.uiState.isConfigurator;\n    const isCurrentlyViewer = this._store.state.uiState.isViewer;\n    const isCurrentlyPlanner = this._store.state.uiState.isPlanner;\n    const isInitialBoot = !isCurrentlyConfigurator && !isCurrentlyViewer && !isCurrentlyPlanner;\n    return isInitialBoot\n      || (isCurrentlyConfigurator && module !== SDK_MODULES.CONFIGURATOR)\n      || (isCurrentlyViewer && module !== SDK_MODULES.VIEWER)\n      || (isCurrentlyPlanner && module !== SDK_MODULES.PLANNER);\n  }\n\n  private async _fetchVariants(id: Nullable<RapiId>): Promise<void> {\n    this._store.commit(COMMON_UI_STATE_MUTATIONS.SET_LAST_REQUESTED_ID, id);\n    if (!id) {\n      return;\n    }\n    const variantChangeMap = this._store.state.uiState.initData?.variants;\n    if (!variantChangeMap) {\n      return;\n    }\n    const api = await this.configuratorApi;\n    const tag = await getCurrentVariants(api, id, variantChangeMap);\n    if (!tag) {\n      return;\n    }\n    this._store.commit(UI_STATE_MUTATIONS.SET_CURRENT_VARIANTS, tag);\n  }\n\n  private async _execLoadingConfiguratorProcess(id: string, method: (id: string) => Promise<Nullable<LoadResponse>>) {\n    this._startLoading();\n    let result: Nullable<LoadResponse> = null;\n    await this.initCanvasElement(SDK_MODULES.CONFIGURATOR);\n    try {\n      result = await method(id);\n    } catch (e) {\n      console.error(e);\n      result = null;\n    }\n    this._finishLoading(result);\n    /**\n     * BREAKING SINCE VERSION 3.12.0-alpha.1 (as of 2020-11-05)\n     * we return now the whole partlist object which we get from\n     * the Core and not only the fullList\n     * Link: https://gitlab.com/roomle/web/roomle-ui/-/merge_requests/303\n     */\n    if (this._store.state.uiState.initData?.featureFlags?.realPartList) {\n      return result;\n    } else {\n      return (result) ? result.partList?.fullList as any : result;\n    }\n  }\n\n  private _startLoading() {\n    this.loadInProgress = true;\n    this._store.commit(UI_STATE_MUTATIONS.SET_IS_LOADING_IN_PROGRESS, this.loadInProgress);\n    this._store.commit(UI_STATE_MUTATIONS.SET_CURRENT_VARIANTS, null);\n    this._store.dispatch(UI_STATE_ACTIONS.RESET_COLLECTION_VIEW, null);\n  }\n\n  private _finishLoading(kernelParts: Nullable<LoadResponse>) {\n    removeLoadingScreen();\n    this._loadWaiters.forEach((callback) => callback(kernelParts));\n    this._loadWaiters = [];\n    this.loadInProgress = false;\n    this._store.commit(UI_STATE_MUTATIONS.SET_IS_LOADING_IN_PROGRESS, this.loadInProgress);\n    this.someLoadDone = true;\n    if (performance && performance.timing) {\n      const time = Math.round((new Date()).getTime() - performance.timing.responseStart);\n      this._analytics?.ga.trackTiming(GA_CATEGORY.TIMING, GA_METRICS.INIT_LOADING_SCREEN_CLOSE, time, {\n        [GA_METRICS.INIT_LOADING_SCREEN_CLOSE]: time,\n      });\n    }\n  }\n}\n","export class ExposedAnalyticsCallbacks {\n  /**\n   * Is called whenever something is sent to google analytics\n   * Possible parameters are everything which is possible in gtag.js\n   * If you need further details about gtag.js: https://developers.google.com/gtagjs\n   * Currently we use Google Analytics in combination with gtag.js so\n   * you can intercept events and send them to your own analytics tool\n   */\n  public onGATracking = (..._args: any[]): void => void 0;\n\n}\n","import RoomleConfigurator from '@roomle/web-sdk/lib/definitions/configurator-core/src/roomle-configurator';\nimport {ExposedCallbacks} from '@/configurator/embedding/exposed-callbacks';\nimport {LoadResponse, SdkConnector} from '@/configurator/business-logic/sdk-connector';\nimport {EmbeddingCommand, MessageExecutionResult, MessageHandler} from '@/configurator/embedding/message-handler';\nimport {Store} from 'vuex';\nimport {StoreState} from '@/common/store';\nimport {UI_STATE_ACTIONS} from '@/configurator/store/ui-state';\nimport {getMethodNames, HANDSHAKE_MESSAGES, NAMESPACE, NAMESPACE_SEPARATOR} from '@/configurator/embedding/utils';\nimport {startConfiguring, triggerRequestPlan, triggerRequestProduct} from '@/configurator/embedding/helper';\nimport {Nullable} from '@/common/utils/types';\nimport {Analytics} from '@/common/plugins/analytics';\nimport {ExposedAnalyticsCallbacks} from '@/configurator/embedding/exposed-analytics-callbacks';\nimport RoomleGLBViewer from '@roomle/web-sdk/lib/definitions/glb-viewer-core/src/roomle-glb-viewer';\nimport ConfiguratorUiCallbacks from '@roomle/web-sdk/lib/definitions/configurator-core/src/services/configurator-ui-callback';\nimport RoomlePlanner from '@roomle/web-sdk/lib/definitions/planner-core/src/roomle-planner';\n\n// import RoomleGLBViewer from '@roomle/web-sdk/lib/definitions/glb-viewer-core/src/roomle-glb-viewer';\n\nexport class ExposedApi {\n  private _sdk: RoomleConfigurator | RoomleGLBViewer | RoomlePlanner;\n  private _exposedCallbacks: ExposedCallbacks;\n  private _sdkConnector: SdkConnector;\n  private _store: Store<StoreState>;\n  private _analytics: Analytics;\n  private _exposedAnalyticsCallbacks: ExposedAnalyticsCallbacks;\n  private _isWebsiteReady = false;\n\n  constructor(\n    sdkConnector: SdkConnector,\n    messageHandler: MessageHandler | null,\n    sdk: RoomleConfigurator | RoomleGLBViewer | RoomlePlanner,\n    exposedCallbacks: ExposedCallbacks,\n    store: Store<StoreState>,\n    analytics: Analytics,\n  ) {\n    this._sdk = sdk;\n    this._exposedCallbacks = exposedCallbacks;\n    this._sdkConnector = sdkConnector;\n    this._store = store;\n    this._analytics = analytics;\n    this._exposedAnalyticsCallbacks = new ExposedAnalyticsCallbacks();\n\n    const availableUiCallbacks = getMethodNames(this._exposedCallbacks, NAMESPACE.UI, true);\n    const availableUiMethods = getMethodNames(Object.getPrototypeOf(this), NAMESPACE.UI);\n    const availableSdkMethods = getMethodNames(Object.getPrototypeOf(this._sdk), NAMESPACE.SDK);\n    const availableSdkCallbacks = getMethodNames(this._sdk.callbacks, NAMESPACE.SDK, true);\n    const availableAnalyticsCallbacks = getMethodNames(this._exposedAnalyticsCallbacks, NAMESPACE.ANALYTICS, true);\n\n    availableSdkCallbacks.forEach((callbackName) => {\n      const fullname = callbackName.split(NAMESPACE_SEPARATOR);\n      const callbackShortName = fullname.pop();\n      // tslint:disable-next-line:only-arrow-functions\n      sdkConnector.configuratorConnector.then((connector) => connector.addCallback(callbackShortName as keyof ConfiguratorUiCallbacks, function () {\n        return messageHandler?.sendMessage(callbackName, [...arguments]);\n      }, true));\n    });\n\n    availableUiCallbacks.forEach((callbackName) => {\n      const fullname = callbackName.split(NAMESPACE_SEPARATOR);\n      const callbackShortName = fullname.pop() as keyof ExposedCallbacks;\n      // tslint:disable-next-line:only-arrow-functions\n      this._exposedCallbacks[callbackShortName] = function () {\n        return messageHandler?.sendMessage(callbackName, [...arguments]);\n      };\n    });\n\n    availableAnalyticsCallbacks.forEach((callbackName: any) => {\n      const fullname = callbackName.split(NAMESPACE_SEPARATOR);\n      const callbackShortName = fullname.pop() as keyof ExposedAnalyticsCallbacks;\n      this._exposedAnalyticsCallbacks[callbackShortName] = (...args: any[]) => {\n        if (!this._isWebsiteReady) {\n          return;\n        }\n        return messageHandler?.sendMessage(callbackName, [...args]);\n      };\n    });\n\n    this._analytics?.ga?.addCallback((...args: any[]) => {\n      this._exposedAnalyticsCallbacks.onGATracking(...args);\n    });\n\n    this._forwardSdkCallbacks();\n    // No need for await here, we just send the message and wait for the response\n    // message to receive, therefore we just set \"setMessageExecution\"\n    messageHandler?.sendMessage(HANDSHAKE_MESSAGES.SETUP, [{\n      methods: [...availableSdkMethods, ...availableUiMethods],\n      callbacks: [...availableSdkCallbacks, ...availableUiCallbacks, ...availableAnalyticsCallbacks],\n    }]);\n    messageHandler?.setMessageExecution(this._handleMessage.bind(this));\n\n    (window as any).RubensAPI = this;\n  }\n\n  public get callbacks(): ExposedCallbacks {\n    return this._exposedCallbacks;\n  }\n\n  /**\n   * call this method to load the object you want into the 3d Scene\n   * @param id database ID of the object you want to load\n   */\n  public loadObject(id: string): Promise<Nullable<LoadResponse>> {\n    if (!id) {\n      return Promise.reject('Please provide a ID for loadObject');\n    }\n    return this._sdkConnector.loadObject(id);\n  }\n\n  /**\n   * call this method to load the configuration string you want into the 3d Scene\n   * @param configurationString string of the configuration, starts with \"{\" and ends with \"}\"\n   */\n  public loadConfigurationString(configurationString: string): Promise<Nullable<LoadResponse>> {\n    if (!configurationString.startsWith('{')) {\n      return Promise.reject('Please provide a configuration-string (starts with \"{\" and ends with \"}\"), for IDs please use loadObject');\n    }\n    return this._sdkConnector.loadConfigurationString(configurationString);\n  }\n\n  /**\n   * set the price for the UI to show\n   * most likely needed when implementing your own price service\n   *\n   * @param currencySymbol\n   * @param price\n   */\n  public setPrice(currencySymbol: string, price: number) {\n    this._sdkConnector.configuratorConnector.then((connector) => connector.setPrice(currencySymbol, price));\n  }\n\n  /**\n   * This method can be used to start configuration when\n   * 3d scene is only initialized as viewer first, the\n   * configurator is automatically instantiated as viewer\n   * if the container where the configurator is placed is\n   * smaller than 1024px (this breakpoint could change in future)\n   * so do not rely on this exact pixel setting\n   */\n  public startConfiguring() {\n    startConfiguring(this._store, this._exposedCallbacks);\n  }\n\n  /**\n   * This method can be used to pause configuration\n   * If the configurator was called in view-only mode\n   * this method triggers the onBackToWebsite callback.\n   * To know when the view-only mode is activated see the\n   * description of the startConfiguring method\n   */\n  public pauseConfiguring() {\n    if (!this._store.state.uiState.isDesktop) {\n      this._exposedCallbacks.onBackToWebsite();\n      this._store.dispatch(UI_STATE_ACTIONS.PAUSE_CONFIGURING);\n    }\n  }\n\n  /**\n   * call this method to trigger the onRequestProduct event from\n   * outside of the iframe. When this method is called the same\n   * process is kicked off as if the user would have clicked on\n   * request product. Therefore you can just use the same callback\n   * to react on the response\n   */\n  public triggerRequestProduct(): Promise<void> {\n    return triggerRequestProduct(this._exposedCallbacks, this._sdkConnector, this._store, this._analytics);\n  }\n\n  /**\n   * call this method to trigger the onRequestPlan event from\n   * outside of the iframe. When this method is called the same\n   * process is kicked off as if the user would have clicked on\n   * request plan. Therefore you can just use the same callback\n   * to react on the response\n   */\n  public triggerRequestPlan(): Promise<void> {\n    return triggerRequestPlan(this._exposedCallbacks, this._sdkConnector, this._store, this._analytics);\n  }\n\n  /**\n   * call this method if consent of Google Analytics is given later and not already in init-data on boot\n   */\n  public giveGaConsent() {\n    this._analytics.ga.history.forEach((functionArgs: IArguments) => {\n      const args = [].slice.call(functionArgs);\n      this._exposedAnalyticsCallbacks.onGATracking(...args);\n    });\n    this._sdkConnector.giveGaConsent();\n  }\n\n  private _websiteReady() {\n    this._isWebsiteReady = true;\n    this._exposedCallbacks.onResize(this._store.state.uiState.isDesktop);\n    const consent = this._store.state.uiState.initData?.gaConsent;\n    // currently webshop has to opt-out, we need to discuss how we want\n    // this in the future, see: https://roomle.atlassian.net/browse/RML-609\n    if (consent || typeof consent !== 'boolean') {\n      this.giveGaConsent();\n    }\n  }\n\n  private _handleMessage = ({message, args}: EmbeddingCommand, _event: MessageEvent): MessageExecutionResult => {\n\n    if (message === HANDSHAKE_MESSAGES.WEBSITE_READY) {\n      return new Promise((resolve) => {\n        this._websiteReady();\n        resolve();\n      });\n    }\n\n    const namespaces = message.split(NAMESPACE_SEPARATOR);\n    const object = namespaces[0];\n    const methodName = namespaces[1];\n\n    const instance: any = (object === NAMESPACE.SDK) ? this._sdk : this;\n\n    if (!instance[methodName]) {\n      return Promise.reject({error: 'The method \"' + message + '\" is unknown'});\n    }\n    const result = instance[methodName](...args);\n    if (result instanceof Promise) {\n      return result;\n    } else {\n      return Promise.resolve(result);\n    }\n  }\n\n  private _forwardSdkCallbacks() {\n    this._sdkConnector?.configuratorConnector.then((connector) =>\n      connector.addCallback('onPartListUpdate', (partList, hash) => {\n        /**\n         * BREAKING SINCE VERSION 3.12.0-alpha.1 (as of 2020-11-05)\n         * we return now the whole partlist object which we get from\n         * the Core and not only the fullList\n         * Link: https://gitlab.com/roomle/web/roomle-ui/-/merge_requests/303\n         */\n        if (this._store.state.uiState.initData?.featureFlags?.realPartList) {\n          this.callbacks.onPartListUpdate(partList, hash);\n        } else {\n          // need to use \"as any\" to be compliant with old versions of embedding\n          this.callbacks.onPartListUpdate(partList.fullList as any, hash);\n        }\n      }, true));\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isSceneActive)?_c('div',{ref:\"sceneContainer\",staticClass:\"scene-container\"},[_c('div',{ref:\"canvasContainer\",staticClass:\"h100\"})]):_c('div',{staticClass:\"domain-error\"},[_vm._v(\" \"+_vm._s(_vm.errorMsg)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {Analytics} from '@/common/plugins/analytics';\nimport {runOnIdle} from '@/common/utils/helper';\nimport {SdkConnector} from '@/configurator/business-logic/sdk-connector';\n\nexport interface AccessCheckResult {\n  isCorrectDomain: boolean;\n  hasActivePackage: boolean;\n}\n\nexport const isShowSceneAllowed = async (configuratorId: string, sdkConnector: SdkConnector, analytics: Analytics): Promise<AccessCheckResult> => {\n  return new Promise((resolve) => {\n    runOnIdle(async () => {\n      const result: AccessCheckResult = {isCorrectDomain: true, hasActivePackage: true};\n\n      const isCorrectDomain = await sdkConnector.isCorrectConfiguratorDomain(configuratorId);\n      if (!isCorrectDomain) {\n        analytics?.ga.trackWrongDomain();\n        result.isCorrectDomain = false;\n      }\n      const hasActivePackage = await sdkConnector.hasActivePackage();\n      if (!hasActivePackage) {\n        analytics?.ga.trackNoActivePackage();\n        result.hasActivePackage = false;\n      }\n      resolve(result);\n    });\n  });\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, {VueConstructor} from 'vue';\nimport {removeLoadingScreen} from '@/common/utils/dom';\nimport {isShowSceneAllowed} from '@/common/utils/access-restriction';\n\nexport default (Vue as VueConstructor<Vue & {\n  $refs: {\n    sceneContainer: HTMLElement,\n    canvasContainer: HTMLElement,\n  },\n}>).extend({\n  mounted() {\n    this.$sdkConnector.canvasElementReady(this.$refs.canvasContainer);\n    this.initSceneContainer();\n  },\n  data() {\n    return {\n      isCorrectDomain: true,\n      hasActivePackage: true,\n    };\n  },\n\n  computed: {\n    isSceneActive(): boolean {\n      return this.isCorrectDomain && this.hasActivePackage;\n    },\n    errorMsg(): string {\n      if (this.isSceneActive) {\n        return '';\n      }\n      if (!this.isCorrectDomain) {\n        return (this as any).t.t('wrong-domain');\n      }\n      return (this as any).t.t('no-active-package');\n    },\n  },\n\n  methods: {\n    // Although _checkAccessRights returns a promise\n    // you chould not await it because we want to check\n    // access rights in background and parallel, for more\n    // details see: https://gitlab.com/roomle/web/roomle-ui/-/merge_requests/358#note_500157532\n    async _checkAccessRights(): Promise<void> {\n      const initData = this.$store.state.uiState.initData;\n      const {isCorrectDomain, hasActivePackage} = await isShowSceneAllowed(initData.configuratorId, this.$sdkConnector, this.$analytics);\n      if (!isCorrectDomain) {\n        this.isCorrectDomain = false;\n      }\n      if (!hasActivePackage) {\n        this.hasActivePackage = false;\n      }\n      if (!isCorrectDomain || !hasActivePackage) {\n        removeLoadingScreen();\n      }\n    },\n    initSceneContainer() {\n      // we do not await on purpose, to know why\n      // see: https://gitlab.com/roomle/web/roomle-ui/-/merge_requests/358#note_500157532\n      this._checkAccessRights();\n      if (!this.$refs.sceneContainer) {\n        if (!this.isCorrectDomain) {\n          this.$analytics.ga.trackWrongDomain();\n        }\n        if (!this.hasActivePackage) {\n          this.$analytics.ga.trackNoActivePackage();\n        }\n        return;\n      }\n    },\n  },\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SceneContainer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SceneContainer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SceneContainer.vue?vue&type=template&id=58815f9e&scoped=true&\"\nimport script from \"./SceneContainer.vue?vue&type=script&lang=ts&\"\nexport * from \"./SceneContainer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SceneContainer.vue?vue&type=style&index=0&id=58815f9e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58815f9e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"hidden\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport {removeLoadingScreen, showLoadingScreen} from '@/common/utils/dom';\nimport Vue from 'vue';\nexport default Vue.extend({\n  mounted() {\n    showLoadingScreen();\n  },\n  destroyed() {\n    removeLoadingScreen();\n  },\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=7ab25429&scoped=true&\"\nimport script from \"./Loading.vue?vue&type=script&lang=ts&\"\nexport * from \"./Loading.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ab25429\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport {UI_STATE_ACTIONS, UI_STATE_GETTERS, UI_STATE_MUTATIONS} from '@/configurator/store/ui-state';\nimport {getHostname, isDemoHostname, throttle} from '@/common/utils/helper';\nimport {calcIsDesktop} from '@/common/utils/dom';\nimport {isAndroid, isIOs} from '@/common/utils/user-agent';\nimport {GA_CATEGORY} from '@/common/utils/google-analytics';\nimport {EmbeddingSkin, UiInitData} from '@/configurator/embedding/types';\nimport {prepareSkin} from '@/common/utils/color';\n// @ts-ignore\nimport {blackText, whiteText} from '@/common/styles/Global.module.scss';\nimport Overlays from '@/configurator/components/Overlays.vue';\nimport {SDK_MODULES} from '@/configurator/business-logic/sdk-connector';\nimport {isInIframe} from '@/common/utils/iframe';\nimport SceneContainer from '@/configurator/components/SceneContainer.vue';\nimport Loading from '@/common/components/Loading.vue';\nimport {AsyncComponentPromise} from 'vue/types/options';\nimport {PLANNER_UI_STATE_ACTIONS, PLANNER_UI_STATE_MUTATIONS} from '@/planner/store/planner-ui-state';\n\nexport default Vue.extend({\n  components: {\n    ConfiguratorMain: () => ({\n      component: import('@/configurator/components/ConfiguratorMain.vue') as unknown as AsyncComponentPromise,\n      loading: Loading,\n      delay: 150,\n    }),\n    ViewerMain: () => ({\n      component: import('@/configurator/components/ViewerMain.vue') as unknown as AsyncComponentPromise,\n      loading: Loading,\n      delay: 150,\n    }),\n    BackToWebsite: () => import('@/configurator/components/utils/BackToWebsite.vue'),\n    PlannerMain: () => import('@/planner/components/PlannerMain.vue'),\n    CookieBanner: () => import('@/configurator/components/CookieBanner.vue'),\n    Overlays,\n    SceneContainer,\n  },\n\n  data() {\n    return {\n      acceptedCookies: true,\n    };\n  },\n\n  async mounted() {\n    const id = this.initData.id || null;\n    this.acceptedCookies = document.cookie.split(';').some((cookie) => /cookieAccepted/ig.test(cookie));\n    if (id) {\n      this.$sdkConnector.loadObject(id);\n    } else {\n      // this should be refactored with https://roomle.atlassian.net/browse/RML-44\n      const isViewer = this.$store.state.uiState.initData?.viewer;\n      const module = isViewer ? SDK_MODULES.VIEWER : SDK_MODULES.CONFIGURATOR;\n      this.$sdkConnector.initCanvasElement(module);\n    }\n\n  },\n\n  computed: {\n    initData(): UiInitData {\n      return this.$store.state.uiState.initData;\n    },\n    showCookieBanner(): boolean {\n      const hostname = getHostname();\n      return !this.acceptedCookies && (hostname && isDemoHostname(hostname) ? true : false) && !isInIframe();\n    },\n    lastRequestedId(): string {\n      return this.$store.state.commonUiState.lastRequestedId || this.$store.state.uiState.initData?.id;\n    },\n    showBack(): boolean {\n      const isInIframeStore = this.$store.state.commonUiState.isInIframe;\n      const {isPlanner, isViewer, isConfigurator} = this.$store.state.uiState;\n      if (isPlanner && isInIframeStore) {\n        return true;\n      }\n      if (isViewer && this.$sdkConnector.hasPlanner) {\n        return true;\n      }\n      if (isConfigurator) {\n        if (this.$sdkConnector.hasPlanner) {\n          return true;\n        }\n        return this.$store.getters[UI_STATE_GETTERS.SHOW_BACK_TO_WEBSITE] && (!!this.$store.state.uiState.isDesktop);\n      }\n      return false;\n    },\n  },\n\n  watch: {\n    initData() {\n      if (!this.initData.skin) {\n        return;\n      }\n      prepareSkin(this.initData, blackText, whiteText);\n\n      for (const cssProperty in this.initData.skin) {\n        if (this.initData.skin.hasOwnProperty(cssProperty)) {\n          document.documentElement.style.setProperty('--' + cssProperty, this.initData.skin[cssProperty as keyof EmbeddingSkin] as string);\n        }\n      }\n    },\n  },\n\n  methods: {\n    setViewModes() {\n      if (this.$store.state.uiState.userInitiatedSearch) {\n        // do not change the view mode while a user is searching\n        // this happens on Android when the keyboard slides up\n        // and therefore triggers a resize event. This early return\n        // solves: https://roomle.atlassian.net/browse/DM-534\n        return;\n      }\n      const isLandscape = window.innerWidth > window.innerHeight;\n      this.$store.commit(UI_STATE_MUTATIONS.SET_IS_LANDSCAPE, isLandscape);\n      this.$store.commit(PLANNER_UI_STATE_MUTATIONS.SET_IS_LANDSCAPE, isLandscape);\n      const isDesktop = calcIsDesktop();\n      this.$store.dispatch(UI_STATE_ACTIONS.SELECT_VIEW_MODE, isDesktop);\n      this.$store.dispatch(PLANNER_UI_STATE_ACTIONS.SELECT_VIEW_MODE, isDesktop);\n      if (!this.$store.getters[UI_STATE_GETTERS.USE_REGULAR_LAYOUT] && !isAndroid() && !isIOs()) {\n        this.$analytics.ga.trackEvent('Mobile Landscape but not Android or iOS', GA_CATEGORY.TRACKING, navigator.userAgent);\n      }\n      this.$embeddingCallbacks.onResize(isDesktop);\n    },\n    updateCookies() {\n      this.acceptedCookies = document.cookie.split(';').some((cookie) => /cookieAccepted/ig.test(cookie));\n    },\n  },\n\n  beforeMount() {\n    this.setViewModes();\n    this.setViewModes = throttle(this.setViewModes).bind(this);\n    window.addEventListener('resize', this.setViewModes);\n  },\n\n  destroyed() {\n    window.removeEventListener('resize', this.setViewModes);\n  },\n\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=49afe5bf&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {SdkConnector} from '@/configurator/business-logic/sdk-connector';\nimport {Analytics} from '@/common/plugins/analytics';\nimport {RoomleSdkWrapper} from '@/configurator/business-logic/roomle-sdk-wrapper';\nimport {Store} from 'vuex';\nimport {StoreState} from '@/common/store';\nimport {ExposedCallbacks} from '@/configurator/embedding/exposed-callbacks';\n\nconst SdkConnectorPlugin = {\n  install(Vue: any, {analytics, store, sdkWrapper, embeddingCallbacks}: {analytics: Analytics, sdkWrapper: RoomleSdkWrapper, store: Store<StoreState>, embeddingCallbacks: ExposedCallbacks}) {\n    if (!analytics) {\n      throw new Error('Sdk connector plugin needs analytics');\n    }\n    // tslint:disable-next-line\n    Vue.prototype.$sdkConnector = new SdkConnector(sdkWrapper, store, analytics, embeddingCallbacks);\n    // uncomment the next line if you want to debug $sdkConnector in devTools\n    // (window as any).$sdkConnector = Vue.prototype.$sdkConnector;\n  },\n};\n\nexport default SdkConnectorPlugin;\n","import GoogleAnalytics from '@/common/utils/google-analytics';\n\nexport interface Analytics {\n  ga: GoogleAnalytics;\n}\n\nconst AnalyticsPlugin = {\n  install(Vue: any, {configuratorId, useTracking}: {configuratorId: string, useTracking: boolean}) {\n    Vue.prototype.$analytics = {\n      ga: new GoogleAnalytics(configuratorId, useTracking),\n    };\n  },\n};\n\nexport default AnalyticsPlugin;\n","// @ts-nocheck\nimport {Base64Image} from '@roomle/web-sdk/lib/definitions/common-core/src/common-interfaces';\nimport {KernelPartList} from '@roomle/web-sdk/lib/definitions/typings/kernel';\nimport {RapiConfigurationEnhanced} from '@roomle/web-sdk/lib/definitions/typings/rapi-types';\nimport {UI_BUTTON} from '@/configurator/embedding/types';\nimport {Nullable} from '@/common/utils/types';\n\nexport interface Price {\n  currencySymbol: Nullable<string>;\n  price: Nullable<number>;\n}\n\nexport interface Labels {\n  catalogLabel: Nullable<string>;\n  label: Nullable<string>;\n}\n\nexport class ExposedCallbacks {\n  /**\n   * Returns all necessary params when 'Request Product'/'Checkout' button has pressed\n   * @param configurationId id of the current configuration\n   * @param image image of the current configuration\n   * @param partList the part list with all details, grouped, etc\n   * @param price price of the current configuration, either set via setPrice or from Roomle price service\n   * @param labels the label of the catalog and the furniture system\n   * @param configuration the data returned from the Roomle backend\n   */\n  public onRequestProduct = (configurationId: string, image: Base64Image, partList: KernelPartList, price: Price, labels: Labels, configuration: RapiConfigurationEnhanced): void => void 0;\n\n  /**\n   * fullList fullList (needed for price calculation) of the current configuration\n   * @param partList the part list with all details, grouped, etc\n   */\n  public onPartListUpdate = (partList: KernelPartList, hash: string): void => void 0;\n\n  public onResize = (isDesktop: boolean): void => undefined;\n\n  public onUseFullPage = (): void => undefined;\n\n  public onBackToWebsite = (): void => undefined;\n\n  public onButtonClicked = (name: UI_BUTTON): void => undefined;\n\n  public onRequestPlan = (planId: string, image: Base64Image, items: any[]): void => void 0;\n\n  // can be used directly on planner extended callbacks\n  // public onPlanChanged = (): void => undefined;\n}\n","import {ExposedCallbacks} from '@/configurator/embedding/exposed-callbacks';\n\nconst EmbeddingCallbacksPlugin = {\n  install(Vue: any) {\n    Vue.prototype.$embeddingCallbacks = new ExposedCallbacks();\n  },\n};\n\nexport default EmbeddingCallbacksPlugin;\n","export class Libs {\n  public async getJsPdf() {\n    const {jsPDF} = await import('jspdf');\n    const {default: autoTable} = await import('jspdf-autotable');\n    return {jsPDF, autoTable};\n  }\n}\n\nconst LibsPlugin = {\n  install(Vue: any) {\n    Vue.prototype.$libs = new Libs();\n  },\n};\n\nexport default LibsPlugin;\n","import {Analytics} from '@/common/plugins/analytics';\nimport {GA_CATEGORY} from '@/common/utils/google-analytics';\nimport {UiInitData} from '@/configurator/embedding/types';\n\nconst logDeprecation = (version: string, label: string, message: string, analytics: Analytics) => {\n  console.warn('DEPRECATION:', 'this deprecation will be breaking after: \"' + version + '\"');\n  console.warn('DEPRECATION:', message);\n  console.warn('DEPRECATION:', 'please check our changelog when you upgrade @roomle/embedding-lib');\n  console.warn('DEPRECATION:', 'https://www.roomle.com/t/docs/web/ui/CHANGELOG.html');\n  analytics.ga.trackEvent(label, GA_CATEGORY.DEPRECATION, 'Breaking after version: \"' + version + '\"');\n};\n\nexport const checkDeprecations = (inIframe: boolean, uiInitData: UiInitData, analytics: Analytics) => {\n  if (inIframe && !uiInitData.featureFlags?.realPartList) {\n    logDeprecation('3.12.0-alpha.1',\n      'partlist',\n      'after an upgrade the whole partlist object will be returned',\n      analytics,\n    );\n  }\n};\n","import Vue from 'vue';\nimport App from './App.vue';\nimport store, {StoreState} from '@/common/store';\nimport LocalTranslationSource from '@/common/translations/local-translation-source';\nimport LocalizePlugin from '@/common/plugins/localize';\nimport SdkConnectorPlugin from '@/configurator/plugins/sdk-connector-plugin';\nimport AnalyticsPlugin, {Analytics} from '@/common/plugins/analytics';\n\nimport {RoomleSdkWrapper} from '@/configurator/business-logic/roomle-sdk-wrapper';\nimport {SDK_MODULES, SdkConnector} from '@/configurator/business-logic/sdk-connector';\nimport {isInIframe, useEmbeddingApi} from '@/common/utils/iframe';\nimport {combineInitData, getInitData} from '@/common/utils/init-data';\nimport {calcIsDesktop} from '@/common/utils/dom';\nimport EmbeddingCallbacksPlugin from '@/configurator/plugins/embedding-callbacks-plugin';\nimport {ExposedCallbacks} from '@/configurator/embedding/exposed-callbacks';\nimport {UI_STATE_MUTATIONS} from '@/configurator/store/ui-state';\nimport {EmbeddingSkin, UiInitData} from '@/configurator/embedding/types';\nimport {GA_DIMENSIONS} from '@/common/utils/google-analytics';\nimport {prepareSkin} from '@/common/utils/color';\nimport {version} from './../package.json';\n// @ts-ignore\nimport {blackText, whiteText} from '@/common/styles/Global.module.scss';\nimport LibsPlugin, {Libs} from '@/configurator/plugins/libs-plugin';\nimport {checkDeprecations} from '@/common/utils/compatibility';\nimport {COMMON_UI_STATE_MUTATIONS} from '@/common/store/common-ui-state';\n\ndeclare module 'vue/types/vue' {\n  interface Vue {\n    $sdkConnector: SdkConnector;\n    $embeddingCallbacks: ExposedCallbacks;\n    // @ts-ignore --- needed to get rid of ts error ts(2717),\n    // this is because vue.d.ts defines Store<any> and therefore\n    // we can not extend it\n    $store: StoreState;\n    $analytics: Analytics;\n    $libs: Libs;\n  }\n}\n// for info why process.env.NODE_ENV is available here see:\n// https://cli.vuejs.org/guide/mode-and-env.html#using-env-variables-in-client-side-code\nconst isProductionBuild = process.env.NODE_ENV === 'production';\nconsole.log('UI Version:', isProductionBuild ? version : 'development mode');\n\nif (isProductionBuild) {\n  Vue.config.productionTip = false;\n  Vue.config.devtools = false; // for production use only https://laracasts.com/discuss/channels/elixir/disabling-vue-devtools-in-production\n  Vue.config.silent = true;    // for production use only\n}\n\nVue.use(EmbeddingCallbacksPlugin);\nVue.use(LibsPlugin);\n\nconst bootApp = async (queryParams: UiInitData, inIframe: boolean) => {\n  const sdkWrapper = new RoomleSdkWrapper();\n  // messageHandler stuff will be refacotred in:\n  // https://roomle.atlassian.net/browse/RML-44\n  let messageHandler: any = null;\n  if (inIframe && useEmbeddingApi()) {\n    const {MessageHandler} = await import('@/configurator/embedding/message-handler');\n    messageHandler = new MessageHandler('iframe', window, window.parent, null as any);\n  }\n  const finalInitData = await combineInitData(messageHandler, sdkWrapper, {...queryParams});\n  if (!inIframe) {\n    // we will remove this if-query when we implement\n    // the following ticket: https://roomle.atlassian.net/browse/RML-609\n    finalInitData.gaConsent = 'true' === process.env.VUE_APP_GA_USE_TRACKING;\n  }\n\n  store.commit(UI_STATE_MUTATIONS.SET_INIT_DATA, finalInitData);\n  sdkWrapper.setGlobalInitData(store.state.uiState.initData);\n\n  Vue.use(AnalyticsPlugin, {configuratorId: finalInitData.configuratorId, useTracking: finalInitData.gaConsent});\n  Vue.use(LocalizePlugin, {translationSource: new LocalTranslationSource(finalInitData.locale!, finalInitData.translations)});\n  store.commit(COMMON_UI_STATE_MUTATIONS.SET_IS_IN_IFRAME, inIframe);\n  store.commit(COMMON_UI_STATE_MUTATIONS.SET_IS_VIEW_ONLY, inIframe && !calcIsDesktop());\n  const analytics = Vue.prototype.$analytics;\n\n  const embeddingCallbacks = Vue.prototype.$embeddingCallbacks;\n  Vue.use(SdkConnectorPlugin, {analytics, sdkWrapper, store, embeddingCallbacks});\n  analytics.ga.setDimension(GA_DIMENSIONS.INIT_ID, finalInitData.id);\n  analytics.ga.setDimension(GA_DIMENSIONS.CONFIGURATOR_ID, finalInitData.configuratorId);\n  checkDeprecations(inIframe, finalInitData, analytics);\n  prepareSkin(finalInitData, blackText, whiteText);\n\n  for (const cssProperty in finalInitData.skin) {\n    if (finalInitData.skin.hasOwnProperty(cssProperty)) {\n      document.documentElement.style.setProperty('--' + cssProperty, finalInitData.skin[cssProperty as keyof EmbeddingSkin] as string);\n    }\n  }\n\n  const app = new Vue({\n    store,\n    render: (h) => h(App),\n  }).$mount('#app');\n\n  // this stuff will be refacotred in:\n  // https://roomle.atlassian.net/browse/RML-44\n  if (inIframe) {\n    app.$sdkConnector.setMessageHandler(messageHandler);\n    let module;\n    if (!!finalInitData.moc) {\n      module = SDK_MODULES.PLANNER;\n    } else if ((finalInitData as any).viewer || (finalInitData.id && await app.$sdkConnector.isIdAGlb(finalInitData.id))) {\n      module = SDK_MODULES.VIEWER;\n    } else {\n      module = SDK_MODULES.CONFIGURATOR;\n    }\n    await app.$sdkConnector.createExposedApi(module);\n  }\n  return app;\n};\nconst startedInIframe = isInIframe();\nbootApp(getInitData(!startedInIframe), startedInIframe);\n\n","type ResolveFunction<T> = (value?: T | PromiseLike<T>) => void;\ntype RejectFunction = (reason?: any) => void;\ninterface PromiseCallback<T> {\n  resolve: ResolveFunction<T>;\n  reject: RejectFunction;\n}\n\nconst SCRIPT_CACHE: {[key: string]: boolean} = {};\nconst SCRIPT_ID_CACHE: {[key: string]: boolean} = {};\n\nconst SCRIPT_WAITER: {[key: string]: Array<PromiseCallback<void>>} = {};\n\nconst attachScript = (url: string, options: {id: string}, resolve: ResolveFunction<void>, reject: RejectFunction) => {\n\n  if (SCRIPT_CACHE[url]) {\n    return resolve();\n  }\n\n  if (options.id && SCRIPT_ID_CACHE[options.id]) {\n    return reject('There is already a script with ID \"' + options.id + '\"');\n  }\n\n  if (SCRIPT_WAITER[options.id]) {\n    SCRIPT_WAITER[options.id].push({resolve, reject});\n    return;\n  }\n\n  const element = document.createElement('script');\n  element.async = false;\n  element.src = url;\n  element.id = options.id;\n  element.onload = () => {\n    SCRIPT_CACHE[url] = true;\n    SCRIPT_ID_CACHE[options.id] = true;\n    SCRIPT_WAITER[options.id].forEach((callback) => callback.resolve()); // tslint-disable-line no-shadow\n  };\n  element.onerror = (error) => {\n    SCRIPT_WAITER[options.id].forEach((callback) => callback.reject(error));\n  };\n  SCRIPT_WAITER[options.id] = [];\n  SCRIPT_WAITER[options.id].push({resolve, reject});\n  document.head.appendChild(element);\n};\n\nexport default class ScriptLoader {\n  public static fetch(url: string, options: {id: string}): Promise<void> {\n    return new Promise((resolve: ResolveFunction<void>, reject: RejectFunction) => {\n      attachScript(url, options, resolve, reject);\n    });\n  }\n}\n","\n/* TO DOs in Google Analytics Admin UI\n\n To track the Hit ID, Hit Time, and Hit Type and custom dimensions, first create them in Google Analytics\n and set their scope to \"Hit\"\n\n Once you've created the custom metrics in Google Analytics\n (and set their scope to \"Hit\" and their formatting type to \"Integer\")\n this setup is ready to go. You need to do this in every GA property\n\n For more details see: https://philipwalton.com/articles/the-google-analytics-setup-i-use-on-every-site-i-build/\n\n */\n\nimport {uuid} from '@/common/utils/helper';\nimport {Nullable} from '@/common/utils/types';\nimport ScriptLoader from '@/common/utils/script-loader';\nimport {isInIframe} from '@/common/utils/iframe';\n\nexport const GA_DIMENSIONS: {[key: string]: string} = {\n  CLIENT_ID: 'clientId',\n  WINDOW_ID: 'windowId',\n  HIT_ID: 'hitId',\n  HIT_TIME: 'hitTime',\n  HIT_TYPE: 'hitType',\n  HIT_SOURCE: 'hitSource',\n  VISIBILITY_STATE: 'visibilityState',\n  INIT_ID: 'initId',\n  CONFIGURATOR_ID: 'configuratorId',\n};\n\nconst GA_DIMENSIONS_ORDER = [\n    /*01*/ GA_DIMENSIONS.CLIENT_ID,\n    /*02*/ GA_DIMENSIONS.WINDOW_ID,\n    /*03*/ GA_DIMENSIONS.HIT_ID,\n    /*04*/ GA_DIMENSIONS.HIT_TIME,\n    /*05*/ GA_DIMENSIONS.HIT_TYPE,\n    /*06*/ GA_DIMENSIONS.HIT_SOURCE,\n    /*07*/ GA_DIMENSIONS.VISIBILITY_STATE,\n    /*08*/ GA_DIMENSIONS.INIT_ID,\n    /*09*/ GA_DIMENSIONS.CONFIGURATOR_ID,\n];\n\nexport const GA_METRICS = {\n  RESPONSE_END_TIME: 'responseEndTime',\n  DOM_LOAD_TIME: 'domLoadTime',\n  WINDOW_LOAD_TIME: 'windowLoadTime',\n  TIME_TO_FIRST_BTYE: 'timeToFirstByte',\n  KERNEL_IS_READY: 'kernelIsReady',\n  INIT_LOADING_SCREEN_CLOSE: 'initLoadingScreenClose',\n};\n\nconst GA_METRICS_ORDER = [\n  /*01*/ GA_METRICS.RESPONSE_END_TIME,\n  /*02*/ GA_METRICS.DOM_LOAD_TIME,\n  /*03*/ GA_METRICS.WINDOW_LOAD_TIME,\n  /*04*/ GA_METRICS.TIME_TO_FIRST_BTYE,\n  /*05*/ GA_METRICS.KERNEL_IS_READY,\n  /*06*/ GA_METRICS.INIT_LOADING_SCREEN_CLOSE,\n];\n\n// Probably we could add const enums here\n// but we need to investigate: https://roomle.atlassian.net/browse/CONF-238\nenum GA_CUSTOM {\n  DIMENSION = 'dimension',\n  METRIC = 'metric',\n}\n\nenum GA_HIT_TYPE {\n  EVENT = 'event',\n}\n\nenum GA_ACTION_TYPE {\n  EXCEPTION = 'exception',\n  TIMING = 'timing_complete',\n}\n\nenum CUSTOM_ACTION_TYPE {\n  TRACK_TIMING = 'track_timing',\n}\n\nconst CONTENT_ERROR_PREFIX = 'CONTENT_ERROR: ';\n\nconst DEBUG_TRACKING_LOCALLY = false;\n\nexport const GA_NULL_VALUE = '(not set)';\n\nexport enum GA_CATEGORY {\n  ERROR = 'Error',\n  NAVIGATION_TIMING = 'Navigation Timing',\n  TIMING = 'Timing',\n  INTERACTION = 'Interaction',\n  TRACKING = 'Tracking',\n  DEPRECATION = 'Deprecation',\n}\n\nexport type GoogleAnalyticsCallback = (...args: any[]) => void;\n\nexport const MAX_QUEUE_LENGTH = 1500;\n\nexport default class GoogleAnalytics {\n\n  public history: IArguments[] = [];\n\n  private _settings: {[key: string]: any};\n  private _queue: IArguments[] = [];\n  private _trackingId: string = process.env.VUE_APP_GA_ID as string;\n  private _useTracking: boolean;\n  private _callbacks: GoogleAnalyticsCallback[] = [];\n  private _gaReady: boolean = false;\n\n  private get _gtag() {\n    if (!this._useTracking) {\n      return (...args: any[]) => (DEBUG_TRACKING_LOCALLY) ? console.log('GA-Tracking: ', ...args) : null;\n    }\n    return (window as any).gtag;\n  }\n\n  // currently we set useTracking to true if we do not provide a value\n  // for www.roomle.com it is determined by the build flags and the\n  // embedding webshop has to deactivate Google Analytics with init data\n  // we need to figure out if we can set useTracking to false on default\n  // but this will happen here: https://roomle.atlassian.net/browse/RML-609\n  constructor(configuratorId: string, useTracking: boolean = true) {\n    this._useTracking = useTracking;\n    const customMap = {};\n    this._setObjectProperties(GA_DIMENSIONS, customMap, GA_CUSTOM.DIMENSION, GA_DIMENSIONS_ORDER);\n    this._setObjectProperties(GA_METRICS, customMap, GA_CUSTOM.METRIC, GA_METRICS_ORDER);\n    const settings: {[key: string]: any} = {custom_map: customMap};\n\n    if ((navigator as any).sendBeacon) {\n      settings.transport_type = 'beacon';\n    }\n\n    Object.keys(GA_DIMENSIONS).forEach((key) => settings[GA_DIMENSIONS[key]] = GA_NULL_VALUE);\n    delete settings[GA_DIMENSIONS.CLIENT_ID]; // USE GTAG.JS DEFAULT, see: https://bit.ly/2Fg7fws\n    settings[GA_DIMENSIONS.WINDOW_ID] = uuid();\n    settings[GA_DIMENSIONS.CONFIGURATOR_ID] = configuratorId;\n    settings[GA_DIMENSIONS.VISIBILITY_STATE] = document.visibilityState !== undefined ? document.visibilityState : GA_NULL_VALUE;\n    settings.anonymize_ip = true; // also need to add it here, otherwise not all requests are anonymized, this is due to tagmanager vs analytics\n    if ((window as any).ga) {\n      /* tracker: any because it is something from GA */\n      (window as any).ga((tracker: any) => {\n        const buildTaskKey = 'buildHitTask';\n        const originalBuildHitTask = tracker.get(buildTaskKey);\n        const customMapSettingsSettings = settings.custom_map;\n        /* model: any because it is something from GA */\n        tracker.set(buildTaskKey, (model: any) => {\n          const qt = (model.get('queueTime') as number) || 0;\n          model.set(this._findDimension(GA_DIMENSIONS.HIT_TIME, customMapSettingsSettings), String(new Date().getTime() - qt), true);\n          model.set(this._findDimension(GA_DIMENSIONS.HIT_ID, customMapSettingsSettings), uuid(), true);\n          model.set(this._findDimension(GA_DIMENSIONS.HIT_TYPE, customMapSettingsSettings), model.get('hitType'), true);\n          model.set(this._findDimension(GA_DIMENSIONS.VISIBILITY_STATE, customMapSettingsSettings), document.visibilityState, true);\n          originalBuildHitTask(model);\n        });\n      });\n    }\n\n    this._settings = settings;\n    this._setSettings();\n\n    this._trackErrors();\n    this._sendNavigationTimingMetrics();\n    this._execCommand('config', this._trackingId, {\n      page_title: 'homepage',\n      page_path: window.location.pathname,\n      page_location: window.location.href,\n      anonymize_ip: true,\n    });\n\n    if (this._useTracking) {\n      this.giveConsent();\n    }\n\n  }\n\n  public giveConsent() {\n    this._useTracking = true;\n    // load the script when we have time, in the meanwhile\n    // everything is saved into a queue\n    (window as any).requestIdleCallback(() => this._loadLibScript().then(() => {\n      this._gaReady = true;\n      this._flushQueue();\n    }));\n  }\n\n  public trackEvent(action: CUSTOM_ACTION_TYPE | GA_ACTION_TYPE | string, category: GA_CATEGORY, label: string, value: Nullable<number> = null, fieldsObject: object = {}) {\n\n    const data: {[key: string]: any} = {event_category: category, event_label: label};\n\n    if (typeof value === 'number') {\n      data.value = value;\n    }\n    this._send(GA_HIT_TYPE.EVENT, action, Object.assign(data, fieldsObject));\n  }\n\n  public trackTiming(category: GA_CATEGORY, label: any, value: number, fieldsObject: object = {}) {\n    this.trackEvent(GA_ACTION_TYPE.TIMING, category, label, value, {name: label});\n    this.trackEvent(CUSTOM_ACTION_TYPE.TRACK_TIMING, category, label, value, fieldsObject);\n  }\n\n  public setDimension(dimension: string, value: any) {\n    this._settings[dimension] = value;\n    this._execCommand('config', this._trackingId, this._settings);\n  }\n\n  public setDimensions(dimensions: {[key: string]: any}) {\n    for (const key in dimensions) {\n      if (dimensions.hasOwnProperty(key)) {\n        this.setDimension(key, dimensions[key]);\n      }\n    }\n  }\n\n  public trackError(message: string, specialErrorName: Nullable<string> = null) {\n    // \"as any\" because --> https://stackoverflow.com/a/40936309/1280401\n    const errorEvent = new (ErrorEvent as any)('TrackError', {\n      error: new Error(message),\n      message,\n      lineno: -1,\n      filename: GA_NULL_VALUE,\n    });\n    if (specialErrorName) {\n      try {\n        Object.defineProperty(errorEvent.error, 'name', {value: specialErrorName});\n      } catch (e) {\n        errorEvent.error = e;\n      }\n    }\n    this._trackErrorEvent(errorEvent);\n  }\n\n  public trackContentError(message: string) {\n    this.trackError(CONTENT_ERROR_PREFIX + message, 'ContentError');\n  }\n\n  public addCallback(listener: GoogleAnalyticsCallback) {\n    if (this._callbacks.includes(listener)) {\n      return;\n    }\n    this._callbacks.push(listener);\n  }\n\n  public removeUiCallback(listener: GoogleAnalyticsCallback) {\n    const index = this._callbacks.indexOf(listener);\n    if (index === -1) {\n      return;\n    }\n    this._callbacks.splice(index, 1);\n  }\n\n  public cleanUpHistory() {\n    this.history = [];\n  }\n\n  public trackWrongDomain() {\n    this.trackError('Domain error', 'DOMAIN_ERROR');\n  }\n\n  public trackNoActivePackage() {\n    this.trackError('No active package', 'PACKAGE_ERROR');\n  }\n\n  private _execCommand(...args: any[]) {\n    this._callbacks.forEach((callback) => callback(...args));\n    this._gtag(...args);\n  }\n\n  private _loadLibScript() {\n    if (this._useTracking) {\n      return ScriptLoader.fetch('https://www.googletagmanager.com/gtag/js?id=' + this._trackingId, {id: 'tracking'});\n    }\n    return Promise.resolve();\n  }\n\n  private _send(..._args: any[]) {\n    this._queue.push(arguments);\n    if (isInIframe()) {\n      this.history.push(arguments);\n    }\n    // if the queues are becoming too large we\n    // need to clear them otherwise we get memory\n    // problems. We trade tracking accurency against\n    // runtime performance here but performance is\n    // more important than super clean tracking\n    if (this._queue.length > MAX_QUEUE_LENGTH) {\n      this._queue = [];\n    }\n    if (this.history.length > MAX_QUEUE_LENGTH) {\n      this.cleanUpHistory();\n    }\n\n    // Only send GA trackings when we have time\n    // otherwise GA interferse with our rendering performance\n    (window as any).requestIdleCallback(() => this._flushQueue());\n  }\n\n  private _flushQueue() {\n    if (!this._gaReady && !DEBUG_TRACKING_LOCALLY) {\n      return;\n    }\n    this._queue.forEach((queuedArgs) => this._execCommand(...queuedArgs));\n    this._queue = [];\n  }\n\n  private _setObjectProperties(input: {[key: string]: string}, output: {[key: string]: string}, gaKey: GA_CUSTOM, order: string[]) {\n    const map: {[key: string]: number} = {};\n    order.forEach((value, index) => map[value] = index + 1);\n    Object.keys(input).forEach((key) => output[gaKey + map[input[key]]] = input[key]);\n  }\n\n  private _trackException(description: string, fatal: boolean = false) {\n    this._send(GA_HIT_TYPE.EVENT, GA_ACTION_TYPE.EXCEPTION, {\n      description,\n      fatal,\n    });\n  }\n\n  private _trackErrors() {\n    const loadErrorEvents: ErrorEvent[] = (window as any).__e?.q?.length ? (window as any).__e.q : [];\n    for (const event of loadErrorEvents) {\n      this._trackErrorEvent(event);\n    }\n    window.removeEventListener('error', (window as any).__e);\n    window.addEventListener('error', this._trackErrorEvent.bind(this));\n  }\n\n  private _trackErrorEvent(error: ErrorEvent) {\n    const err = error.error || {\n      message: `${error.message} (${error.lineno}:${error.colno})`,\n    };\n    const name = err.name || '(no error name)';\n    const label = `${err.message}\\n${err.stack || '(no stack trace)'}`;\n    this.trackEvent(name, GA_CATEGORY.ERROR, label, undefined, {\n      nonInteraction: true,\n    });\n\n    this._trackException(err.message);\n\n  }\n\n  private _setSettings() {\n    this._execCommand('config', this._trackingId, this._settings);\n  }\n\n  private _findDimension(name: string, customMap: {[key: string]: string}) {\n    for (const key in customMap) {\n      if (customMap.hasOwnProperty(key) && name === customMap[key]) {\n        return key;\n      }\n    }\n    return null;\n  }\n\n  private _sendNavigationTimingMetrics() {\n    // Only track performance in supporting browsers.\n    if (!(window.performance && window.performance.timing)) {\n      return;\n    }\n\n    // If the window hasn't loaded, run this function after the `load` event.\n    if (document.readyState !== 'complete') {\n      window.addEventListener('load', this._sendNavigationTimingMetrics.bind(this));\n      return;\n    }\n\n    const nt = performance.timing;\n    const navStart = nt.navigationStart;\n\n    const responseEnd = Math.round(nt.responseEnd - navStart);\n    const domLoaded = Math.round(nt.domContentLoadedEventStart - navStart);\n    const windowLoaded = Math.round(nt.loadEventStart - navStart);\n    const timeToFirstByte = Math.round(nt.responseStart - nt.fetchStart);\n\n    // In some edge cases browsers return very obviously incorrect NT values,\n    // e.g. 0, negative, or future times. This validates values before sending.\n    const allValuesAreValid = (...values: number[]) => values.every((value) => value > 0 && value < 6e6);\n\n    if (allValuesAreValid(responseEnd, domLoaded, windowLoaded)) {\n      this.trackTiming(GA_CATEGORY.NAVIGATION_TIMING, GA_NULL_VALUE, Math.round((new Date()).getTime() - navStart), {\n        nonInteraction: true,\n        [GA_METRICS.RESPONSE_END_TIME]: responseEnd,\n        [GA_METRICS.DOM_LOAD_TIME]: domLoaded,\n        [GA_METRICS.WINDOW_LOAD_TIME]: windowLoaded,\n        [GA_METRICS.TIME_TO_FIRST_BTYE]: timeToFirstByte,\n      });\n      this.trackEvent(CUSTOM_ACTION_TYPE.TRACK_TIMING, GA_CATEGORY.NAVIGATION_TIMING, 'ResponseEnd', responseEnd);\n      this.trackEvent(CUSTOM_ACTION_TYPE.TRACK_TIMING, GA_CATEGORY.NAVIGATION_TIMING, 'DomLoaded', domLoaded);\n      this.trackEvent(CUSTOM_ACTION_TYPE.TRACK_TIMING, GA_CATEGORY.NAVIGATION_TIMING, 'WindowLoaded', windowLoaded);\n      this.trackEvent(CUSTOM_ACTION_TYPE.TRACK_TIMING, GA_CATEGORY.NAVIGATION_TIMING, 'TimeToFirstByte', timeToFirstByte);\n    }\n  }\n\n}\n","// This separate file is needed because if we put something vue related into\n// utils.ts the whole vue lib is included into the embedding.js\n\nimport {UI_STATE_ACTIONS, UI_STATE_MUTATIONS} from '@/configurator/store/ui-state';\nimport {ExposedCallbacks} from '@/configurator/embedding/exposed-callbacks';\nimport {Store} from 'vuex';\nimport {StoreState} from '@/common/store';\nimport {SdkConnector} from '@/configurator/business-logic/sdk-connector';\nimport {removeLoadingScreen, showLoadingScreen} from '@/common/utils/dom';\nimport {Analytics} from '@/common/plugins/analytics';\nimport {UI_BUTTON} from '@/configurator/embedding/types';\nimport {GA_CATEGORY} from '@/common/utils/google-analytics';\nimport {UserAction} from '@roomle/web-sdk/lib/definitions/typings/rapi-types';\nimport {USER_ACTION, USER_ACTION_MODULE} from '@/common/utils/types';\n\nexport const startConfiguring = (store: Store<StoreState>, exposedCallbacks: ExposedCallbacks) => {\n  store.commit(UI_STATE_MUTATIONS.SET_IS_EXPANDED_FOR_CONFIGURE, !store.state.uiState.isDesktop);\n  if (!store.state.uiState.isDesktop) {\n    exposedCallbacks.onUseFullPage();\n    store.dispatch(UI_STATE_ACTIONS.START_CONFIGURING);\n  }\n};\n\nexport const triggerRequestProduct = async (embeddingCallbacks: ExposedCallbacks, sdkConnector: SdkConnector, store: Store<StoreState>, analytics: Analytics) => {\n  showLoadingScreen();\n  embeddingCallbacks.onButtonClicked(UI_BUTTON.REQUESTPRODUCT);\n  const configurator = await sdkConnector.configuratorApi;\n  const image = await configurator.preparePerspectiveImage();\n  const {currencySymbol, price} = store.state.coreData;\n  const {catalogLabel, label} = store.state.coreState;\n  const configuration = await configurator.saveCurrentConfiguration();\n  const pricing = {currencySymbol, price};\n  const labels = {catalogLabel, label};\n  const storedPartList = store.state.coreData.partList;\n  /**\n   * BREAKING SINCE VERSION 3.12.0-alpha.1 (as of 2020-11-05)\n   * we return now the whole partlist object which we get from\n   * the Core and not only the fullList\n   * Link: https://gitlab.com/roomle/web/roomle-ui/-/merge_requests/303\n   */\n  const useRealPartList = store.state.uiState.initData?.featureFlags?.realPartList;\n  const partList = useRealPartList ? storedPartList : (storedPartList.fullList as any);\n  embeddingCallbacks.onRequestProduct(configuration.id, image, partList, pricing, labels, configuration);\n console.log(configuration.id, image, partList, pricing, labels, configuration);\n analytics.ga.trackEvent('RequestProduct', GA_CATEGORY.INTERACTION, configuration.id);\n  const configuratorId = store.state.uiState.initData?.configuratorId;\n  if (configuratorId) {\n    const rapiAccess = await sdkConnector.getRapiAccess();\n    await rapiAccess.sendUserAction({\n      module: USER_ACTION_MODULE.CONFIGURATOR,\n      action: USER_ACTION.CONVERSION,\n      actionId: configuration.id,\n      actionLabel: configuratorId,\n    } as unknown as UserAction);\n  }\n  removeLoadingScreen();\n};\n\nexport const triggerRequestPlan = async (embeddingCallbacks: ExposedCallbacks, sdkConnector: SdkConnector, store: Store<StoreState>, analytics: Analytics) => {\n  showLoadingScreen();\n  embeddingCallbacks.onButtonClicked(UI_BUTTON.REQUESTPLAN);\n  const planner = await sdkConnector.plannerApi;\n  const plannerConnector = await sdkConnector.plannerConnector;\n  const image = await planner.preparePerspectiveImage();\n  const plan = await plannerConnector.saveCurrentPlan(image);\n  const planId = plan.id;\n\n  const kernelPlanObjects = await planner.getObjects();\n  embeddingCallbacks.onRequestPlan(planId as string, image!, kernelPlanObjects);\n  analytics.ga.trackEvent('RequestPlan', GA_CATEGORY.INTERACTION, planId as string);\n  const configuratorId = store.state.uiState.initData?.configuratorId;\n  if (configuratorId) {\n    // TODO check if we should track this as planner or configurator module\n    const rapiAccess = await sdkConnector.getRapiAccess();\n    await rapiAccess.sendUserAction({\n      module: USER_ACTION_MODULE.CONFIGURATOR,\n      action: USER_ACTION.CONVERSION,\n      actionId: planId,\n      actionLabel: configuratorId,\n    } as unknown as UserAction);\n  }\n  removeLoadingScreen();\n};\n"],"sourceRoot":""}